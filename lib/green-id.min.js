var fcGreenID=function(a){"use strict";if(!fc)return{};var b={address:"greenIDAddress",country:"greenIDCountry",dob:"greenIDDOB",email:"greenIDEmail",firstName:"greenIDFirstName",integrationId:"greenIDIntegration",middleName:"greenIDMiddleName",postcode:"greenIDPostcode",state:"greenIDState",suburb:"greenIDSuburb",title:"greenIDTitle",surname:"greenIDSurname"},c=["address","country","firstName","postcode","state","suburb","surname"],d=function(){if(void 0!==fcGreenID.field)return fcGreenID.field;var a;for(a in fc.fieldSchema)if(fc.fieldSchema.hasOwnProperty(a)&&"greenIdVerification"===fc.fieldSchema[a].type)return fcGreenID.field=fc.fieldSchema[a],fcGreenID.field},e=function(a){return 0===a.length?"":void 0!==fc.fields[a]?fc.fields[a]:""},f=function(a){fcGreenID.initialised=!0,fc.api("greenid/gateway/init",a,"POST",function(a){"object"==typeof a&&void 0!==typeof a.result&&("undefined"==typeof fc.fields[a.fieldId]&&(fc.fields[a.fieldId]={}),fc.fields[a.fieldId].result=a.result,fc.saveQueue[a.fieldId]=fc.fields[a.fieldId])})},g=function(a){return"object"==typeof a&&"object"==typeof a.result},h=function(a){return g(a)&&"object"==typeof a.result.sources},i=function(a,b){return h(a)&&"object"==typeof a.result.sources[b]},j=function(a,b){var c=fc.fields[a];return void 0!==c&&i(c,b)&&void 0!==c.result.sources[b].passed?["true",!0].indexOf(c.result.sources[b].passed)>-1:(console.log("HURR"),!1)},k=function(a){var b=a.find(".fc-loader-container");a.hasClass("fc-loading-widget")||a.addClass("fc-loading-widget"),0===b.length&&a.prepend('<div class="fc-loader-container"><div class="fc-loader-bg"></div><div class="fc-loader-content"><div class="fc-loader-wrapper"><div class="fc-loader"></div><div class="loader-section section-left"></div><div class="loader-section section-right"></div></div></div></div>')},l=function(a){var b=a.find(".fc-loader-container");a.hasClass("fc-loading-widget")&&a.removeClass("fc-loading-widget"),b.length>0&&b.remove()},m=function(a,b){var c=a.find(".fc-error-widget");return c.length>0?void c.find(".alert").html(b):void a.append('<div class="fc-error-widget"><div class="alert alert-danger" role="alert">'+b+"</div></div>")},n=function(a){var b=a.find(".fc-error-widget");b.length>0&&b.remove()},o=function(b){var c=a(fc.jQueryContainer).find('.fc-field-greenIdVerification[fc-data-group="'+b+'"]'),d="fc-is-verified",e="fc-not-verified";return 0===c.length?void console.log("updateIsVerified field container not found."):void(fcGreenID.isVerified(b)?c.removeClass(e).addClass(d):c.removeClass(d).addClass(e))},p=function(b,c,d){var e,f,g,h,p,q=fc.fieldSchema[c],r=fc.fields[c],s={},t={};if(void 0!==q&&"object"==typeof r){if(e=a(fc.jQueryContainer).find('.fc-child-options[data-for="'+c+'"]'),0===e.length)return void console.log("Child container not found.");for(p in d)if(d.hasOwnProperty(p)){if(h=e.find("."+d[p]+" input"),0===h.length)return void m(e,"Required field '"+p+"' not found.");if(g=h.val(),null===g||0===g.length)return void m(e,"Please ensure all form fields are correctly filled out.");s[p]=h.val(),t[p]=g}if(f=e.find(".tos input:checked").length>0,!f)return m(e,"You must read and agree to the terms and conditions prior to verification."),!1;n(e),t.verificationToken=r.result.userToken,t.fieldId=c,k(e),fc.api("greenid/gateway/verify-"+b,t,"POST",function(d){var f,g;return l(e),"object"!=typeof d||"boolean"!=typeof d.success||"string"!=typeof d.message||d.success?i(d,b)?(fc.fields[d.fieldId].result=d.result,fc.saveQueue[d.fieldId]=fc.fields[d.fieldId],j(c,b)?(f=a(fc.jQueryContainer).find('.fc-field-greenIdVerification[fc-data-group="'+c+'"] .fc-drivers-license'),g=a(fc.jQueryContainer).find('.fc-field-greenIdVerification[fc-data-group="'+c+'"] .fc-greenid-drivers-license'),g.slideUp(),f.addClass("fc-verified"),fcGreenID.setProgress(d.fieldId),void o(c)):void m(e,"<strong>Oops!</strong> We were unable to verify your license. Please double-check your details and try re-submitting.")):void m(e,"<strong>Eek!</strong> An invalid result was returned from the server. Please contact support@formcorp.com.au"):(m(e,d.message),!1)})}},q=function(a){var b={licenseNumber:"drivers-license",cardNumber:"card-number",surname:"surname"};p("nswrego",a,b)},r=function(a){var b={licenseNumber:"drivers-license",dateOfBirth:"dob",firstName:"first-name",surname:"surname"};p("actrego",a,b)},s=function(a){var b={licenseNumber:"drivers-license",dateOfBirth:"dob",firstName:"first-name",surname:"surname"};p("qldrego",a,b)},t=function(a){var b={licenseNumber:"drivers-license",dateOfBirth:"dob",surname:"surname"};p("sarego",a,b)},u=function(a){var b={licenseNumber:"drivers-license",dateOfBirth:"dob",surname:"surname",address1:"vic_address_1",address2:"vic_address_2",address3:"vic_address_3"};p("vicrego",a,b)},v=function(a){var b={licenseNumber:"drivers-license",dateOfBirth:"dob",expiry:"expiry"};p("warego",a,b)},w=function(b){var c,d,e,f,g,h,p=fc.fieldSchema[b],q=fc.fields[b],r={},s={},t={passportNumber:"passport-number",givenName:"given-name",familyName:"family-name",dateOfBirth:"dob",familyNameAtBirth:"family-name-at-birth",placeOfBirth:"place-of-birth"};if(void 0!==p&&"object"==typeof q){if(c=a(fc.jQueryContainer).find('.fc-field[fc-data-group="'+b+'"] .fc-greenid-options'),0===c.length)return void console.log("Child container not found.");for(g in t)if(t.hasOwnProperty(g)){if(console.log("."+t[g]+" input"),f=c.find("."+t[g]+" input"),0===f.length)return void m(c,"Required field '"+g+"' not found.");if(e=f.val(),null===e||0===e.length)return void m(c,"Please ensure all form fields are correctly filled out.");r[g]=f.val(),s[g]=e}if(s.middleNames=c.find(".middle-names input").val(),h=c.find(".country-birth select option:selected"),0===h.length||0===h.val().length)return void m(c,"Please ensure all form fields are correctly filled out.");if(s.countryOfBirth=h.val(),"1"!==s.countryOfBirth&&(s.firstNameAtCitizenship=c.find(".first-name-at-citizenship input").val(),s.surnameAtCitizenship=c.find(".surname-at-citizenship input").val(),0===s.firstNameAtCitizenship.length||0===s.surnameAtCitizenship.length))return void m(c,"Please ensure all form fields are correctly filled out.");if(console.log(s),d=c.find(".tos input:checked").length>0,!d)return m(c,"You must read and agree to the terms and conditions prior to verification."),!1;n(c),s.verificationToken=q.result.userToken,s.fieldId=b,k(c),fc.api("greenid/gateway/verify-passport",s,"POST",function(d){var e,f;return l(c),"object"!=typeof d||"boolean"!=typeof d.success||"string"!=typeof d.message||d.success?i(d,"passport")?(fc.fields[d.fieldId].result=d.result,fc.saveQueue[d.fieldId]=fc.fields[d.fieldId],j(b,"passport")?(e=a(fc.jQueryContainer).find('.fc-field-greenIdVerification[fc-data-group="'+b+'"] .fc-visa-verification'),f=a(fc.jQueryContainer).find('.fc-field-greenIdVerification[fc-data-group="'+b+'"] .fc-greenid-options'),f.slideUp(),e.addClass("fc-verified"),fcGreenID.setProgress(d.fieldId),void o(b)):void m(c,"<strong>Oops!</strong> We were unable to verify your oassoirt. Please double-check your details and try re-submitting.")):void m(c,"<strong>Eek!</strong> An invalid result was returned from the server. Please contact support@formcorp.com.au"):(m(c,d.message),!1)})}},x=function(b){var c,d,e,f,g,h=fc.fieldSchema[b],p=fc.fields[b],q={},r={},s={visaNumber:"visa-number",familyName:"family-name",dateOfBirth:"dob",country:"country-passport"};if(void 0!==h&&"object"==typeof p){if(c=a(fc.jQueryContainer).find('.fc-field[fc-data-group="'+b+'"] .fc-greenid-options'),0===c.length)return void console.log("Child container not found.");for(g in s)if(s.hasOwnProperty(g)){if(console.log("."+s[g]+" input"),f=c.find("."+s[g]+" input"),0===f.length&&(f=c.find("."+s[g]+" select option:selected"),0===f.length||0===f.val().length))return void m(c,"Required field '"+g+"' not found.");if(0===f.length)return void m(c,"Required field '"+g+"' not found.");if(e=f.val(),null===e||0===e.length)return void m(c,"Please ensure all form fields are correctly filled out.");q[g]=f.val(),r[g]=e}if(d=c.find(".tos input:checked").length>0,!d)return m(c,"You must read and agree to the terms and conditions prior to verification."),!1;n(c),r.verificationToken=p.result.userToken,r.fieldId=b,k(c),fc.api("greenid/gateway/verify-visa",r,"POST",function(d){var e,f;return l(c),"object"!=typeof d||"boolean"!=typeof d.success||"string"!=typeof d.message||d.success?i(d,"visa")?(fc.fields[d.fieldId].result=d.result,fc.saveQueue[d.fieldId]=fc.fields[d.fieldId],j(b,"visa")?(e=a(fc.jQueryContainer).find('.fc-field-greenIdVerification[fc-data-group="'+b+'"] .fc-visa-verification'),f=a(fc.jQueryContainer).find('.fc-field-greenIdVerification[fc-data-group="'+b+'"] .fc-greenid-options'),f.slideUp(),e.addClass("fc-verified"),fcGreenID.setProgress(d.fieldId),void o(b)):void m(c,"<strong>Oops!</strong> We were unable to verify your visa. Please double-check your details and try re-submitting.")):void m(c,"<strong>Eek!</strong> An invalid result was returned from the server. Please contact support@formcorp.com.au"):(m(c,d.message),!1)})}},y=function(){a(fc.jQueryContainer).on(fc.jsEvents.onFieldSuccess,function(){if(void 0===fcGreenID.initialised||fcGreenID.initialised!==!0){var a,g,h,i=d(),j={},k=!0;for(a in b)b.hasOwnProperty(a)&&(g=fc.getConfig(i,b[a],""),j[a]=e(g));if(g=fc.getId(i),"object"==typeof fc.fields[g]&&"object"==typeof fc.fields[g].result)return void console.log("Previously initialised, do nothing.");for(j.fieldId=fc.getId(i),h=0;h<c.length;h+=1)if(g=c[h],void 0===j[g]||0===j[g].length){k=!1;break}k&&f(j)}}),a(fc.jQueryContainer).on("click",".green-id-verify .fc-btn",function(){if(void 0===typeof fcGreenID.currentState)return!1;var b=a(this).attr("data-for");if("string"!=typeof b||void 0===fc.fieldSchema[b])return console.log("field ID does not exist."),!1;if(void 0!==fcGreenID.currentState)switch(fcGreenID.currentState){case"stateNSW":q(b);break;case"stateACT":r(b);break;case"stateQLD":s(b);break;case"stateSA":t(b);break;case"stateVIC":u(b);break;case"stateWA":v(b);break;case"verifyPassport":w(b);break;case"verifyVisa":x(b);break;default:console.log("Unknown current greenID state: "+fcGreenID.currentState)}return!1})};return{init:function(){y()},getPercentage:function(a){var b,c,d=fc.fieldSchema[a],e=fc.fields[a],f={low:["aec","waec"],high:["actrego","medibank","nswrego","passport","qldrego","sarego","vicrego","visa","warego"]},h=5;if(void 0===d||void 0===e||!g(e))return 0;if("string"==typeof e.result.outcome&&["VERIFIED","PENDING"].indexOf(e.result.outcome)>-1)return 100;if("object"==typeof e.result.sources)for(c=0;c<f.length;c+=1)if(b=f[c],"object"==typeof e.result.sources[b]&&void 0!==e.result.sources[b].oneSourceLeft){if([!0,"true"].indexOf(e.result.sources[b].oneSourceLeft)>-1)return 60;break}for(c=0;c<f.low.length;c+=1)b=f.low[c],"object"==typeof e.result.sources[b]&&[!0,"true"].indexOf(e.result.sources[b].passed)>-1&&(h+=10);for(c=0;c<f.high.length;c+=1)b=f.high[c],"object"==typeof e.result.sources[b]&&[!0,"true"].indexOf(e.result.sources[b].passed)>-1&&(h+=40);return h>90&&(h=90),console.log(e),console.log(h),h},isVerified:function(a){return 100===this.getPercentage(a)},setProgress:function(b,c,d){var e,f=a(fc.jQueryContainer).find('.fc-field-greenIdVerification[fc-data-group="'+b+'"]');"boolean"!=typeof d&&(d=!1),void 0===c&&(c=this.getPercentage(b)),d===!0&&o(b),0!==f.length&&(e=f.find(".fc-greenid-progress"),0!==e.length&&e.find(".progress-bar").animate({width:c+"%"},500).html(c+"%"))}}}(jQuery);!function(a){"use strict";console.log("trigger loaded"),console.log(fc.jsEvents.onGreenIdLoaded),a(fc.jQueryContainer).trigger(fc.jsEvents.onGreenIdLoaded)}(jQuery);