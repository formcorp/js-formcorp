Date.now||(Date.now=function(){"use strict";return(new Date).getTime()}),String.prototype.isJson=function(){"use strict";try{return jQuery.parseJSON(this),!0}catch(a){}return!1},String.prototype.escapeRegExp=function(){"use strict";return this.replace(/([.*+?\^=!:${}()|\[\]\/\\])/g,"\\$1")},function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";function b(a){return encodeURIComponent(a)}function c(a){return decodeURIComponent(a)}function d(a){return b("boolean"==typeof g.json&&g.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(h," ")),g.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=g.raw?b:e(b);return a.isFunction(c)?c(d):d}var g,h=/\+/g;g=a.cookie=function(e,h,i){var j,k,l,m,n,o,p,q,r;if(arguments.length>1&&!a.isFunction(h))return i=a.extend({},g.defaults,i),"number"==typeof i.expires&&(j=i.expires,i.expires=new Date,k=i.expires,k.setTime(+k+864e5*j)),document.cookie=[b(e),"=",d(h),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join(""),document.cookie;for(l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n+=1){if(p=m[n].split("="),q=c(p.shift()),r=p.join("="),e&&e===q){l=f(r,h);break}e||(r=f(r),void 0!==r&&(l[q]=r))}return l},g.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}});var fc=function($){"use strict";var scriptUrl=document.getElementById("fc-js-include").getAttribute("src"),isDev=function(){return scriptUrl.indexOf("192.168.")>-1?!0:"undefined"!=typeof fc&&"boolean"==typeof fc.dev?fc.dev:!1},baseUrl=function(a){if(isDev()){void 0===a&&(a=!0);var b=a?/\d+\.\d+\.\d+\.\d+[\:]{1}\d+/:/\d+\.\d+\.\d+\.\d+/,c=scriptUrl.match(b);if(c&&c.length>0)return c[0]}},apiUrl=function(){return isDev()?"string"==typeof fc.apiUrl?fc.apiUrl:"//"+baseUrl(!1)+":9001/":"//api.formcorp.com.au/"},isMinified=function(){return scriptUrl.indexOf(".min.js")>-1},cdnUrl=function(){var a=scriptUrl;return isDev()?"string"==typeof fc.cdnUrl?fc.cdnUrl:"//"+baseUrl(!1)+":9004/":(a=isMinified()?a.replace("formcorp.min.js",""):a.replace("formcorp.js",""),a=a.replace("https://","//").replace("http://","//"))},analyticsUrl=function(){return cdnUrl()+(isMinified()?"analytics.min.js":"analytics.js")},parserUrl=function(){return cdnUrl()+"lib/"+(isMinified()?"parser.min.js":"parser.js")},htmlEncode=function(a){return document.createElement("a").appendChild(document.createTextNode(a)).parentNode.innerHTML},loadCssFile=function(a,b,c){var d,e;void 0===b&&(b="all"),d=document.getElementsByTagName("head")[0],e=document.createElement("link"),void 0!==c&&(e.id=c),e.rel="stylesheet",e.href=htmlEncode(a),e.media=b,d.appendChild(e)},loadJsFile=function(a,b){var c=document.createElement("script"),d=document.getElementsByTagName("script"),e=d[d.length-1];c.type="text/javascript",c.src=htmlEncode(a),c.async=1,"function"==typeof b&&c.addEventListener("load",b),e.parentNode.insertBefore(c,e)},getId=function(a){return"object"==typeof a&&void 0!==a._id&&void 0!==a._id.$id?a._id.$id:""},getDataId=function(a){var b,c,d=[];if(a.indexOf(fc.constants.prefixSeparator)>=0){for(b=a.split(fc.constants.prefixSeparator),c=0;c<b.length;c+=1)-1===d.indexOf(b[c])&&d.push(b[c]);d.length>0&&(a=d.join(fc.constants.prefixSeparator))}return a},getConfig=function(a,b,c,d){var e;if(void 0===c&&(c=""),void 0===d&&(d=!1),void 0!==a&&"object"==typeof a.config&&void 0!==a.config[b]){if(d&&"string"==typeof a.config[b]&&["[","{"].indexOf(a.config[b].substring(0,1))>-1)try{e=$.parseJSON(a.config[b]),a.config[b]=e}catch(f){}return a.config[b]}return c},getValue=function(a,b){void 0===b&&(b="");var c,d,e;return a=getDataId(a),c=fc.fieldSchema[a],d=fc.fields[a],void 0!==c&&(e=getConfig(c,"functionReference",""),e.length>0&&"function"==typeof window[e])?window[e](a):void 0!==d?d:b},getShortLabel=function(a){return getConfig(a,"shortLabel","").length>0?getConfig(a,"shortLabel"):getConfig(a,"label")},getCreditCardType=function(a){return/^5[1-5]/.test(a)?fc.cardTypes.mastercard:/^4/.test(a)?fc.cardTypes.visa:/^3[47]/.test(a)?fc.cardTypes.amex:""},api=function(a,b,c,d,e){(void 0===c||"string"!=typeof c||-1===["GET","POST","PUT"].indexOf(c.toUpperCase()))&&(c="GET"),c=c.toUpperCase(),void 0===b&&(b={}),void 0===b.sessionId&&(b.sessionId=fc.sessionId),void 0===b.form_id&&(b.form_id=fc.formId),void 0===b.branch&&"string"==typeof fc.branch&&(b.branch=fc.branch),void 0!==fc.channel&&"string"==typeof fc.channel&&fc.channel.length>0&&(b.channel=fc.channel),$.ajax({type:c,url:apiUrl()+a,data:b,beforeSend:function(a){a.setRequestHeader("Authorization","Bearer "+fc.publicKey)},success:function(a){if("function"==typeof d){if("string"==typeof a)try{a=$.parseJSON(a)}catch(b){}d(a)}},error:function(a){"function"==typeof e&&e(a)}})},isMobile=function(){return parseInt($(window).width(),10)<fc.config.minSizeForMobile},processed=function(a,b){return(void 0===b||"boolean"!=typeof b)&&(b=!1),"boolean"==typeof fc.processedActions[a]?fc.processedActions[a]:b},getTags=function(a,b,c){if(void 0===a)return{};void 0===b&&(b=""),void 0===c&&(c="");var d,e,f,g=getConfig(a,"tag",!1),h={},i=c;if(g&&(i+=getId(a),h[i]=b+g,d=getConfig(a,"grouplet",!1),d&&d.field&&$.isArray(d.field)&&d.field.length>0))for(f=0;f<d.field.length;f+=1)e=getTags(d.field[f],h[i]+fc.constants.tagSeparator,i+fc.constants.prefixSeparator),Object.keys(e).length>0&&$.extend(h,e);return h},getFieldsSchema=function(a){if("object"!=typeof a)return{};var b,c,d={};for(b=0;b<a.length;b+=1)c=a[b],d[getId(c)]=c;return d},getFieldTags=function(a){(void 0===a||"boolean"!=typeof a)&&(a=!1);var b,c,d,e,f={};for(b in fc.fieldSchema)if(fc.fieldSchema.hasOwnProperty(b)&&(d=getTags(fc.fieldSchema[b]),e={},Object.keys(d).length>0)){for(c in d)d.hasOwnProperty(c)&&(a?e[d[c]]=c:d.hasOwnProperty(c)&&void 0!==fc.fields[c]&&(e[c]=d[c]));$.extend(f,e)}return f},getFieldTagValues=function(){var a,b,c,d,e={};for(a in fc.fieldSchema)if(fc.fieldSchema.hasOwnProperty(a)&&(c=getTags(fc.fieldSchema[a]),d={},Object.keys(c).length>0)){for(b in c)c.hasOwnProperty(b)&&void 0!==fc.fields[b]&&(d[c[b]]=fc.fields[b]);$.extend(e,d)}return e},getFieldValue=function(a){var b,c,d,e,f=[];if(a&&0!==a.length){if(a.is("input")||a.is("textarea")){if("radio"===a.attr("type"))return $("input[name="+$(a).attr("name")+"]:checked").length>0?$("input[name="+$(a).attr("name")+"]:checked").val():"";if("checkbox"===a.attr("type"))return b=$("input[formcorp-data-id="+$(a).attr("formcorp-data-id")+"]:checked"),0===b.length?"":(f=[],b.each(function(){f.push($(this).val())}),JSON.stringify(f));if(c=$(a).attr("formcorp-data-id"),void 0!==fc.fieldSchema[c])return getConfig(fc.fieldSchema[c],"readOnly",!1)?"":a.val()}return a.is("select")?$(a).find("option:selected").val():a.is("button")&&(c=a.attr("formcorp-data-id"))?getConfig(fc.fieldSchema[c],"allowMultiple",!1)?(d=[],$('.fc-button.checked[formcorp-data-id="'+c+'"]').each(function(){d.push(decodeURIComponent($(this).attr("data-field-value")))}),d):(e=$('.fc-button.checked[formcorp-data-id="'+c+'"]').attr("data-field-value"),e?decodeURIComponent(e):$('.fc-button.checked[formcorp-data-id="'+c+'"]').text()):(c=a.attr("fc-data-group"),(void 0!==fc.renderedSignatures&&void 0!==fc.renderedSignatures[c]||a.hasClass(fc.config.signatureClass))&&(void 0===c&&(c=$(a).attr("formcorp-data-id")),void 0!==fc.renderedSignatures&&void 0!==fc.renderedSignatures[c])?fc.renderedSignatures[c].getSignatureString():"")}},fieldIsEmpty=function(a){var b=getFieldValue(a);if(void 0!==b)return!b||0===b.length},getCustomErrors=function(a,b){var c,d,e,f,g,h,i,j,k,l,m=[];if(!getConfig(a,"required",!1)&&0===b.length)return[];if("string"==typeof a.config.validators&&["[","{"].indexOf(a.config.validators.substring(0,1))>-1)try{k=$.parseJSON(a.config.validators),a.config.validators=k}catch(n){}if("object"==typeof a.config.validators&&a.config.validators.length>0)for(c=0;c<a.config.validators.length;c+=1){e=a.config.validators[c],i=fc.toCamelCase(e.type),f=window;try{if(i===fc.constants.functionCallbackType&&$.isArray(e.params)&&e.params.length>0&&e.params[0].length>0)"function"!=typeof f[e.params[0]]?console.log("Custom function '"+e.params[0]+"' callback not defined."):(f=f[e.params[0]],l=f(b));else{for(j="fc.validator"+i.substring(0,1).toUpperCase()+i.substr(1),g=j.split("."),d=0;d<g.length;d+=1)f=f[g[d]];l=f(e.params,b)}"function"!=typeof f||l||(h="string"==typeof e.error&&e.error.length>0?e.error:fc.lang.defaultCustomValidationError,m.push(h))}catch(n){console.log("Exception raised while attempting custom validator.")}}return m},fieldErrors=function(a){var b,c,d,e,f,g,h,i,j,k,l=$('.fc-field[fc-data-group="'+a+'"]'),m=a,n=[];if(0===l.length)return[];if(l.hasClass("fc-hide"))return[];if(b=l.parent(),c=fc.fieldSchema[m],void 0!==fc.fields[m]&&(j=fc.fields[m]),k=getFieldValue(l.find(".fc-fieldinput")),d=void 0!==k?k:j,(void 0===d||null===d)&&(d=""),b.hasClass("fc-hide"))return[];i=l;do if(f=i.attr("fc-belongs-to"),g=$('[fc-data-group="'+f+'"],[formcorp-data-id="'+f+'"]'),h=g.attr("fc-data-group"),void 0===h&&(h=g.attr("formcorp-data-id")),void 0!==h){if(g.hasClass("fc-hide"))return[];i=$('[fc-data-group="'+f+'"],[formcorp-data-id="'+f+'"]')}while(void 0!==h);if("abnVerification"===c.type){if(fc.validAbns.indexOf(d)<0)return n.push(fc.lang.validAbnRequired),n}else if(e=$('[fc-data-group="'+a+'"] [data-required="true"]'),getConfig(c,"required",!1)&&fieldIsEmpty(e))return n.push(fc.lang.emptyFieldError),n;return n=n.concat(getCustomErrors(c,d))},logEvent=function(a,b){void 0!==a&&fc.analytics&&fc.analytics.logEvent&&fc.analytics.logEvent(a,b)},showFieldError=function(a,b){var c,d=$(fc.jQueryContainer).find('div[fc-data-group="'+a+'"]'),e="";if($(fc.jQueryContainer).trigger(fc.jsEvents.onFieldError,[a,b]),d.addClass("fc-error"),fc.config.inlineValidation===!0){for(c=0;c<b.length;c+=1)e+=b[c]+"<br>";d.find(".fc-error-text").html(e)}},showFieldSuccess=function(a){var b=$(fc.jQueryContainer).find('div[fc-data-group="'+a+'"]');$(fc.jQueryContainer).trigger(fc.jsEvents.onFieldSuccess,[a]),b.addClass("fc-field-success")},getGroupletFields=function(a){if("grouplet"===a.type){var b,c,d,e=getConfig(a,"grouplet",{field:[]}),f=[];for(d=a._id.$id,b=0;b<e.field.length;b+=1)c=e.field[b],"grouplet"===c.type?f.concat(getGroupletFields(c)):f.push(d+fc.constants.prefixSeparator+c._id.$id);return f}return[]},getFieldPageId=function(a,b){var c,d,e,f,g,h,i,j,k;if("boolean"!=typeof b&&(b=!1),void 0===fc.fieldPages&&(fc.fieldPages={}),void 0!==fc.fieldPages[a]&&"string"==typeof fc.fieldPages[a])return fc.fieldPages[a];if(b)return j=$(fc.jQueryContainer).find('.fc-field[fc-data-group="'+a+'"]'),0===j.length?"":(i=$(fc.jQueryContainer).find(".fc-section-"+j.attr("fc-belongs-to")),0===i.length?"":i.parent().hasClass("fc-page")?i.parent().attr("data-page-id"):"");for(c=0;c<fc.schema.stage.length;c+=1)for(d=0;d<fc.schema.stage[c].page.length;d+=1)for(h=fc.schema.stage[c].page[d],e=0;e<h.section.length;e+=1)if("object"==typeof h.section[e].field)for(i=h.section[e],f=0;f<i.field.length;f+=1)if(j=i.field[f],fc.fieldPages[getId(j)]=getId(h),"grouplet"===j.type)for(k=getGroupletFields(j),g=0;g<k.length;g+=1)fc.fieldPages[k[g]]=getId(h);return void 0!==fc.fieldPages[a]&&"string"==typeof fc.fieldPages[a]?fc.fieldPages[a]:""},getFieldByTag=function(a){var b,c;for(b in fc.fieldSchema)if(fc.fieldSchema.hasOwnProperty(b)&&(c=getConfig(fc.fieldSchema[b],"tag",""),c.length>0&&c===a))return fc.fieldSchema[b]},removeFieldError=function(a){$(fc.jQueryContainer).find('div[fc-data-group="'+a+'"]').removeClass("fc-error")},removeFieldSuccess=function(a){$(fc.jQueryContainer).find('div[fc-data-group="'+a+'"]').removeClass("fc-field-success")},godFields=["richTextArea"],luhnCheck=function(a){var b,c,d=0;for(b=0;b<a.length;b+=1)c=parseInt(a.substr(b,1),10),b%2===0&&(c*=2,c>9&&(c=1+c%10)),d+=c;return d%10===0},validCreditCardField=function(a,b,c){var d,e,f,g,h,i,j=void 0===fc.fields[a]?"":fc.fields[a],k=[];return j.length>0?[]:(d=$(fc.jQueryContainer).find('[fc-data-group="'+a+'"]'),0===d.length?(console.log("[FC] Unable to locate CC form"),[]):(e=d.find(".fc-cc-name input"),f=d.find(".fc-cc-number input"),g=parseInt(d.find(".fc-cc-expirydate option:selected").val(),0),h=parseInt(d.find(".fc-cc-expirydate-year option:selected").val(),0),i=d.find(".fc-cc-ccv input"),0===e.val().length&&k.push(fc.lang.creditCardMissingName),f=f.val().replace(/[^0-9]/g,"",f),0===f.length?k.push(fc.lang.creditCardMissingNumber):(f.length<fc.config.creditCardNumberLimits[0]||f.length>fc.config.creditCardNumberLimits[1]||!luhnCheck(f))&&k.push(fc.lang.invalidCardFormat),void 0===g||0===g.length||void 0===h||0===h.length||isNaN(g)||isNaN(h)?k.push(fc.lang.creditCardMissingExpiryDate):1>g||g>12?k.push(fc.lang.creditCardMissingExpiryDate):h<(new Date).getFullYear()||h>(new Date).getFullYear()+30?k.push(fc.lang.creditCardMissingExpiryDate):h===(new Date).getFullYear()&&g<(new Date).getMonth()+1&&k.push(fc.lang.creditCardExpired),i=i.val().replace(/[^0-9]/g,"",i),(0===i.length||i.length>fc.config.maxCreditCardCodeLength)&&k.push(fc.lang.creditCardMissingSecurityCode),k))},inModal=function(a){var b,c,d=a.parent().parent().parent().parent();return 0===d.length?!1:(b=d.attr("fc-data-group"),void 0!==b&&null!==b&&(c=fc.fieldSchema[b],getConfig(c,"repeatable",!1))?fc.constants.repeatableInModal.indexOf(parseInt(getConfig(c,"repeatableStyle",1)))>-1:!1)},getFieldErrors=function(a,b,c){var d,e=[],f=fc.fieldSchema[a],g=!1;if("string"!=typeof c&&(c=""),void 0===f)return[];if("creditCard"===f.type)(0===b.length||void 0==b.success||1!=b.success)&&e.push(fc.lang.paymentRequired),g=!0;else if(["emailVerification","smsVerification"].indexOf(f.type)>-1)void 0===fc.fields[getId(f)]||"1"!==fc.fields[getId(f)]?e.push(fc.lang.fieldMustBeVerified):g=!0;else if("signature"===f.type)void 0===fc.renderedSignatures||void 0===fc.renderedSignatures[a]?e.push("Field has not been initialised"):fc.renderedSignatures[a].validateForm()===!1?e.push(fc.lang.emptyFieldError):fc.fields[a]=fc.renderedSignatures[a].getSignatureString(),g=!0;else{if("grouplet"===f.type)return;"greenIdVerification"===f.type&&(void 0===fc.greenID?e.push("Green ID has not been initialised."):"object"==typeof b&&fc.greenID.passesValidation(c+getId(f))?g=!0:e.push("You must verify your identity."))}return g||0!==e.length||(void 0!==f.config&&"boolean"==typeof f.config.repeatable&&f.config.repeatable?(d=$(this).attr("data-required"),"true"!==d||"object"==typeof b&&0!==b.length||e.push(fc.lang.emptyFieldError)):e=fieldErrors(a)),e},validForm=function(a,b){var c={};return void 0===a&&(a=fc.jQueryContainer),"boolean"!=typeof b&&(b=!0),$(a).find(".fc-field[fc-data-group]").each(function(){var d,e,f,g=$(this),h=g.attr("fc-data-group"),i=g.parent(),j=fc.fieldSchema[h],k=void 0===fc.fields[h]?"":fc.fields[h],l=[],m="";g.parent().attr("class").indexOf("repeatable")>-1&&-1===g.parent().attr("class").indexOf("fc-repeatable-row")||g.hasClass("fc-hide")||inModal(g)||(f=g.attr("fc-belongs-to"),"string"==typeof f&&(i=$(fc.jQueryContainer).find('.fc-section[formcorp-data-id="'+f+'"]'),i.length>0&&i.hasClass("fc-hide"))||h.indexOf(fc.constants.prefixSeparator)>-1&&(e=h.split(fc.constants.prefixSeparator),d=$(a).find('.fc-field[fc-data-group="'+e[0]+'"]'),d.hasClass("fc-hide"))||(void 0!==j&&h.indexOf(fc.constants.prefixSeparator)>=0&&(m=h.replace(getId(j),"")),getConfig(j,"required",!1)===!1||getConfig(j,"readOnly",!1)||("string"!=typeof j.type||-1===godFields.indexOf(j.type))&&(i.hasClass("fc-hide")||(l=getFieldErrors(h,k,m),l.length>0?(logEvent(fc.eventTypes.onFieldError,{fieldId:h,errors:l}),c[h]=l,removeFieldSuccess(h),b&&showFieldError(h,l)):(b&&removeFieldError(h),showFieldSuccess(h))))))}),0===Object.keys(c).length},getPageById=function(a){if("object"==typeof fc.pages[a])return fc.pages[a];var b,c,d,e;for(b=0;b<fc.schema.stage.length;b+=1)if(d=fc.schema.stage[b],"object"==typeof d.page&&d.page.length>0)for(c=0;c<d.page.length;c+=1)e=d.page[c],void 0===fc.pages[e._id.$id]&&(fc.pages[e._id.$id]={stage:d,page:e});return fc.pages[a]?fc.pages[a]:void 0},saveOriginalGroupletValue=function(a,b){var c,d,e;a.indexOf(fc.constants.prefixSeparator)>-1&&(c=a.split(fc.constants.prefixSeparator),c.length>1&&(d=c[c.length-2],e=c[c.length-1],void 0===fc.fields[d]&&(fc.fields[d]={}),fc.fields[d][e]=b))},toBooleanLogic=function(a){var b,c,d,e,f,g="",h="";if(a){if("string"==typeof a)return a.isJson()?toBooleanLogic($.parseJSON(a)):a;if(void 0!==a.condition&&(h="and"===a.condition.toLowerCase()?" && ":" || "),"object"==typeof a.rules){for(g+="(",b=0;b<a.rules.length;b+=1){if(c=a.rules[b],f=void 0!==c.condition?"and"===c.condition.toLowerCase()?" && ":" || ":h,0===f&&(f=" && "),0===b&&(f=""),"string"==typeof c.field&&void 0!==c.value){if(d="fc.comparison","string"==typeof c.operator&&c.operator.length>0&&(d+=c.operator.charAt(0).toUpperCase()+c.operator.slice(1)),"string"==typeof c.value&&["[","{"].indexOf(c.value.substring(0,1))>-1)try{e=$.parseJSON(c.value),c.value=e}catch(i){}"object"==typeof c.value?c.value=JSON.stringify(c.value):"string"==typeof c.value&&(c.value='"'+c.value+'"'),g+=f+d+'(getValue("'+c.field+'"), '+c.value+', "'+c.field+'")'}"object"==typeof c.rules&&c.rules.length>0&&(g+=(b>0?h:"")+toBooleanLogic(c))}g+=")"}return g}},updateFieldSchemas=function(a){var b,c,d,e,f,g=["visibility","validators"],h=["visibility"];for(b=0;b<a.length;b+=1){if(c=a[b],d=getId(c),void 0===fc.fieldSchema[d]){for(e=0;e<g.length;e+=1)void 0!==c.config[g[e]]&&c.config[g[e]].length>0&&(c.config[g[e]]=$.parseJSON(c.config[g[e]]),h.indexOf(g[e])>=0&&(c.config[g[e]]=toBooleanLogic(c.config[g[e]],!0)));fc.fieldSchema[d]=c}"grouplet"===c.type&&(f=getConfig(c,"grouplet",{field:[]}),updateFieldSchemas(f.field))}},initAnalytics=function(){$(fc.jQueryContainer).on(fc.jsEvents.onAnalyticsLoaded,function(){fc.analytics=fcAnalytics,fc.analytics.init()}),loadJsFile(analyticsUrl())},updateFieldSchema=function(a){var b,c,d,e,f,g,h,i=["visibility","validators"],j=["visibility"];if(void 0!==a.page)for(b=0;b<a.page.length;b+=1)if(e=a.page[b],void 0!==e.section){if("object"==typeof e.toCondition&&Object.keys(e.toCondition).length>0)for(d in e.toCondition)if(e.toCondition.hasOwnProperty(d))try{e.toCondition[d]=toBooleanLogic($.parseJSON(e.toCondition[d]))}catch(k){}for(c=0;c<e.section.length;c+=1)if(g=e.section[c],void 0!==g.field&&0!==g.field.length){for(h=0;h<i.length;h+=1)if(f=i[h],"string"==typeof g[f])try{g[f]=$.parseJSON(g[f])}catch(k){}for(h=0;h<j.length;h+=1)"object"==typeof g[j[h]]&&(g[j[h]]=toBooleanLogic(g[j[h]]));void 0===fc.sections[getId(g)]&&(fc.sections[getId(g)]=g),updateFieldSchemas(g.field)}}},getGroupletTags=function(a){var b,c,d,e,f=fc.fieldSchema[a],g={};if(void 0===f||"grouplet"!==f.type)return[];if(b=getConfig(f,"grouplet"),"object"==typeof b&&void 0!==b.field&&b.field.length>0)for(c=0;c<b.field.length;c+=1)d=b.field[c],e=getConfig(d,"tag",""),e.length>0&&(g[d._id.$id]=e);return g},getGroupletRowTags=function(a,b){var c,d,e,f={};if("object"==typeof a)for(c in a)a.hasOwnProperty(c)&&(c.indexOf(fc.constants.prefixSeparator)>-1?(d=c.split(fc.constants.prefixSeparator),e=d[d.length-1]):e=c,b.hasOwnProperty(e)?f[b[e]]=a[c]:f[e]=a[c]);return f},scrollToOffset=function(a){(void 0===fc.midScroll||fc.midScroll!==!0)&&(fc.midScroll=!0,$("html,body").animate({scrollTop:a+"px"},fc.config.scrollDuration,function(){fc.midScroll=!1,fc.activeScroll=""}))},replaceTokens=function(a,b){var c,d,e,f,g=a.match(/\{\{([^\}]{0,})\}\}/g);if($.isArray(g)&&0!==g.length){for(e=0;e<g.length;e+=1)c=g[e],d=c.replace(/[\{\}]/g,""),f=new RegExp("\\{\\{"+d+"\\}\\}","gi"),a=b.hasOwnProperty(d)?a.replace(f,b[d]):a.replace(f,"");return a}},replaceTokensInDom=function(a,b){return(void 0===b||b===!1)&&(b=getFieldTagValues()),void 0===a&&(a=$(fc.jQueryContainer)),a.find("span.fc-token").each(function(){var a=$(this).attr("data-token");a&&a.length>0&&void 0!==b[a]&&$(this).html(htmlEncode(b[a]))}),a},groupletLength=function(a){var b=fc.fields[a];return $.isArray(b)?b.length:0},isFormula=function(a){var b=fc.constants.formulaPrefix.length;return a.length>b&&a.substr(0,b).toLowerCase()===fc.constants.formulaPrefix.toLowerCase()},fieldIdByTag=function(a){var b=getFieldTags();return Object.keys(b).filter(function(c){return b[c]===a})[0]},getContentRadioListMeta=function(a,b){var c,d,e,f,g=getValue(a,""),h=fc.fieldSchema[a],i=getConfig(h,"options","").split("\n");if(void 0===g||""===g)return"";if($.isArray(i))for(c=0;c<i.length;c+=1)if(i[c].isJson()&&(d=$.parseJSON(i[c]),f=d[0],"string"==typeof f&&f===g&&"object"==typeof d[5]&&(e=d[5],void 0!==e[b])))return e[b]},formulaToPrice=function(a){isFormula(a)&&(a=a.substr(fc.constants.formulaPrefix.length));try{return fc.parser.parse(a).evaluate()}catch(b){return 0}},getPaymentAmount=function(fieldId){var schema,price,conditionalPrices,booleanLogic,conditionalPrice,iterator;if(schema=fc.fieldSchema[fieldId],void 0!==schema){if(price=getConfig(schema,"defaultPrice",0),conditionalPrices=getConfig(schema,"conditionalPrice",[],!0),"object"==typeof conditionalPrices&&conditionalPrices.length>0)for(iterator=0;iterator<conditionalPrices.length;iterator+=1)conditionalPrice=conditionalPrices[iterator],"object"==typeof conditionalPrice.conditions&&(booleanLogic=toBooleanLogic(conditionalPrice.conditions),eval(booleanLogic)&&(price=conditionalPrice.price));return $.isNumeric(price)?price:isFormula(price)?formulaToPrice(price):price}},renderRepeatableTable=function(a,b){var c,d="",e=getGroupletTags(a),f=fc.fieldSchema[a],g=getConfig(f,fc.constants.configKeys.summaryLayout,"");if(0===g.length)return"";for(d+="<div class='fc-summary-table'>",d+="<table class='fc-summary'><tbody>",c=0;c<b.length;c+=1)d+="<tr><td>",d+=replaceTokens(g,getGroupletRowTags(b[c],e)),d+="<div class='fc-summary-options' data-field-id='"+a+"' data-index='"+c+"'><a href='#' class='fc-edit'>"+fc.lang.edit+"</a> &nbsp; <a href='#' class='fc-delete'>"+fc.lang["delete"]+"</a></div>",d+="</td></tr>";return d+="</tbody></table>",d+="</div>"},fieldIsRepeatable=function(a){var b=fc.fieldSchema[a];return b&&"boolean"==typeof b.config.repeatable&&b.config.repeatable},fieldParentIsRepeatable=function(a){var b,c;return b=a.split(fc.constants.prefixSeparator),b.pop(),0===b.length?!1:(c=b.join(fc.constants.prefixSeparator),fc.fieldSchema[c]?fieldIsRepeatable(c):!1)},setRangeValue=function(a){var b=parseInt(a.val()),c=a.parent().find(".fc-numeric-outcome");c.length>0&&c.html(b)},setDomValue=function(a,b){var c,d=$(a).find(".fc-fieldgroup"),e=d.find("input[type=text],textarea,input[type=range]");e.length>0?(e.val(b),"range"===e.attr("type")&&setRangeValue(e)):d.find("select").length>0?d.find("select").val(b):d.find("input[type=radio]").length>0?d.find('input[value="'+b+'"]').prop("checked",!0):(c=d.find('.fc-fieldinput.fc-button[data-value="'+encodeURIComponent(b)+'"]'),c.length>0&&c.addClass("checked"))},setFieldValue=function(a,b){var c,d,e,f,g=fc.fieldSchema[b],h=["emailVerification","smsVerification"];if(c=fc.fields[b],void 0===c&&void 0!==g&&(f=getConfig(g,"default",""),f.length>0&&(c=f)),void 0!==c){if(g=fc.fieldSchema[b],h.indexOf(g.type)>=0)return;if(getConfig(g,"readOnly",!1)&&(c=getConfig(g,"defaultValue","")),"grouplet"!==g.type||fieldIsRepeatable(b))if(fieldIsRepeatable(b))getConfig(g,"renderRepeatableTable",!1)&&"object"==typeof c&&$('[fc-data-group="'+b+'"] .fc-summary').html(renderRepeatableTable(b,c));else if("contentRadioList"===g.type)if("object"==typeof c)for(d=0;d<c.length;d+=1)e=$('.fc-button[data-field-value="'+encodeURIComponent(c[d])+'"]'),e&&e.length>0&&e.addClass("checked");else e=$('.fc-button[data-field-value="'+encodeURIComponent(c)+'"]'),e&&e.length>0&&e.addClass("checked");else setDomValue(a,c);else console.log("restore grouplet that isnt repeatable")}},setFieldValues=function(a){var b;void 0===a&&(a=$(fc.jQueryContainer)),a.find("div[fc-data-group]").each(function(){b=$(this).attr("fc-data-group"),setFieldValue(this,b)})},renderTextfield=function(a,b){void 0===b&&(b="");var c="boolean"==typeof a.config.required?a.config.required:!1,d=b+a._id.$id,e='<input class="fc-fieldinput" type="text" formcorp-data-id="'+d+'" data-required="'+c+'" placeholder="'+getConfig(a,"placeholder")+'">';return e},renderDropdown=function(a,b){void 0===b&&(b="");var c,d,e,f="boolean"==typeof a.config.required?a.config.required:!1,g=b+a._id.$id,h='<select class="fc-fieldinput" formcorp-data-id="'+g+'" data-required="'+f+'">',i=getConfig(a,"options",""),j=!1;if(getConfig(a,"placeholder","").length>0&&(h+='<option value="" disabled selected>'+htmlEncode(getConfig(a,"placeholder"))+"</option>"),i.length>0){for(i=i.split("\n"),c=0;c<i.length;c+=1)d=i[c],d=d.replace(/(\r\n|\n|\r)/gm,""),d.match(/^\[\[(.*?)\]\]$/g)?(j&&(h+="</optgroup>"),e=d.substring(2,d.length-2),h+='<optgroup label="'+e+'">'):h+='<option value="'+htmlEncode(d)+'">'+htmlEncode(d)+"</option>";j&&(h+="</optgroup>")}return h+="</select>"},renderTextarea=function(a,b){void 0===b&&(b="");var c,d,e="boolean"==typeof a.config.required?a.config.required:!1,f=b+getId(a);return d=getConfig(a,"defaultValue","").length>0?getConfig(a,"defaultValue"):"",c="<textarea",getConfig(a,"readOnly",!1)&&(c+=" readonly"),c+=' class="fc-fieldinput" formcorp-data-id="'+f+'" data-required="'+e+'" placeholder="'+getConfig(a,"placeholder")+'" rows="'+getConfig(a,"rows",3)+'">'+htmlEncode(d)+"</textarea>"},renderContentRadioList=function(a,b){b||(b="");var c,d,e,f,g,h,i,j,k,l,m,n="boolean"==typeof a.config.required?a.config.required:!1,o=getConfig(a,"options",""),p=b+getId(a),q="";if(o.length>0){for(o=o.split("\n"),d=getConfig(a,"inline",!1)===!0?"fc-inline":"fc-block",q+='<div class="fc-col-'+htmlEncode(getConfig(a,"boxesPerRow"))+'">',c=0;c<o.length;c+=1)if(e=o[c].replace(/(\r\n|\n|\r)/gm,""),0!==e.length){i="",j="",h="",k="",l="",m={};try{g=$.parseJSON(e)}catch(r){continue}try{h=g[0]||"",i=g[1]||"",k=g[2]||"",j=g[3]||"",l=g[4]||"",m=g[5]||{},"object"!=typeof m&&(m={})}catch(r){}f=getConfig(a,"default")===e?" checked":"",q+='<div class="fc-content-radio-item fc-col '+l+'">',q+='<div class="fc-content-title">'+htmlEncode(h)+"</div>",q+='<div class="fc-content-content">',q+='<div class="fc-content-desc">'+i+"</div>",q+='<div class="fc-content-icon"><i class="'+htmlEncode(k)+'"></i></div>',q+='<div class="fc-option-buttons '+d+'">',q+='<button class="fc-fieldinput fc-button" id="'+getId(a)+"_"+c+'" formcorp-data-id="'+p+'" data-value="'+encodeURIComponent(e)+'" data-field-value="'+encodeURIComponent(h)+'" data-required="'+n+'"'+f+">"+htmlEncode(getConfig(a,"buttonText"))+"</button>",!fc.config.helpAsModal&&j&&j.length>0&&(q+='<div class="fc-help">',q+=j,q+="</div>"),q+="</div>",q+="</div>",q+="</div>"}q+='<div class="fc-clear"></div>',q+="</div>"}return q},renderOptionTable=function(a,b){var c,d,e,f,g,h="boolean"==typeof a.config.required?a.config.required:!1,i=getConfig(a,"jsonOptions","[]"),j=b+a._id.$id,k="";if("string"==typeof i&&(i=$.parseJSON(i)),!i||!i.rows)return"";for(k+='<table class="fc-table"',i.cellspacing&&(k+=' cellspacing="'+htmlEncode(i.cellspacing)+'"'),i.cellpadding&&(k+=' cellpadding="'+htmlEncode(i.cellpadding)+'"'),k+=">",d=0;d<i.rows.length;d+=1){if(f=i.rows[d],k+="<tr>","object"==typeof f&&f.length>0)for(e=0;e<f.length;e+=1)g=f[e],k+=g.head?"<th":"<td",g["class"]&&g["class"].length>0&&(k+=' class="'+htmlEncode(g["class"])+'"'),g.colspan&&(k+='colspan="'+htmlEncode(g.colspan)+'"'),k+=">",g.label&&(k+='<span class="fc-table-label">'+g.label+"</span>"),g.option&&(c=getConfig(a,"default")===g.option.value?" checked":"",k+='<div class="fc-option-buttons">',k+='<button class="fc-fieldinput fc-button" id="'+getId(a)+"_"+d+"_"+e+'" formcorp-data-id="'+j+'" data-value="'+encodeURIComponent(g.option.value)+'" data-field-value="'+encodeURIComponent(g.option.value)+'" data-required="'+h+'"'+c+">"+htmlEncode(g.option.text)+"</button>",k+="</div>"),k+=g.head?"</th>":"</td>";k+="</tr>"}return k+="</table>"},renderRadioList=function(a,b){void 0===b&&(b="");var c,d,e,f,g,h="boolean"==typeof a.config.required?a.config.required:!1,i=getConfig(a,"options",""),j=b+a._id.$id,k="";if(i.length>0)if(i=i.split("\n"),d=getConfig(a,"inline",!1)===!0?"fc-inline":"fc-block",getConfig(a,"asButton",!1)){for(k+='<div class="fc-radio-option-buttons">',c=0;c<i.length;c+=1)e=i[c].replace(/(\r\n|\n|\r)/gm,""),g=getConfig(a,"default")===e?" checked":"",k+='<div class="fc-option-buttons '+d+'">',k+='<button class="fc-fieldinput fc-button" id="'+getId(a)+"_"+c+'" formcorp-data-id="'+j+'" data-value="'+encodeURIComponent(e)+'" data-required="'+h+'"'+g+">"+htmlEncode(e)+"</button>",k+="</div>";k+="</div>"}else for(c=0;c<i.length;c+=1)e=i[c].replace(/(\r\n|\n|\r)/gm,""),f=b+getId(a)+"_"+c,g=getConfig(a,"default")===e?" checked":"",k+='<div class="'+d+'">',k+='<input class="fc-fieldinput" type="radio" id="'+f+'" formcorp-data-id="'+j+'" name="'+j+'" value="'+htmlEncode(e)+'" data-required="'+h+'"'+g+">",k+='<label for="'+f+'"><span><i>&nbsp;</i></span><em>'+htmlEncode(e)+'</em><span class="fc-end-radio-item"></span></label>',k+="</div>";return k},renderCheckboxList=function(a,b){void 0===b&&(b="");var c,d,e,f,g,h="boolean"==typeof a.config.required?a.config.required:!1,i=getConfig(a,"options",""),j=b+a._id.$id,k="",l=[];if(void 0!==fc.fields[j]&&"string"==typeof fc.fields[j])try{g=$.parseJSON(fc.fields[j]),l=g}catch(m){}else"object"==typeof fc.fields[j]&&(l=fc.fields[j]);if(i.length>0)for(i=i.split("\n"),c=getConfig(a,"inline",!1)===!0?"fc-inline":"fc-block",d=0;d<i.length;d+=1)e=i[d].replace(/(\r\n|\n|\r)/gm,""),f=b+getId(a)+"_"+d,k+='<div class="'+c+'">',k+='<input class="fc-fieldinput" type="checkbox" id="'+f+'" formcorp-data-id="'+j+'" name="'+j+'[]" value="'+htmlEncode(e)+'" data-required="'+h+'"',l.indexOf(e)>-1&&(k+=' checked="checked"'),k+=">",k+='<label for="'+f+'">',k+="<span><b><i></i><i></i></b></span><em>"+htmlEncode(e)+"</em>",k+='<span class="fc-end-checkbox-item"></span>',k+="</label>",k+="</div>";return k},renderHiddenField=function(a,b){void 0===b&&(b="");var c=b+a._id.$id,d='<input class="fc-fieldinput" type="hidden" formcorp-data-id="'+c+'" value="'+getConfig(a,"value")+'">';return d},renderRichText=function(a){return"string"!=typeof a.config.rich?"":'<div class="fc-richtext">'+a.config.rich+"</div>"},createDynamicFormFromData=function(a,b,c){var d,e,f,g,h;if(g=fc.fieldSchema[a],void 0!==g){h=getConfig(g,"environment",fc.environments.sandbox)===fc.environments.sandbox?b.action.sandbox:b.action.live,d=$(document.createElement("form")),$(d).attr("action",h),$(d).attr("method",b.method);for(f in c)c.hasOwnProperty(f)&&(e=$("<input>").attr("type","hidden").attr("name",f).val(c[f]),$(d).append($(e)));return $(d)}},forceUpdateFieldValue=function(a,b){fc.fields[a]=b,fc.saveQueue[a]=b},initPaycorpGateway=function(a,b){var c,d,e,f,g;switch((void 0===b.vars||"string"!=typeof b.vars.clientId||0===b.vars.clientId.length)&&console.log("Malformed paycorp client id"),e=a.find(".fc-cc-expirydate-month").val(),1===e.length&&(e="0"+e),g=a.find(".fc-cc-number input").val().replace(/[^0-9]+/g,""),getCreditCardType(g)){case fc.cardTypes.mastercard:f="MASTERCARD";break;case fc.cardTypes.visa:f="VISA";break;case fc.cardTypes.amex:f="AMEX";break;default:f="MASTERCARD"}return c={clientIdHash:b.vars.clientId,cardType:f,cardHolderName:a.find(".fc-cc-name input").val(),cardNo:g,cardExpiryMM:e,cardExpiryYYYY:a.find(".fc-cc-expirydate-year").val(),cardSecureId:a.find(".fc-cc-ccv input").val().replace(/[^0-9]+/g,""),paymentAmount:getPaymentAmount(a.attr("fc-data-group")),metaData1:a.attr("fc-data-group"),metaData2:fc.sessionId},d=createDynamicFormFromData(a.attr("fc-data-group"),fc.gateways.paycorp,c),d.submit(),!1},registerCreditCardListeners=function(){$(fc.jQueryContainer).on("click",".fc-submit-payment .fc-btn",function(){
var a,b,c,d,e;if(a=$(this).attr("data-for"),void 0===a)return!1;if(b=$('[fc-data-group="'+a+'"]'),0===b.length)return!1;if(d=fc.fieldSchema[a],void 0===d)return!1;if(e=validCreditCardField(a,d,b.parent()),e.length>0)return logEvent(fc.eventTypes.onFieldError,{fieldId:a,errors:e}),removeFieldSuccess(a),showFieldError(a,e),!1;if(showFieldSuccess(a),removeFieldError(a),removeFieldError(a),c=getConfig(d,"paymentGateway",{},!0),"string"!=typeof c.gateway)return!1;switch(c.gateway){case"paycorp":initPaycorpGateway(b,c);break;default:console.log("No gateway to use")}return!1}),fc.processedActions[fc.processes.creditCardListeners]=!0},renderPaymentSummary=function(a){var b,c;return c=parseFloat(getPaymentAmount(getId(a))).toFixed(2),b="<div class='fc-table-summary'>",getConfig(a,"paymentSummaryTitle","").length>0&&(b+="<label>"+htmlEncode(getConfig(a,"paymentSummaryTitle",""))+"</label>"),getConfig(a,"paymentSummaryDescription","").length>0&&(b+="<label>"+getConfig(a,"paymentSummaryDescription","")+"</label>"),b+='<table class="fc-table fc-summary"><thead><tr>',b+="<th>"+fc.lang.description+'</th><th class="fc-total">'+fc.lang.total+"</th></tr></thead>",b+="<tbody>",getConfig(a,"includeGST",!1)?(b+="<tr><td>"+fc.lang.paymentDescription+'<em class="fc-text-right fc-right">'+fc.lang.paymentSubTotal+"</em>",b+="</td><td>",b+=fc.lang.currencySymbol.concat(parseFloat(c/11*10).toFixed(2)),b+="</td></tr>",b+='<tr><td class="fc-text-right"><em>'+fc.lang.paymentGst+"</em></td><td>",b+=fc.lang.currencySymbol.concat(parseFloat(c/11).toFixed(2))+"</td></tr>",b+='<tr><td class="fc-text-right"><em>'+fc.lang.paymentTotal+"</em></td><td>"+fc.lang.currencySymbol.concat(c)+"</td></tr>"):(b+="<tr><td>"+fc.lang.paymentDescription+'<em class="fc-text-right fc-right">'+fc.lang.paymentTotal+"</em>",b+="</td><td>",b+=fc.lang.currencySymbol.concat(c),b+="</td></tr>"),b+="</tbody>",b+="</table>",b+="</div>"},renderCreditCard=function(a){var b,c,d,e,f="",g=(new Date).getFullYear();if(getConfig(a,"showPaymentSummary",!1)&&(f+=renderPaymentSummary(a)),f+='<div class="fc-creditCard-header">',getConfig(a,"showLabel",!1)===!0&&getConfig(a,"label","").length>0&&(f+="<label>"+htmlEncode(getConfig(a,"label")),fc.config.asterisksOnLabels&&getConfig(a,"required",!1)&&(f+='<span class="fc-required-caret">'+fc.lang.requiredAsterisk+"</span>"),fc.config.colonAfterLabel&&(f+=fc.lang.labelColon),f+="</label>"),getConfig(a,"label","").length>0&&(f+=getConfig(a,"description")),f+="</div>",d=fc.fields[getId(a)],void 0!==d&&1==d.success)return f+=renderCompletedPayment(d);if(e=fc.getUrlParameter(fc.config.creditCardErrorUrlParam),void 0!==e&&e.length>0&&(f+='<div class="fc-error"><label>'+htmlEncode(e)+"</label></div>"),processed(fc.processes.creditCardListeners)||registerCreditCardListeners(),"securepay"===getConfig(a,"paymentGateway","",!0).gateway)return renderSecurePayIFrame(a),f+='<div class="fc-securepay-iframe"></div>';for(f+='<div class="fc-payment">',f+='<div class="fc-cc-name"><label>'+fc.lang.creditCardNameText+'</label><input type="text" class="fc-fieldinput"></div>',f+='<div class="fc-cc-number"><label>'+fc.lang.creditCardNumberText+'</label><input type="text" class="fc-fieldinput"></div>',f+='<div class="fc-cc-expirydate"><label>'+fc.lang.creditCardExpiryDateText+"</label>",f+='<select class="fc-cc-expirydate-month"><option value="" disabled selected>Please select...</option>',b=1;12>=b;b+=1)f+='<option value="'+b+'">'+fc.lang.monthNames[b-1]+"</option>";for(f+="</select>",f+='<select class="fc-cc-expirydate-year"><option value="" disabled selected>Please select...</option>',c=g;g+20>=c;c+=1)f+='<option value="'+c+'">'+c+"</option>";return f+="</select></div>",f+='<div class="fc-cc-ccv">',f+="<label>"+fc.lang.creditCardSecurityCodeText+'</label><input type="text" class="fc-fieldinput">',null===fc.config.cvvImage&&(f+='<img src="'+cdnUrl()+'/img/cvv.gif" alt="cvv">'),f+="</div>",f+='<div class="fc-submit-payment">',f+='<input class="fc-btn" data-for="'+getId(a)+'" type="submit" value="'+fc.lang.payNow+'"><div class="fc-loading fc-hide"></div>',f+="</div>",f+="</div>"},renderSecurePayIFrame=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p="";n=getConfig(a,"defaultPrice"),isFormula(n)&&(b=formulaToPrice(n)),c=getConfig(a,"paymentGateway","",!0).vars.currency,""===c&&(c="AUD"),d=getConfig(a,"paymentGateway","",!0).vars.display_receipt,""===d&&(d="yes"),e=getConfig(a,"paymentGateway","",!0).vars.return_url,f=getConfig(a,"paymentGateway","",!0).vars.return_url_text,g=getConfig(a,"paymentGateway","",!0).vars.return_url_target,""===g&&(g="self"),h=getConfig(a,"paymentGateway","",!0).vars.confirmation,""===h&&(h="yes"),i=getConfig(a,"paymentGateway","",!0).vars.template,""===i&&(i="iframe"),j=getConfig(a,"paymentGateway","",!0).vars.page_header_image,k=getConfig(a,"paymentGateway","",!0).vars.page_title,l=getConfig(a,"paymentGateway","",!0).vars.page_style_url,m=getConfig(a,"paymentGateway","",!0).vars.display_cardholder_name,""===m&&(m="yes"),o=getConfig(a,"environment",fc.environments.sandbox)===fc.environments.sandbox?fc.gateways.securepay.action.sandbox:fc.gateways.securepay.action.live,api("securepay/default/index",{field_id:a._id.$id},fc.gateways.securepay.method,function(a){p+='<iframe scrolling="no" frameborder="0" style="width: 100%;height: 500px" src="',p+=o,p+="&merchant_id="+a.merchant_id,p+="&fingerprint="+a.fingerprint,p+="&fp_timestamp="+a.timestamp,p+="&primary_ref="+a.primary_ref,p+="&amount="+a.amount,p+="&txn_type="+a.txn_type,p+="&currency="+c,p+="&display_receipt="+d,p+="&return_url="+e,p+="&return_url_text="+f,p+="&return_url_target="+g,p+="&confirmation="+h,p+="&template="+i,p+="&page_header_image="+j,p+="&page_title="+k,p+="&page_style_url="+l,p+="&display_cardholder_name="+m,p+='"></iframe>',$('.fc-section [fc-data-group="'+a.fieldId+'"] .fc-securepay-iframe').append(p),waitForSecurePayVerification(a.fieldId)})},waitForSecurePayVerification=function(a){api("securepay/default/verify",{fieldId:a},"POST",function(b){return"object"==typeof b&&void 0!==b.success&&b.success===!0?(fc.fields[a]=b,$('[fc-data-group="'+a+'"] .fc-securepay-iframe iframe').remove(),$('[fc-data-group="'+a+'"] .fc-securepay-iframe').append(renderCompletedPayment(b)),fc.nextPageButtonClicked=!0,void loadNextPage(!1)):void setTimeout(function(){waitForSecurePayVerification(a)},5e3)})},renderCompletedPayment=function(a){var b="";return b+='<div class="fc-payment">',b+='<div class="fc-success">'+fc.lang.creditCardSuccess+"</div>",b+="</div>"},renderAbnField=function(a,b){void 0===b&&(b="");var c="boolean"==typeof a.config.required?a.config.required:!1,d=b+a._id.$id,e="fc-button",f='<input class="fc-fieldinput" type="text" formcorp-data-id="'+d+'" data-required="'+c+'" placeholder="'+getConfig(a,"placeholder")+'">';return fc.fields[d]&&fc.fields[d].length>0&&fc.validAbns.indexOf(fc.fields[d])>-1&&(e+=" fc-hide"),f+='<a class="'+e+'">'+fc.lang.validate+"</a>",f+='<div class="fc-loading fc-hide"></div>'},hideModal=function(){fc.activeModalField=null,fc.modalState=null,fc.modalMeta={},$(".fc-modal.fc-show").removeClass("fc-show")},verifyCode=function(a){var b,c;return b=fc.fieldSchema[fc.modalMeta.fieldId],void 0===b?!1:(c={fieldId:fc.modalMeta.fieldId,code:a},$(".fc-modal .modal-footer .fc-loading").removeClass("fc-hide"),$(".fc-modal .modal-footer .fc-error").html("").addClass("fc-hide"),void api("verification/verify",c,"POST",function(a){"object"!=typeof a||void 0===a.success?$(".fc-modal .modal-footer .fc-error").html("An unknown error occurred communicating with the API server").removeClass("fc-hide"):a.success||"string"!=typeof a.message?a.success&&($('[fc-data-group="'+fc.modalMeta.fieldId+'"]').addClass("fc-verified"),fc.fields[fc.modalMeta.fieldId]="1",valueChanged(fc.modalMeta.fieldId,"1",!0),hideModal()):$(".fc-modal .modal-footer .fc-error").html(a.message).removeClass("fc-hide"),$(".fc-modal .modal-footer .fc-loading").addClass("fc-hide")}))},verifyEmailAddress=function(){verifyCode($(".fc-email-verification-submit input[type=text]").val())},showEmailVerificationModal=function(a){fc.modalState=fc.states.EMAIL_VERIFICATION_CODE,fc.modalMeta={fieldId:a};var b="<p>To verify your email, input the code sent to your e-mail address in the area below, and click the 'Verify email' button.</p>";return b+='<div class="fc-email-verification-submit"><input class="fc-fieldinput" type="text" placeholder="Enter verification code..."></div>',$(".fc-modal .modal-header h2").text("Success!"),$(".fc-modal .modal-body").html(b),$(".fc-modal .modal-footer .fc-btn-add").text("Verify").show(),$(".fc-modal").addClass("fc-show"),!1},waitForVerification=function(a){api("verification/is-verified",{fieldId:a},"POST",function(b){return"object"==typeof b&&void 0!==b.success&&b.success===!0?($('[fc-data-group="'+a+'"]').addClass("fc-verified"),fc.fields[a]="1",void hideModal()):void setTimeout(function(){waitForVerification(a)},5e3)})},setValue=function(a,b,c){if("boolean"!=typeof c&&(c=!0),forceUpdateFieldValue(a,b),c){var d=$(fc.jQueryContainer).find('div[fc-data-group="'+a+'"]');d.length>0&&setDomValue(d,b)}valueChanged(a,b,!0)},registerEmailVerificationListeners=function(){$(fc.jQueryContainer).on("click",".fc-email-verification .fc-send-email input[type=submit]",function(){var a,b,c=$(this).parent();return c.find(".fc-loading").removeClass("fc-hide"),c.parent().addClass("loading"),b=c.parent().attr("fc-belongs-to"),a={field:b},api("verification/callback",a,"POST",function(a){c.find(".fc-loading").addClass("fc-hide"),c.parent().removeClass("loading"),"object"==typeof a&&void 0!==a.success&&a.success&&(showEmailVerificationModal(b),waitForVerification(b))}),!1}),$(fc.jQueryContainer).on("click",".fc-email-verification.fc-verify-inline .fc-email-verification-verify",function(){var a,b=$(this),c=b.parent().parent(),d=c.attr("fc-belongs-to"),e=c.find('input[type="text"]'),f=e.val();return 0===f.length?(c.addClass("error"),void e.attr("placeholder",fc.lang.verificationErrorPrefix+fc.lang.verificationEmptyCode)):(a={fieldId:d,code:f},c.removeClass("error").addClass("loading"),e.attr("placeholder",""),void api("verification/verify",a,"POST",function(a){var b=a.message||"";c.removeClass("loading"),e.val("").attr("placeholder",fc.lang.verificationErrorPrefix+b),"object"!=typeof a||void 0===a.success?c.addClass("error"):a.success||"string"!=typeof a.message?a.success&&($('[fc-data-group="'+d+'"]').addClass("fc-verified"),fc.fields[d]="1",valueChanged(d,"1",!0)):c.addClass("error"),$(".fc-modal .modal-footer .fc-loading").addClass("fc-hide")}))}),$(fc.jQueryContainer).on("click",".fc-email-verification-modal",function(){var a=$(this).attr("data-for");return showEmailVerificationModal(a),!1}),fc.processedActions[fc.processes.emailListeners]=!0},renderEmailVerification=function(a){processed(fc.processes.emailListeners)||registerEmailVerificationListeners();var b,c="",d=fc.fields[getId(a)],e=void 0!==d&&"1"===d,f=getConfig(a,"sendButtonText",""),g=getConfig(a,"verificationButtonText","");return 0===f.length&&(f=fc.lang.sendEmail),e||(b=getConfig(a,"renderAsModal",!0)?"fc-verify-as-modal":"fc-verify-inline",c+='<div class="fc-email-verification '+b+'" fc-belongs-to="'+getId(a)+'">',getConfig(a,"renderAsModal",!0)&&g.length>0?c+='<div class="fc-verify-email"><input class="fc-btn fc-email-verification-modal" data-for="'+getId(a)+'" type="submit" value="'+g+'"></div>':(c+='<div class="fc-verify-email-input-code"><input type="text" class="fc-verify-email-input fc-fieldinput" value=""></div>',c+='<div class="fc-verify-email-button"><input class="fc-btn fc-email-verification-verify" data-for="'+getId(a)+'" type="submit" value="'+fc.lang.verify+'"></div>'),c+='<div class="fc-send-email">',c+='<input class="fc-btn" type="submit" value="'+f+'"><div class="fc-loading fc-hide"></div>',c+="</div>",c+='<div class="fc-clear"></div>',c+="</div>"),c+='<div class="fc-success'+(e?" fc-force-show":"")+'">',c+=fc.lang.fieldValidated,c+="</div>",!e&&void 0===d&&getConfig(a,"autoDeliverOnFirstRender",!1)&&api("verification/callback",{field:getId(a)},"POST",function(b){"object"==typeof b&&void 0!==b.success&&b.success&&(getConfig(a,"autoShowModalDialog",!1)&&showEmailVerificationModal(getId(a)),waitForVerification(getId(a)),forceUpdateFieldValue(getId(a),"0"))}),c},verifyMobileNumber=function(){verifyCode($(".fc-sms-verification-submit input[type=text]").val())},showSmsVerificationModal=function(a){fc.modalState=fc.states.SMS_VERIFICATION_CODE,fc.modalMeta={fieldId:a};var b="<p>To verify your mobile, input the code sent to you via SMS in the area below, and click the 'Verify mobile' button.</p>";return b+='<div class="fc-sms-verification-submit"><input class="fc-fieldinput" type="text" placeholder="Enter verification code..."></div>',$(".fc-modal .modal-header h2").text("Success!"),$(".fc-modal .modal-body").html(b),$(".fc-modal .modal-footer .fc-btn-add").text("Verify").show(),$(".fc-modal").addClass("fc-show"),!1},registerSmsVerificationListeners=function(){$(fc.jQueryContainer).on("click",".fc-sms-verification .fc-send-sms input[type=submit]",function(){var a,b,c=$(this).parent();return c.find(".fc-loading").removeClass("fc-hide"),c.parent().addClass("loading"),b=c.parent().attr("fc-belongs-to"),a={field:b},api("verification/callback",a,"POST",function(a){c.find(".fc-loading").addClass("fc-hide"),c.parent().removeClass("loading"),"object"==typeof a&&void 0!==a.success&&a.success&&(showSmsVerificationModal(b),waitForVerification(b))}),!1}),$(fc.jQueryContainer).on("click",".fc-sms-verification.fc-verify-inline .fc-sms-verification-verify",function(){var a,b=$(this),c=b.parent().parent(),d=c.attr("fc-belongs-to"),e=c.find('input[type="text"]'),f=e.val();return 0===f.length?(c.addClass("error"),void e.attr("placeholder",fc.lang.verificationErrorPrefix+fc.lang.verificationEmptyCode)):(a={fieldId:d,code:f},c.removeClass("error").addClass("loading"),e.attr("placeholder",""),void api("verification/verify",a,"POST",function(a){var b=a.message||"";c.removeClass("loading"),e.val("").attr("placeholder",fc.lang.verificationErrorPrefix+b),"object"!=typeof a||void 0===a.success?c.addClass("error"):a.success||"string"!=typeof a.message?a.success&&($('[fc-data-group="'+d+'"]').addClass("fc-verified"),fc.fields[d]="1",valueChanged(d,"1",!0)):c.addClass("error"),$(".fc-modal .modal-footer .fc-loading").addClass("fc-hide")}))}),$(fc.jQueryContainer).on("click",".fc-sms-verification-modal",function(){var a=$(this).attr("data-for");return showSmsVerificationModal(a),!1}),fc.processedActions[fc.processes.emailListeners]=!0},renderSmsVerification=function(a){processed(fc.processes.smsListeners)||registerSmsVerificationListeners();var b="",c=fc.fields[getId(a)],d=void 0!==c&&"1"===c,e=getConfig(a,"renderAsModal",!0)?"fc-verify-as-modal":"fc-verify-inline";return d||(b+='<div class="fc-sms-verification '+e+'" fc-belongs-to="'+getId(a)+'">',getConfig(a,"renderAsModal",!0)&&verificationButtonText.length>0?b+='<div class="fc-verify-sms"><input class="fc-btn fc-sms-verification-modal" data-for="'+getId(a)+'" type="submit" value="'+verificationButtonText+'"></div>':(b+='<div class="fc-verify-sms-input-code"><input type="text" class="fc-verify-sms-input fc-fieldinput" value=""></div>',b+='<div class="fc-verify-sms-button"><input class="fc-btn fc-sms-verification-verify" data-for="'+getId(a)+'" type="submit" value="'+fc.lang.verify+'"></div>'),b+='<div class="fc-send-sms">',b+='<input class="fc-btn" type="submit" value="'+fc.lang.sendSms+'"><div class="fc-loading fc-hide"></div>',getConfig(a,"renderAsModal",!1)&&(b+='<div class="fc-clear fc-verification-options">',b+='<p><small>Already have a verification code? Click <a href="#" class="fc-sms-verification-modal" data-for="'+getId(a)+'">here</a> to validate.</small></p>',b+="</div>"),b+="</div>",b+="</div>"),b+='<div class="fc-success'+(d?" fc-force-show":"")+'">',b+=fc.lang.fieldValidated,b+="</div>",!d&&void 0===c&&getConfig(a,"autoDeliverOnFirstRender",!1)&&api("verification/callback",{field:getId(a)},"POST",function(b){"object"==typeof b&&void 0!==b.success&&b.success&&(getConfig(a,"autoShowModalDialog",!1)&&showEmailVerificationModal(getId(a)),waitForVerification(getId(a)),forceUpdateFieldValue(getId(a),"0"))}),b},renderReviewTableString=function(a,b){var c,d,e,f="";if(void 0===a||!a.type)return"";if(["emailVerification","smsVerification","signature","creditCard"].indexOf(a.type)>-1)return"";if(getConfig(a,"readOnly",!1))return"";if(f+="<tr><td>"+getShortLabel(a)+"</td><td>",["[","{"].indexOf(b.substring(0,1))>-1)try{c=$.parseJSON(b),b=c}catch(g){}if("string"==typeof b)f+=htmlEncode(b);else if("object"==typeof b){for(f+="<ul class='fc-list'>",d=0;d<b.length;d+=1)e=b[d],f+="<li>"+htmlEncode(e)+"</li>";f+="</ul>"}return f+="</td></tr>"},renderReviewTableArray=function(a,b){var c,d,e,f="";for(c=0;c<b.length;c+=1)if("object"==typeof b[c]){f+="<tr><th colspan='2'>"+htmlEncode(getShortLabel(a))+" #"+(c+1)+"</th></tr>";for(e in b[c])b[c].hasOwnProperty(e)&&b[c][e].length>0&&e.indexOf(fc.constants.prefixSeparator)>-1&&(d=e.split(fc.constants.prefixSeparator),f+="<tr><td>"+getShortLabel(fc.fieldSchema[d[d.length-1]]),f+="</td><td>"+htmlEncode(b[c][e])+"</td></tr>")}return f},renderReviewTableGrouplet,renderSummaryField,renderReviewTable=function(a){var b,c,d,e,f,g,h,i,j,k;for(b='<div class="fc-form-summary fc-review-table">',b+='<table class="fc-table"><thead><tr><th class="fc-field-col">Field</th><th>Value</th></tr></thead><tbody>',c=0;c<fc.schema.stage.length;c+=1)if(d=fc.schema.stage[c],void 0!==d&&void 0!==d.page&&"object"==typeof d.page)for(e=0;e<d.page.length;e+=1)if(f=d.page[e],void 0!==f&&void 0!==f.section&&"object"==typeof f.section){for(k="",g=0;g<f.section.length;g+=1)if(h=f.section[g],void 0!==h&&void 0!==h.field&&"object"==typeof h.field)for(i=0;i<h.field.length;i+=1)j=h.field[i],k+=renderSummaryField(j);k.length>0&&(b+="<tr><th colspan='2'>"+htmlEncode(f.label)+"</th></tr>",b+=k)}return b+="</tbody></table></div>"},isSubmitPage=function(a){return"object"!=typeof a||void 0===a.completion?!1:a.completion===!0||"string"==typeof a.completion&&-1!==["1","true"].indexOf(a.completion.toLowerCase())},deleteSession=function(a){"boolean"!=typeof a&&(a=!0),$.removeCookie(fc.config.sessionIdName),a&&($(fc.jQueryContainer+" .render").html(fc.lang.sessionExpiredHtml),$(fc.jQueryContainer).trigger(fc.jsEvents.onFormExpired)),fc.expired=!0},timeout=function(){if(fc.config.timeUserOut===!0){var a,b=(new Date).getTime()-fc.lastActivity;b>1e3*fc.config.timeOutAfter?deleteSession():b>1e3*fc.config.timeOutWarning&&(a=confirm("Your session is about to expire. Do you want to extend your session?"),b=(new Date).getTime()-fc.lastActivity,a===!0&&b<1e3*fc.config.timeOutAfter?api("page/ping",{},"put",function(a){"object"==typeof a&&a.success===!0&&(fc.lastActivity=(new Date).getTime())}):deleteSession())}},nextVisibleField=function(a,b){var c,d=!1;return"boolean"!=typeof b&&(b=!0),$(".fc-section:not(.fc-hide) div.fc-field:not(.fc-hide)").each(function(){var e=$(this).attr("fc-data-group");if(!d&&e===a)return void(d=!0);if(d&&!c){if(b&&!fc.fields[e])return void(c=e);b||(c=e)}}),c},smoothScrollToPage=function(a){var b,c;fc.lastCompletedField&&fc.fieldSchema[fc.lastCompletedField]&&!getConfig(fc.fieldSchema[fc.lastCompletedField],"allowAutoScroll",!0)||fc.activeScroll.length>0||(fc.activeScroll=a,c=$(".fc-page:last"),c.length>0&&c.attr("data-page-id")===a&&(b=parseInt(c.offset().top,10)+parseInt(fc.config.scrollOffset,10),0===$(document).scrollTop()&&(b+=fc.config.initialScrollOffset),void 0!==fc.config.conditionalHtmlScrollOffset["class"]&&$("html").hasClass(fc.config.conditionalHtmlScrollOffset["class"])&&(b+=fc.config.conditionalHtmlScrollOffset.offset),scrollToOffset(b)))},validateAbn=function(a,b,c){var d=function(a){if("string"==typeof a)try{a=$.parseJSON(a)}catch(b){}c&&"function"==typeof c&&c(a)};api("verification/abn",{abn:b},"POST",d)},setFieldSchemas=function(a){var b,c;if("object"==typeof a){if(a.config&&a.type&&a._id&&a._id.$id)return void(fc.fieldSchema[getId(a)]=a);if("object"==typeof a)for(b in a)a.hasOwnProperty(b)&&(c=a[b],"object"==typeof c&&setFieldSchemas(c))}},autoScrollToField=function(a,b){var c,d,e;if(void 0!==b)c=$('.fc-field[fc-data-group="'+b+'"]'),c&&c.length>0&&(e=c.attr("fc-belongs-to"),e!==$('.fc-field[fc-data-group="'+a+'"]').attr("fc-belongs-to")&&(c=$('.fc-section[formcorp-data-id="'+e+'"]')),c&&c.length>0&&(d=parseInt(c.offset().top,10)+fc.config.scrollOffset,parseInt($(document).scrollTop(),10)<d&&scrollToOffset(d)));else{try{c=$('.fc-field[fc-data-group="'+a+'"]')}catch(f){}void 0!==c&&c&&0!==c.length||(c=$(a)),c&&c.length>0&&(d=parseInt(c.offset().top,10)+fc.config.scrollOffset,scrollToOffset(d))}},tokenise=function(a,b){b||(b={});var c,d=a,e=a.match(/\{\{([a-zA-Z0-9-_.]+)\}\}/g),f=0,g=getFieldTagValues(),h="";if(e&&$.isArray(e)&&e.length>0)for(f=0;f<e.length;f+=1)c=e[f].replace(/[\{\}]+/g,""),h=void 0!==g[c]?g[c]:"",h='<span class="fc-token" data-token="'+htmlEncode(c)+'">'+h+"</span>",d=d.replace(new RegExp(e[f].escapeRegExp(),"g"),h);return d},fieldIsVisible=function(a){var b;return"string"==typeof a&&a.length>0&&(b=$('.fc-field[fc-data-group="'+a+'"]'),b.length>0&&!b.hasClass("fc-hide"))?!0:!1},scrollToFirstError=function(){var a,b,c=$(fc.jQueryContainer).find(".fc-field.fc-error");c.length>0&&c.each(function(){void 0===b&&(a=$(this).attr("fc-data-group"),fieldIsVisible(a)&&(b=a))}),void 0!==b&&autoScrollToField(b)},showModal=function(a){var b={addButton:!0,body:"",title:fc.lang.defaultModalTitle},c=$.extend({},b,a),d={addButton:$(fc.jQueryContainer).find(".fc-modal .modal-footer .fc-btn-add")};d.addButton.length>0&&(c.addButton===!1?d.addButton.hide():d.addButton.show()),c.title&&$(".fc-modal .modal-header h2").text(c.title),$(".fc-modal .modal-body").html(c.body),$(".fc-modal").addClass("fc-show")},initGreenIdDOMFields=function(){if(void 0!==fc.greenID){var a=$(fc.jQueryContainer).find(".fc-field-greenIdVerification");a.length>0&&a.each(function(){var a=$(this).attr("fc-data-group");fcGreenID.initGreenIdDOMField(a)})}},initGreenId=function(){var a,b,c,d,e=!1,f={};if("boolean"==typeof fc.config.forceGreenID)e=fc.config.forceGreenID;else for(a in fc.fieldSchema)if(fc.fieldSchema.hasOwnProperty(a)&&"greenIdVerification"===fc.fieldSchema[a].type){e=!0;break}e&&($(fc.jQueryContainer).on(fc.jsEvents.onGreenIdLoaded,function(){fc.greenID=fcGreenID,fc.greenID.init(),initGreenIdDOMFields()}),loadJsFile(cdnUrl()+fc.constants.greenId.scriptPath)),c=function(a){var b;return a.indexOf(fc.constants.prefixSeparator)>0&&(b={},b.repeatableIterator=a.split(fc.constants.prefixSeparator),void 0!==fc.fieldSchema[b.repeatableIterator[0]]&&(b.sourceField=getConfig(fc.fieldSchema[b.repeatableIterator[0]],"sourceField"),void 0!==fc.fields[b.sourceField]&&void 0!==fc.fields[b.sourceField][b.repeatableIterator[1]]))?fc.fields[b.sourceField][b.repeatableIterator[1]]:fc.fields},d=function(a,d,e,f,g){var h,i,j=c(d);for(i in f)f.hasOwnProperty(i)&&(h=getConfig(e,f[i]),b="","string"==typeof j[h]&&(g=a.find("."+i),g.length>0&&g.find(".fc-fieldinput").attr("value",j[h])))},f.DriversLicence=function(a){var b,c,e,f,g,h,i=a.attr("formcorp-data-id"),j="",k={};a.addClass("checked"),b=i.lastIndexOf(fc.constants.prefixSeparator),c=i.substr(0,b),e=$(fc.jQueryContainer).find('.fc-field[fc-data-group="'+c+'"]'),f=fc.fieldSchema[c],0!==e.length&&(g=e.find(".fc-greenid-options"),0!==g.length&&(h={_id:{$id:c+"_state"},config:{label:"State",options:["ACT","NSW","QLD","SA","VIC","WA"].join("\n"),placeholder:"Please select..."}},j+='<h3 class="fc-header">Drivers License Verification</h3>',j+="<p>To verify using your drivers license, please fill out the options below. <strong>Note: </strong>not all states are currently supported.</p>",j+=renderDropdown(h),j+='<div class="fc-child-options" data-for="'+c+'"></div>',g.attr("class","").addClass("fc-greenid-options fc-greenid-drivers-license").hide().html(j).slideDown(),autoScrollToField('.fc-field[fc-data-group="'+c+'"] .fc-greenid-options'),k={ACT:function(){var a,b,e={license:{_id:{$id:c+"_act_license_number"},config:{}},firstName:{_id:{$id:c+"_act_first_name"},config:{}},surname:{_id:{$id:c+"_act_surname"},config:{}},dob:{_id:{$id:c+"_act_dob"},config:{}},tos:{_id:{$id:c+"_act_tos"},config:{}}},g="",h={"first-name":"greenIDFirstName",surname:"greenIDSurname",dob:"greenIDDOB"};return g+='<div class="child-temp">',g+='<div class="drivers-license fc-green-field"><label>Driver\'s license: <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.license),g+="</div>",g+='<div class="dob fc-green-field"><label>Date of birth (DD/MM/YYYY): <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.dob),g+="</div>",g+='<div class="first-name fc-green-field"><label>First name (no middle names): <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.firstName),g+="</div>",g+='<div class="surname fc-green-field"><label>Surname: <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.surname),g+="</div>",g+='<div class="fc-clear"></div>',g+='<div class="tos"><input type="checkbox" class="fc-tos" id="'+c+'_act_tos">',g+='<label for="'+c+'_act_tos">&nbsp;I have read and accepted <a href="http://www.rego.act.gov.au/aboutus/?a=527482">ACT Government\'s privacy statement</a>.</label>',g+="</div>",g+='<div class="green-id-verify"><a class="fc-btn" href="#" data-for="'+c+'">Verify</a></div>',g+="</div>",a=$(g),d(a,c,f,h,b),a.html()},NSW:function(){var a,b,e={license:{_id:{$id:c+"_nsw_license_number"},config:{}},licenseCardNumber:{_id:{$id:c+"_nsw_card_number"},config:{}},surname:{_id:{$id:c+"_nsw_surname"},config:{}},tos:{_id:{$id:c+"_nsw_tos"},config:{}}},g="",h={surname:"greenIDSurname"};return g+='<div class="child-temp">',g+='<div class="drivers-license fc-green-field"><label>NSW driver\'s licence number: <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.license),g+="</div>",g+='<div class="card-number fc-green-field"><label>Licence card number: <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.licenseCardNumber),g+="</div>",g+='<div class="surname fc-green-field"><label>Surname: <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.surname),g+="</div>",g+='<div class="fc-clear"></div>',g+='<div class="tos"><input type="checkbox" class="fc-tos" id="'+c+'_nsw_tos">',g+='<label for="'+c+'_nsw_tos">&nbsp;I have read and accepted <a href="http://www.rms.nsw.gov.au/onlineprivacypolicy.html">NSW Government\'s privacy statement</a>.</label>',g+="</div>",g+='<div class="green-id-verify"><a class="fc-btn" href="#" data-for="'+c+'">Verify</a></div>',g+="</div>",a=$(g),d(a,c,f,h,b),a.html()},QLD:function(){var a,b,e={license:{_id:{$id:c+"_qld_license_number"},config:{}},firstName:{_id:{$id:c+"_qld_first_name"},config:{}},surname:{_id:{$id:c+"_qld_surname"},config:{}},dob:{_id:{$id:c+"_qld_dob"},config:{}},tos:{_id:{$id:c+"_qld_tos"},config:{}}},g="",h={"first-name":"greenIDFirstName",surname:"greenIDSurname",dob:"greenIDDOB"};return g+='<div class="child-temp">',g+='<div class="drivers-license fc-green-field"><label>Driver\'s licence / customer reference number: <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.license),g+="</div>",g+='<div class="dob fc-green-field"><label>Date of birth (DD/MM/YYYY): <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.dob),g+="</div>",g+='<div class="first-name fc-green-field"><label>First name (no middle names): <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.firstName),g+="</div>",g+='<div class="surname fc-green-field"><label>Surname: <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.surname),g+="</div>",g+='<div class="fc-clear"></div>',g+='<div class="tos"><input type="checkbox" class="fc-tos" id="'+c+'_qld_tos">',g+='<label for="'+c+'_qld_tos">&nbsp;I have read and accepted <a href="http://www.tmr.qld.gov.au/privacy">Queensland Transport\'s terms and conditions</a>.</label>',g+="</div>",g+='<div class="green-id-verify"><a class="fc-btn" href="#" data-for="'+c+'">Verify</a></div>',g+="</div>",a=$(g),d(a,c,f,h,b),a.html()},SA:function(){var a,b,e={license:{_id:{$id:c+"_sa_license_number"},config:{}},surname:{_id:{$id:c+"_sa_surname"},config:{}},dob:{_id:{$id:c+"_sa_dob"},config:{}},tos:{_id:{$id:c+"_sa_tos"},config:{}}},g="",h={surname:"greenIDSurname",dob:"greenIDDOB"};return g+='<div class="child-temp">',g+='<div class="drivers-license fc-green-field"><label>SA driver\'s licence number: <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.license),g+="</div>",g+='<div class="dob fc-green-field"><label>Date of birth (DD/MM/YYYY): <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.dob),g+="</div>",g+='<div class="surname fc-green-field"><label>Surname: <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.surname),g+="</div>",g+='<div class="fc-clear"></div>',g+='<div class="tos"><input type="checkbox" class="fc-tos" id="'+c+'_sa_tos">',g+='<label for="'+c+'_sa_tos">&nbsp;I have read and accepted <a href="http://www.transport.sa.gov.au/privacy.asp">SA Government\'s privacy statement</a>.</label>',g+="</div>",g+='<div class="green-id-verify"><a class="fc-btn" href="#" data-for="'+c+'">Verify</a></div>',g+="</div>",a=$(g),d(a,c,f,h,b),a.html()},VIC:function(){var a,b,e={license:{_id:{$id:c+"_vic_license_number"},config:{}},surname:{_id:{$id:c+"_vic_surname"},config:{}},dob:{_id:{$id:c+"_vic_dob"},config:{}},address:[{_id:{$id:c+"_vic_address_1"},config:{placeholder:"Address (line 1)"}},{_id:{$id:c+"_vic_address_2"},config:{placeholder:"Address (line 2)"}},{_id:{$id:c+"_vic_address_3"},config:{placeholder:"Address (line 3)"}}],tos:{_id:{$id:c+"_vic_tos"},config:{}}},g="",h={surname:"greenIDSurname",dob:"greenIDDOB"};return g+='<div class="child-temp">',g+='<div class="drivers-license fc-green-field"><label>VIC driver\'s licence number: <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.license),g+="</div>",g+='<div class="dob fc-green-field"><label>Date of birth (DD/MM/YYYY): <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.dob),g+="</div>",g+='<div class="surname fc-green-field"><label>Surname: <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.surname),g+="</div>",g+='<div class="fc-clear"></div>',g+='<div class="fc-clear"></div>',g+='<div class="address_vic fc-green-field"><label>Address as shown on licence: <span class="fc-required-caret">*</span></label>',g+='<div class="vic_address_1">'+renderTextfield(e.address[0])+"</div>",g+='<div class="vic_address_2">'+renderTextfield(e.address[1])+"</div>",g+='<div class="vic_address_3">'+renderTextfield(e.address[2])+"</div>",g+="</div>",g+='<div class="fc-clear"></div>',g+='<div class="tos"><input type="checkbox" class="fc-tos" id="'+c+'_vic_tos">',g+='<label for="'+c+'_vic_tos">&nbsp;I have read and accepted <a href="https://www.vicroads.vic.gov.au/privacy">VicRoads\' privacy statement</a>.</label>',g+="</div>",g+='<div class="fc-clear"></div>',g+='<div class="green-id-verify"><a class="fc-btn" href="#" data-for="'+c+'">Verify</a></div>',g+="</div>",a=$(g),d(a,c,f,h,b),a.html()},WA:function(){var a,b,e={license:{_id:{$id:c+"_wa_license_number"},config:{}},dob:{_id:{$id:c+"_wa_dob"},config:{}},expiry:{_id:{$id:c+"_wa_dob"},config:{}},tos:{_id:{$id:c+"_wa_tos"},config:{}}},g="",h={dob:"greenIDDOB"};return g+='<div class="child-temp">',g+='<div class="drivers-license fc-green-field"><label>WA driver\'s licence number: <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.license),g+="</div>",g+='<div class="dob fc-green-field"><label>Date of birth (DD/MM/YYYY): <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.dob),g+="</div>",g+='<div class="expiry fc-green-field"><label>Expiry (DD/MM/YYYY): <span class="fc-required-caret">*</span></label>',g+=renderTextfield(e.expiry),
g+="</div>",g+='<div class="fc-clear"></div>',g+='<div class="tos"><input type="checkbox" class="fc-tos" id="'+c+'_wa_tos">',g+='<label for="'+c+'_wa_tos">&nbsp;I have read and accepted <a href="http://www.transport.wa.gov.au/aboutus/our-website.asp">WA Government\'s privacy statement</a>.</label>',g+="</div>",g+='<div class="fc-clear"></div>',g+='<div class="green-id-verify"><a class="fc-btn" href="#" data-for="'+c+'">Verify</a></div>',g+="</div>",a=$(g),d(a,c,f,h,b),a.html()}},$(fc.jQueryContainer).on("change",".fc-greenid-drivers-license > select",function(){var a=$(this).val(),b="";if(null!==a)return"function"==typeof k[a]&&(fc.greenID.currentState="state"+a,b=k[a](),"string"==typeof j&&g.find(".fc-child-options").hide().html(b).slideDown()),!1})))},f.Passport=function(a){var b,c,e,f,g,h,i,j,k,l=a.attr("formcorp-data-id"),m="",n='<div class="fc-passport">',o={"given-name":"greenIDFirstName","middle-names":"greenIDMiddleName","family-name":"greenIDSurname",dob:"greenIDDOB"},p={1:"AUSTRALIA",5:"AFGHANISTAN",272:"ALAND ISLANDS",8:"ALBANIA",69:"ALGERIA",14:"AMERICAN SAMOA",9:"ANDORRA",6:"ANGOLA",7:"ANGUILLA",15:"ANTARCTICA",17:"ANTIGUA AND BARBUDA",12:"ARGENTINA",13:"ARMENIA",4:"ARUBA",18:"AUSTRIA",19:"AZERBAIJAN",27:"BAHAMAS",26:"BAHRAIN",24:"BANGLADESH",34:"BARBADOS",262:"BECHUANALAND*",29:"BELARUS",21:"BELGIUM",30:"BELIZE",22:"BENIN",31:"BERMUDA",36:"BHUTAN",32:"BOLIVIA",28:"BOSNIA AND HERZEGOVINA",39:"BOTSWANA",38:"BOUVET ISLAND",33:"BRAZIL",113:"BRITISH INDIAN OCEAN TERRITITORY (CHAGOS ARCH.)",35:"BRUNEI",25:"BULGARIA",23:"BURKINA FASO",37:"BURMA*",20:"BURUNDI",40:"BYELORUSSIA*",126:"CAMBODIA",48:"CAMEROON",42:"CANADA",54:"CAPE VERDE",60:"CAYMAN ISLANDS",41:"CENTRAL AFRICAN REPUBLIC",219:"CHAD",45:"CHILE",46:"CHINA",59:"CHRISTMAS ISLAND",43:"COCOS KEELING ISLANDS",52:"COLOMBIA",53:"COMOROS",50:"CONGO",49:"CONGO (DEMOCRATIC REPUBLIC OF THE)",51:"COOK ISLANDS",55:"COSTA RICA",107:"CROATIA",58:"CUBA",61:"CYPRUS",62:"CZECH REPUBLIC",56:"CZECHOSLOVAKIA*",263:"DAHOMEY*",67:"DENMARK",267:"DJIBOUTI",66:"DOMINICA",68:"DOMINICAN REPUBLIC",264:"EAST PAKISTAN*",70:"ECUADOR",71:"EGYPT",205:"EL SALVADOR",96:"EQUATORIAL GUINEA",72:"ERITREA",75:"ESTONIA",76:"ETHIOPIA",79:"FALKLAND ISLANDS (MALVINAS)",81:"FAROE ISLANDS",78:"FIJI",77:"FINLAND",80:"FRANCE",265:"FRENCH ALGERIA*",101:"FRENCH GUIANA",190:"FRENCH POLYNESIA",16:"FRENCH SOUTHERN TERRITORIES",65:"FRENCH TERRITORY OF AFARS AND ISSAS*",83:"GABON",94:"GAMBIA",89:"GEORGIA",266:"GERMAN EAST AFRICA*",63:"GERMANY (DEMOCRATIC REPUBLIC OF)*",64:"GERMANY (FEDERAL REPUBLIC OF)",90:"GHANA",91:"GIBRALTAR",97:"GREECE",99:"GREENLAND",98:"GRENADA",93:"GUADELOUPE",102:"GUAM",100:"GUATEMALA",276:"GUERNSEY",92:"GUINEA",95:"GUINEA BISSAU",103:"GUYANA",108:"HAITI",105:"HEARD AND MCDONALD ISLANDS",106:"HONDURAS",104:"HONG KONG SAR",109:"HUNGARY",117:"ICELAND",112:"INDIA",111:"INDONESIA",115:"IRAN",116:"IRAQ",114:"IRELAND",277:"ISLE OF MAN",118:"ISRAEL",119:"ITALY",47:"IVORY COAST",120:"JAMAICA",122:"JAPAN",275:"JERSEY",121:"JORDAN",57:"KANTON AND ENDERBURY ISLANDS*",123:"KAZAKHSTAN",124:"KENYA",127:"KIRIBATI",187:"KOREA, NORTH",129:"KOREA, SOUTH",271:"KOSOVO",130:"KUWAIT",125:"KYRGYZSTAN",131:"LAOS",141:"LATVIA",132:"LEBANON",138:"LESOTHO",133:"LIBERIA",134:"LIBYA",136:"LIECHTENSTEIN",139:"LITHUANIA",140:"LUXEMBOURG",142:"MACAU SAR",150:"MACEDONIA, FORMER YUGOSLAV REPUBLIC OF",146:"MADAGASCAR",161:"MALAWI",162:"MALAYSIA",147:"MALDIVES",151:"MALI",152:"MALTA",149:"MARSHALL ISLANDS",159:"MARTINIQUE",157:"MAURITANIA",160:"MAURITIUS",163:"MAYOTTE",148:"MEXICO",82:"MICRONESIA",145:"MOLDOVA",144:"MONACO",154:"MONGOLIA",269:"MONTENEGRO",158:"MONTSERRAT",143:"MOROCCO",156:"MOZAMBIQUE",153:"MYANMAR",164:"NAMIBIA",174:"NAURU",173:"NEPAL",171:"NETHERLANDS",10:"NETHERLANDS ANTILLES",175:"NEUTRAL ZONE",165:"NEW CALEDONIA",176:"NEW ZEALAND",169:"NICARAGUA",166:"NIGER",168:"NIGERIA",170:"NIUE",167:"NORFOLK ISLAND",155:"NORTHERN MARIANA ISLANDS",172:"NORWAY",177:"OMAN",178:"PAKISTAN",183:"PALAU",279:"PALESTINIAN TERRITORIES*",179:"PANAMA",184:"PAPUA NEW GUINEA",189:"PARAGUAY",181:"PERU",182:"PHILIPPINES",180:"PITCAIRN",185:"POLAND",188:"PORTUGAL",186:"PUERTO RICO",191:"QATAR",192:"REUNION",258:"RHODESIA*",193:"ROMANIA",194:"RUSSIA",195:"RWANDA",273:"SAINT BARTHELEMY",201:"SAINT HELENA",128:"SAINT KITTS AND NEVIS",135:"SAINT LUCIA",274:"SAINT MARTIN",208:"SAINT PIERRE AND MIQUECON",239:"SAINT VINCENT AND GRENADINES",246:"SAMOA",206:"SAN MARINO",209:"SAO TOME &amp; PRINCIPE",196:"SAUDI ARABIA",199:"SENEGAL",268:"SERBIA",197:"SERBIA AND MONTENEGRO*",216:"SEYCHELLES",204:"SIERRA LEONE",200:"SINGAPORE",212:"SLOVAKIA",213:"SLOVENIA",203:"SOLOMON ISLANDS",207:"SOMALIA",252:"SOUTH AFRICA",270:"SOUTH GEORGIA AND SOUTH SANDWICH ISLANDS",259:"SOUTHERN RHODESIA*",74:"SPAIN",137:"SRI LANKA",198:"SUDAN",211:"SURINAME",202:"SVALBARD AND JAN MAYEN",215:"SWAZILAND",214:"SWEDEN",44:"SWITZERLAND",217:"SYRIA",231:"TAIWAN",222:"TAJIKISTAN",261:"TANGANYIKA*",232:"TANZANIA",221:"THAILAND",225:"TIMOR LESTE (FORMERLY EAST TIMOR)",220:"TOGO",223:"TOKELAU",226:"TONGA",227:"TRINIDAD &amp; TOBAGO",228:"TUNISIA",229:"TURKEY",224:"TURKMENISTAN",218:"TURKS &amp; CAICOS ISLANDS",230:"TUVALU",210:"U.S.S.R.*",233:"UGANDA",234:"UKRAINE",11:"UNITED ARAB EMIRATES",3:"UNITED KINGDOM",235:"UNITED STATES MINOR OUTLYING ISLANDS",236:"URUGUAY",2:"USA",237:"UZBEKISTAN",244:"VANUATU",238:"VATICAN CITY STATE (HOLY SEE)",240:"VENEZUELA",243:"VIETNAM",241:"VIRGIN ISLANDS (BRITISH)",242:"VIRGIN ISLANDS (USA)",245:"WALLIS AND FUTUNA ISLANDS",73:"WESTERN SAHARA",278:"WESTERN SAMOA*",249:"YEMEN",250:"YEMEN (DEMOCRATIC PEOPLES' REPUBLIC)*",251:"YUGOSLAVIA*",253:"ZAIRE",254:"ZAMBIA",260:"ZANZIBAR*",255:"ZIMBABWE"},q="";if(a.addClass("checked"),c=l.lastIndexOf(fc.constants.prefixSeparator),b=l.substr(0,c),e=$(fc.jQueryContainer).find('.fc-field[fc-data-group="'+b+'"]'),f=fc.fieldSchema[b],0!==e.length){for(k in p)p.hasOwnProperty(k)&&(q+='<option value="'+k+'">'+p[k]+"</option>");g=e.find(".fc-greenid-options"),0!==g.length&&(h={passportNumber:{_id:{$id:b+"_passport_number"},config:{}},givenName:{_id:{$id:b+"_passport_given_name"},config:{}},middleNames:{_id:{$id:b+"_passport_middle_names"},config:{}},familyName:{_id:{$id:b+"_passport_family_name"},config:{}},dateOfBirth:{_id:{$id:b+"_passport_dob"},config:{}},familyNameAtBirth:{_id:{$id:b+"_passport_family_name_at_birth"},config:{}},placeOfBirth:{_id:{$id:b+"_passport_place_birth"},config:{}},countryOfBirth:{_id:{$id:b+"_passport_place_birth"},config:{}},firstNameAtCitizenship:{_id:{$id:b+"_passport_first_name_citizenship"},config:{}},surnameAtCitizenship:{_id:{$id:b+"_passport_surname_citizenship"},config:{}},tos:{_id:{$id:b+"_passport_tos"},config:{}}},n+='<div class="fc-clear"></div>',n+='<div class="passport-number fc-green-field"><label>Passport number (include any letters): <span class="fc-required-caret">*</span></label>',n+=renderTextfield(h.passportNumber),n+="</div>",n+='<div class="given-name fc-green-field"><label>Given name (as shown on passport): <span class="fc-required-caret">*</span></label>',n+=renderTextfield(h.givenName),n+="</div>",n+='<div class="middle-names fc-green-field"><label>Middle names: </label>',n+=renderTextfield(h.middleNames),n+="</div>",n+='<div class="family-name fc-green-field"><label>Family name: <span class="fc-required-caret">*</span></label>',n+=renderTextfield(h.familyName),n+="</div>",n+='<div class="dob fc-green-field"><label>Date of birth (DD/MM/YYYY): <span class="fc-required-caret">*</span></label>',n+=renderTextfield(h.dateOfBirth),n+="</div>",n+='<div class="family-name-at-birth fc-green-field"><label>Family name at birth: <span class="fc-required-caret">*</span></label>',n+=renderTextfield(h.familyNameAtBirth),n+="</div>",n+='<div class="place-of-birth fc-green-field"><label>Place of birth: <span class="fc-required-caret">*</span></label>',n+=renderTextfield(h.placeOfBirth),n+="</div>",n+='<div class="fc-clear"></div>',n+='<div class="country-birth fc-green-field"><label>Country of birth: <span class="fc-required-caret">*</span></label>',n+='<select data-for="'+b+'"><option value="">Please select a value</option>'+q+"</select>",n+="</div>",n+='<div class="fc-clear"></div>',n+='<div class="fc-non-australia-fields">',n+="<p>As you are not an Australian citizen by birth, we require additional information to verify your citizenship.</p>",n+='<div class="fc-clear"></div>',n+='<div class="first-name-at-citizenship fc-green-field"><label>First name at citizenship: <span class="fc-required-caret">*</span></label>',n+=renderTextfield(h.familyNameAtBirth),n+="</div>",n+='<div class="surname-at-citizenship fc-green-field"><label>Surname at citizenship: <span class="fc-required-caret">*</span></label>',n+=renderTextfield(h.placeOfBirth),n+="</div>",n+="</div>",n+='<div class="fc-clear"></div>',n+='<div class="tos"><input type="checkbox" class="fc-tos" id="'+b+'_passport_tos">',n+='<label for="'+b+'_passport_tos">&nbsp;I have read and accepted <a href="http://dfat.gov.au/privacy.html">DFAT\'s Disclosure Statement</a>.</label>',n+="</div>",n+='<div class="green-id-verify"><a class="fc-btn" href="#" data-for="'+b+'">Verify</a></div>',n+="</div>",i=$(n),d(i,b,f,o,j),n=i.prop("outerHTML"),m+='<h3 class="fc-header">Passport Verification</h3>',m+="<p>To verify using your passport, please fill out the options below.</p>",m+=n,m+='<div class="fc-child-options" data-for="'+b+'"></div>',g.attr("class","").addClass("fc-greenid-options fc-greenid-drivers-license").hide().html(m).slideDown(),fc.greenID.currentState="verifyPassport",autoScrollToField('.fc-field[fc-data-group="'+b+'"] .fc-greenid-options'))}},f.EmploymentVisaForeignPassport=function(a){var b,c,e,f,g,h,i,j,k=a.attr("formcorp-data-id"),l="",m='<div class="fc-visa">',n={"family-name":"greenIDSurname",dob:"greenIDDOB"};a.addClass("checked"),b=k.lastIndexOf(fc.constants.prefixSeparator),c=k.substr(0,b),e=$(fc.jQueryContainer).find('.fc-field[fc-data-group="'+c+'"]'),f=fc.fieldSchema[c],0!==e.length&&(g=e.find(".fc-greenid-options"),0!==g.length&&(h={visaNumber:{_id:{$id:c+"_visa_number"},config:{}},familyName:{_id:{$id:c+"_visa_family_name"},config:{}},dateOfBirth:{_id:{$id:c+"_visa_dob"},config:{}},passportCountry:{_id:{$id:c+"_visa_passport_country"},config:{}},tos:{_id:{$id:c+"_visa_tos"},config:{}}},m+='<div class="fc-clear"></div>',m+='<div class="visa-number fc-green-field"><label>Visa number: <span class="fc-required-caret">*</span></label>',m+=renderTextfield(h.visaNumber),m+="</div>",m+='<div class="family-name fc-green-field"><label>Family name: <span class="fc-required-caret">*</span></label>',m+=renderTextfield(h.familyName),m+="</div>",m+='<div class="dob fc-green-field"><label>Date of birth (DD/MM/YYYY): <span class="fc-required-caret">*</span></label>',m+=renderTextfield(h.dateOfBirth),m+="</div>",m+='<div class="fc-clear"></div>',m+='<div class="country-passport fc-green-field"><label>Country of birth: <span class="fc-required-caret">*</span></label>',m+='<select data-for="'+c+'"><option value="">Please select a value</option><option value="1">AUSTRALIA</option><option value="5">AFGHANISTAN</option><option value="272">ALAND ISLANDS</option><option value="8">ALBANIA</option><option value="69">ALGERIA</option><option value="14">AMERICAN SAMOA</option><option value="9">ANDORRA</option><option value="6">ANGOLA</option><option value="7">ANGUILLA</option><option value="15">ANTARCTICA</option><option value="17">ANTIGUA AND BARBUDA</option><option value="12">ARGENTINA</option><option value="13">ARMENIA</option><option value="4">ARUBA</option><option value="18">AUSTRIA</option><option value="19">AZERBAIJAN</option><option value="27">BAHAMAS</option><option value="26">BAHRAIN</option><option value="24">BANGLADESH</option><option value="34">BARBADOS</option><option value="262">BECHUANALAND*</option><option value="29">BELARUS</option><option value="21">BELGIUM</option><option value="30">BELIZE</option><option value="22">BENIN</option><option value="31">BERMUDA</option><option value="36">BHUTAN</option><option value="32">BOLIVIA</option><option value="28">BOSNIA AND HERZEGOVINA</option><option value="39">BOTSWANA</option><option value="38">BOUVET ISLAND</option><option value="33">BRAZIL</option><option value="113">BRITISH INDIAN OCEAN TERRITITORY (CHAGOS ARCH.)</option><option value="35">BRUNEI</option><option value="25">BULGARIA</option><option value="23">BURKINA FASO</option><option value="37">BURMA*</option><option value="20">BURUNDI</option><option value="40">BYELORUSSIA*</option><option value="126">CAMBODIA</option><option value="48">CAMEROON</option><option value="42">CANADA</option><option value="54">CAPE VERDE</option><option value="60">CAYMAN ISLANDS</option><option value="41">CENTRAL AFRICAN REPUBLIC</option><option value="219">CHAD</option><option value="45">CHILE</option><option value="46">CHINA</option><option value="59">CHRISTMAS ISLAND</option><option value="43">COCOS KEELING ISLANDS</option><option value="52">COLOMBIA</option><option value="53">COMOROS</option><option value="50">CONGO</option><option value="49">CONGO (DEMOCRATIC REPUBLIC OF THE)</option><option value="51">COOK ISLANDS</option><option value="55">COSTA RICA</option><option value="107">CROATIA</option><option value="58">CUBA</option><option value="61">CYPRUS</option><option value="62">CZECH REPUBLIC</option><option value="56">CZECHOSLOVAKIA*</option><option value="263">DAHOMEY*</option><option value="67">DENMARK</option><option value="267">DJIBOUTI</option><option value="66">DOMINICA</option><option value="68">DOMINICAN REPUBLIC</option><option value="264">EAST PAKISTAN*</option><option value="70">ECUADOR</option><option value="71">EGYPT</option><option value="205">EL SALVADOR</option><option value="96">EQUATORIAL GUINEA</option><option value="72">ERITREA</option><option value="75">ESTONIA</option><option value="76">ETHIOPIA</option><option value="79">FALKLAND ISLANDS (MALVINAS)</option><option value="81">FAROE ISLANDS</option><option value="78">FIJI</option><option value="77">FINLAND</option><option value="80">FRANCE</option><option value="265">FRENCH ALGERIA*</option><option value="101">FRENCH GUIANA</option><option value="190">FRENCH POLYNESIA</option><option value="16">FRENCH SOUTHERN TERRITORIES</option><option value="65">FRENCH TERRITORY OF AFARS AND ISSAS*</option><option value="83">GABON</option><option value="94">GAMBIA</option><option value="89">GEORGIA</option><option value="266">GERMAN EAST AFRICA*</option><option value="63">GERMANY (DEMOCRATIC REPUBLIC OF)*</option><option value="64">GERMANY (FEDERAL REPUBLIC OF)</option><option value="90">GHANA</option><option value="91">GIBRALTAR</option><option value="97">GREECE</option><option value="99">GREENLAND</option><option value="98">GRENADA</option><option value="93">GUADELOUPE</option><option value="102">GUAM</option><option value="100">GUATEMALA</option><option value="276">GUERNSEY</option><option value="92">GUINEA</option><option value="95">GUINEA BISSAU</option><option value="103">GUYANA</option><option value="108">HAITI</option><option value="105">HEARD AND MCDONALD ISLANDS</option><option value="106">HONDURAS</option><option value="104">HONG KONG SAR</option><option value="109">HUNGARY</option><option value="117">ICELAND</option><option value="112">INDIA</option><option value="111">INDONESIA</option><option value="115">IRAN</option><option value="116">IRAQ</option><option value="114">IRELAND</option><option value="277">ISLE OF MAN</option><option value="118">ISRAEL</option><option value="119">ITALY</option><option value="47">IVORY COAST</option><option value="120">JAMAICA</option><option value="122">JAPAN</option><option value="275">JERSEY</option><option value="121">JORDAN</option><option value="57">KANTON AND ENDERBURY ISLANDS*</option><option value="123">KAZAKHSTAN</option><option value="124">KENYA</option><option value="127">KIRIBATI</option><option value="187">KOREA, NORTH</option><option value="129">KOREA, SOUTH</option><option value="271">KOSOVO</option><option value="130">KUWAIT</option><option value="125">KYRGYZSTAN</option><option value="131">LAOS</option><option value="141">LATVIA</option><option value="132">LEBANON</option><option value="138">LESOTHO</option><option value="133">LIBERIA</option><option value="134">LIBYA</option><option value="136">LIECHTENSTEIN</option><option value="139">LITHUANIA</option><option value="140">LUXEMBOURG</option><option value="142">MACAU SAR</option><option value="150">MACEDONIA, FORMER YUGOSLAV REPUBLIC OF</option><option value="146">MADAGASCAR</option><option value="161">MALAWI</option><option value="162">MALAYSIA</option><option value="147">MALDIVES</option><option value="151">MALI</option><option value="152">MALTA</option><option value="149">MARSHALL ISLANDS</option><option value="159">MARTINIQUE</option><option value="157">MAURITANIA</option><option value="160">MAURITIUS</option><option value="163">MAYOTTE</option><option value="148">MEXICO</option><option value="82">MICRONESIA</option><option value="145">MOLDOVA</option><option value="144">MONACO</option><option value="154">MONGOLIA</option><option value="269">MONTENEGRO</option><option value="158">MONTSERRAT</option><option value="143">MOROCCO</option><option value="156">MOZAMBIQUE</option><option value="153">MYANMAR</option><option value="164">NAMIBIA</option><option value="174">NAURU</option><option value="173">NEPAL</option><option value="171">NETHERLANDS</option><option value="10">NETHERLANDS ANTILLES</option><option value="175">NEUTRAL ZONE</option><option value="165">NEW CALEDONIA</option><option value="176">NEW ZEALAND</option><option value="169">NICARAGUA</option><option value="166">NIGER</option><option value="168">NIGERIA</option><option value="170">NIUE</option><option value="167">NORFOLK ISLAND</option><option value="155">NORTHERN MARIANA ISLANDS</option><option value="172">NORWAY</option><option value="177">OMAN</option><option value="178">PAKISTAN</option><option value="183">PALAU</option><option value="279">PALESTINIAN TERRITORIES*</option><option value="179">PANAMA</option><option value="184">PAPUA NEW GUINEA</option><option value="189">PARAGUAY</option><option value="181">PERU</option><option value="182">PHILIPPINES</option><option value="180">PITCAIRN</option><option value="185">POLAND</option><option value="188">PORTUGAL</option><option value="186">PUERTO RICO</option><option value="191">QATAR</option><option value="192">REUNION</option><option value="258">RHODESIA*</option><option value="193">ROMANIA</option><option value="194">RUSSIA</option><option value="195">RWANDA</option><option value="273">SAINT BARTHELEMY</option><option value="201">SAINT HELENA</option><option value="128">SAINT KITTS AND NEVIS</option><option value="135">SAINT LUCIA</option><option value="274">SAINT MARTIN</option><option value="208">SAINT PIERRE AND MIQUECON</option><option value="239">SAINT VINCENT AND GRENADINES</option><option value="246">SAMOA</option><option value="206">SAN MARINO</option><option value="209">SAO TOME &amp; PRINCIPE</option><option value="196">SAUDI ARABIA</option><option value="199">SENEGAL</option><option value="268">SERBIA</option><option value="197">SERBIA AND MONTENEGRO*</option><option value="216">SEYCHELLES</option><option value="204">SIERRA LEONE</option><option value="200">SINGAPORE</option><option value="212">SLOVAKIA</option><option value="213">SLOVENIA</option><option value="203">SOLOMON ISLANDS</option><option value="207">SOMALIA</option><option value="252">SOUTH AFRICA</option><option value="270">SOUTH GEORGIA AND SOUTH SANDWICH ISLANDS</option><option value="259">SOUTHERN RHODESIA*</option><option value="74">SPAIN</option><option value="137">SRI LANKA</option><option value="198">SUDAN</option><option value="211">SURINAME</option><option value="202">SVALBARD AND JAN MAYEN</option><option value="215">SWAZILAND</option><option value="214">SWEDEN</option><option value="44">SWITZERLAND</option><option value="217">SYRIA</option><option value="231">TAIWAN</option><option value="222">TAJIKISTAN</option><option value="261">TANGANYIKA*</option><option value="232">TANZANIA</option><option value="221">THAILAND</option><option value="225">TIMOR LESTE (FORMERLY EAST TIMOR)</option><option value="220">TOGO</option><option value="223">TOKELAU</option><option value="226">TONGA</option><option value="227">TRINIDAD &amp; TOBAGO</option><option value="228">TUNISIA</option><option value="229">TURKEY</option><option value="224">TURKMENISTAN</option><option value="218">TURKS &amp; CAICOS ISLANDS</option><option value="230">TUVALU</option><option value="210">U.S.S.R.*</option><option value="233">UGANDA</option><option value="234">UKRAINE</option><option value="11">UNITED ARAB EMIRATES</option><option value="3">UNITED KINGDOM</option><option value="235">UNITED STATES MINOR OUTLYING ISLANDS</option><option value="236">URUGUAY</option><option value="2">USA</option><option value="237">UZBEKISTAN</option><option value="244">VANUATU</option><option value="238">VATICAN CITY STATE (HOLY SEE)</option><option value="240">VENEZUELA</option><option value="243">VIETNAM</option><option value="241">VIRGIN ISLANDS (BRITISH)</option><option value="242">VIRGIN ISLANDS (USA)</option><option value="245">WALLIS AND FUTUNA ISLANDS</option><option value="73">WESTERN SAHARA</option><option value="278">WESTERN SAMOA*</option><option value="249">YEMEN</option><option value="250">YEMEN (DEMOCRATIC PEOPLES\' REPUBLIC)*</option><option value="251">YUGOSLAVIA*</option><option value="253">ZAIRE</option><option value="254">ZAMBIA</option><option value="260">ZANZIBAR*</option><option value="255">ZIMBABWE</option></select>',m+="</div>",m+='<div class="fc-clear"></div>',m+='<div class="tos"><input type="checkbox" class="fc-tos" id="'+c+'_visa_tos">',m+='<label for="'+c+'_visa_tos">&nbsp;I understand that I am disclosing information relating to my employment visa or non-Australian passport. This information will be disclosed to the Department of Immigration and Citizenship. I am aware that if am not entitled to be in Australia, then the Department of Immigration and Citizenship may use the information that I provide above to locate me.</label>',m+="</div>",m+='<div class="green-id-verify"><a class="fc-btn" href="#" data-for="'+c+'">Verify</a></div>',m+="</div>",i=$(m),d(i,c,f,n,j),m=i.prop("outerHTML"),l+='<h3 class="fc-header">Employment Visa (Foreign Passport)</h3>',l+="<p>Please provide your passport details so we can confirm your date of birth with the Department of Immigration and Citizenship.</p>",l+=m,l+='<div class="fc-child-options" data-for="'+c+'"></div>',g.attr("class","").addClass("fc-greenid-options fc-greenid-drivers-license").hide().html(l).slideDown(),fc.greenID.currentState="verifyVisa",autoScrollToField('.fc-field[fc-data-group="'+c+'"] .fc-greenid-options')))},f.SkipVerification=function(a){var b=a.attr("formcorp-data-id").replace("_rootSelection","");fcGreenID.skipVerification(b)},$(fc.jQueryContainer).on(fc.jsEvents.onButtonUnknownClick,function(a,b){var c,d,e=b.attr("id"),g=b.attr("data-field-value"),h=e.match(/([a-zA-Z0-9]{24})\_rootSelection\_\d+/g),i=null!==h,j=decodeURIComponent(g).replace(/[^a-zA-Z0-9\_]/g,"");return c=e.lastIndexOf(fc.constants.prefixSeparator),d=e.substr(0,c).replace("_rootSelection",""),$('.fc-field[fc-data-group="'+d+'"] .fc-greenid-verification-packages button').removeClass("checked"),i&&"function"==typeof f[j]?f[j](b):!1}),$(fc.jQueryContainer).on("change",".fc-green-field.country-birth select",function(){var a=$(this).find("option:selected").val(),b=$(this).attr("data-for"),c=$(fc.jQueryContainer).find('.fc-field-greenIdVerification[fc-data-group="'+b+'"] .fc-non-australia-fields');0!==c.length&&(0===a.length||"1"!==a?c.show():c.hide())})},onSchemaLoaded=function(){initGreenId()},flushActivePageForField=function(a,b){var c,d,e=!1;"boolean"!=typeof b&&(b=!1),d=getFieldPageId(a,b),"string"!=typeof d||0===d.length||d.indexOf(fc.constants.prefixSeparator)>-1||(fc.currentPage=d,$('.fc-page[data-page-id="'+fc.currentPage+'"] .fc-pagination').show(),$(".fc-page").each(function(){c=$(this).attr("data-page-id"),e&&c!==fc.currentPage?$(this).remove():c===fc.currentPage&&(e=!0)}),fc.pageOrders.indexOf(fc.currentPage)!==fc.pageOrders.length-1&&(fc.pageOrders=fc.pageOrders.splice(0,fc.pageOrders.indexOf(fc.currentPage)+1)))},updateMobileFieldsVisibility,renderGrouplet,outputRepeatablePreDetermined,renderFields,renderPageSections,generateRandomString,loadCssFiles,addModalWindow,pruneNonPageFields,removeInvisibleSectionFields,pruneInvisibleFields,fieldIsValid,formFieldsValid,checkAutoLoad,getFirstPageId,getFirstPage,loadSettings,loadSchema,hasNextPage,loadNextPage,processSaveQueue,showDeleteDialog,showRepeatableEditDialog,addRepeatableRow,editRepeatableRow,deleteRepeatableRow,registerRepeatableGroupletListeners,registerOnePageListeners,registerEventListeners,nextPage,render,renderPage,flushVisibility,flushRepeatableGroupletVisibility,flushSectionVisibility,flushFieldVisibility,setValueUpdate,registerValueChangedListeners,valueChanged,validateModal,orderSchema,renderSignature,loadSignatureLibs,orderObject,renderRepeatableIterator,renderApiLookupField,initGreenIdFieldInDOM,greenIdFieldHeader,renderGreenIdField,renderNumericSliderField,registerApiLookupListener,renderAutoCompleteWidget,removeAutoCompleteWidget;return loadSignatureLibs=function(){var a;$(fc.jQueryContainer).on(fc.jsEvents.onFinishRender,function(){var b;a=$(fc.jQueryContainer).find("."+fc.config.signatureClass),a.length>0&&a.each(function(){b=$(this).attr("data-for"),fc.renderedSignatures[b]=$(this).signaturePad({drawOnly:!0,onDrawEnd:function(){var a,b;for(a in fc.renderedSignatures)fc.renderedSignatures.hasOwnProperty(a)&&(b=fc.renderedSignatures[a].getSignatureString(),(void 0===fc.fields[a]||fc.fields[a]!==b)&&valueChanged(a,b))}}),void 0!==fc.fields[b]&&fc.fields[b].length>0&&fc.renderedSignatures[b].regenerate(fc.fields[b])})}),fc.processedActions[fc.processes.loadSignatureLibs]=!0},renderSignature=function(a,b){var c="";return processed(fc.processes.loadSignatureLibs)||loadSignatureLibs(),c='<div class="'+fc.config.signatureClass+'" formcorp-data-id="'+b+getId(a)+'" data-for="'+b+getId(a)+'"> <ul class="sigNav"> <li class="clearButton"><a href="#clear">Clear</a></li> </ul> <div class="sig sigWrapper"> <div class="typed"></div> <canvas class="pad" width="400" height="75"></canvas> <input type="hidden" name="output" class="output"> </div></div>'},renderReviewTableGrouplet=function(a,b){var c,d="";for(c in b)b.hasOwnProperty(c)&&(d+=renderSummaryField(fc.fieldSchema[c],b[c]));return d},renderSummaryField=function(a,b){var c,d,e,f="";return c=getId(a),void 0===b&&(b=fc.fields[c]),void 0!==b&&(d="object"==typeof b&&($.isArray(b)&&b.length>0||!$.isEmptyObject(b)),e="string"==typeof b&&b.length>0,(d||e)&&(e?f+=renderReviewTableString(a,b):d&&(f+=$.isArray(b)?renderReviewTableArray(a,b):renderReviewTableGrouplet(a,b)))),f},renderGrouplet=function(a){var b,c=a._id.$id,d="";return"object"==typeof a.config.grouplet&&(b=a.config.grouplet.field,d+=renderFields(b,a,[c])),getConfig(a,"repeatable",!1)===!0&&(d='<div class="fc-data-repeatable-grouplet" formcorp-data-id="'+c+'">'+d+"</div>"),d},outputRepeatablePreDetermined=function(a,b,c){var d,e="",f="",g=fc.fieldSchema[a],h=getFieldTagValues();if($.isNumeric(b)||(void 0===fc.reRenderOnValueChange[b]&&(fc.reRenderOnValueChange[b]=[]),fc.reRenderOnValueChange[b].indexOf(getId(g))<0&&fc.reRenderOnValueChange[b].push(getId(g)),"object"==typeof h&&"undefined"!==h[b]&&$.isNumeric(h[b])&&(b=h[b])),void 0!==b&&$.isNumeric(b)||(b=1),void 0===g.config)return e;if(void 0!==g.config.grouplet&&"object"==typeof g.config.grouplet&&void 0!==g.config.grouplet.field)for(d=0;b>d;d+=1)f=renderFields(g.config.grouplet.field,c,[a,d,""].join(fc.constants.prefixSeparator)),e+='<div class="fc-repeatable-row fc-row-'+(d+1)+'">',e+=f,e+='<div class="fc-end-repeatable-row"></div>',e+="</div>",e=e.replace(/\{iterator\}/gi,d+1,e);return e},renderFields=function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w="",x=!0;if("boolean"!=typeof d&&(d=!1),void 0===c?c="":"object"==typeof c&&(c=c.join(fc.constants.prefixSeparator)+fc.constants.prefixSeparator),c.length>0)for(m=c.substr(-1)===fc.constants.prefixSeparator?c.substr(0,c.length-1):c,f=0;f<a.length;f+=1)g=a[f],fc.fieldGrouplets[m]||(fc.fieldGrouplets[m]=[]),-1===fc.fieldGrouplets[m].indexOf(getId(g))&&fc.fieldGrouplets[m].push(getId(g));for(f=0;f<a.length;f+=1){if(g=a[f],h=getConfig(g,"required",!1),l=c+getId(g),i='<div class="',d&&(fc.withinIterator[l]=!0),getConfig(g,"tag","").length>0&&(i+="fc-tag-"+getConfig(g,"tag","")+" "),getConfig(g,"repeatable",!1)===!0&&(i+="fc-repeatable-container "),getConfig(g,"mobileOnly",!1)===!0?i+="fc-mobile-field ":getConfig(g,"desktopOnly",!1)===!0&&(i+="fc-desktop-field "),v=getConfig(g,"class",""),v.length>0&&(i+=v+" "),i+="fc-field fc-field-"+g.type+'" fc-data-group="'+l+'" data-required="'+h+'"',void 0!==b&&"object"==typeof b&&(i+=' fc-belongs-to="'+getId(b)+'"'),i+=">",c&&c.length>0&&getConfig(g,"visibility","").length>0&&!d&&(n=getConfig(g,"visibility"),o=n.match(/"([a-zA-Z0-9]{24})"/g),o&&o.length>0))for(p=0;p<o.length;p+=1)q=o[p].replace(/"/g,""),fc.fieldGrouplets[m].indexOf(q)>0&&(r=new RegExp(q,"g"),g.config.visibility=g.config.visibility.replace(r,c+q));switch(k=l,void 0===fc.fieldSchema[k]&&(fc.fieldSchema[k]=g),-1===["creditCard"].indexOf(g.type)&&fc.config.descriptionBeforeLabel===!0&&getConfig(g,"description").replace(/(<([^>]+)>)/gi,"").length>0&&(i+='<div class="fc-desc">'+getConfig(g,"description")+"</div>"),i+='<div class="fc-fieldcontainer">',s="",-1===["creditCard"].indexOf(g.type)&&(getConfig(g,"showLabel",!1)===!0&&getConfig(g,"label","").length>0&&(i+="<label>",i+=tokenise(g.config.label),fc.config.asterisksOnLabels&&getConfig(g,"required",!1)&&(i+='<span class="fc-required-caret">'+fc.lang.requiredAsterisk+"</span>"),fc.config.colonAfterLabel&&(i+=fc.lang.labelColon),fc.config.helpAsModal&&getConfig(g,"help").replace(/(<([^>]+)>)/gi,"").length>0&&(void 0===fc.helpData&&(fc.helpData=[],fc.helpTitle=[]),s=getConfig(g,"helpTitle",""),0===s.length&&fc.config.helpDefaultWhenNoTitleText===!1&&(s=fc.lang.helpModalLink),s.length>0?(fc.helpData.push(getConfig(g,"help")),fc.helpTitle.push(s),fc.config.staticHelpModalLink&&(s=fc.lang.helpModalLink),x=!1,i+=' <a class="fc-help-link" href="#" data-for="'+(fc.helpData.length-1)+'">'+s+"</a>"):x=!0),i+="</label>"),fc.config.descriptionBeforeLabel===!1&&getConfig(g,"description").replace(/(<([^>]+)>)/gi,"").length>0&&(i+='<div class="fc-desc">'+tokenise(getConfig(g,"description"))+"</div>")),getConfig(g,"repeatable",!1)===!0&&(u=parseInt(getConfig(g,"repeatableStyle",0)),i+='<div class="fc-repeatable',parseInt(u)===parseInt(fc.constants.repeatablePredetermined)&&(i+=" fc-repeatable-predetermined"),fc.constants.repeatableInDOM.indexOf(parseInt(u))>=0&&(i+=" fc-repeatable-in-dom"),i+='">',getConfig(g,"renderRepeatableTable",!1)&&(i+='<div class="fc-summary"></div>')),i+='<div class="fc-fieldgroup">',i+='<div class="fc-field-element-container">',g.type){case"text":j=renderTextfield(g,c);break;case"dropdown":j=renderDropdown(g,c);break;case"textarea":j=renderTextarea(g,c);break;case"radioList":j=renderRadioList(g,c);break;case"checkboxList":j=renderCheckboxList(g,c);break;case"hidden":j=renderHiddenField(g,c);break;case"richTextArea":j=renderRichText(g,c);break;case"grouplet":j=renderGrouplet(g,c);break;case"creditCard":j=renderCreditCard(g,c);break;case"emailVerification":j=renderEmailVerification(g,c);break;case"smsVerification":j=renderSmsVerification(g,c);break;case"reviewTable":j=renderReviewTable(g,c);break;case"signature":j=renderSignature(g,c);break;case"contentRadioList":j=renderContentRadioList(g,c);break;case"optionTable":j=renderOptionTable(g,c);break;case"abnVerification":j=renderAbnField(g,c);break;case"repeatableIterator":j=renderRepeatableIterator(g,c,b);break;case"apiLookup":j=renderApiLookupField(g,c);
break;case"greenIdVerification":j=renderGreenIdField(g,c);break;case"numericSlider":j=renderNumericSliderField(g,c);break;case"groupletReference":case"formReference":case"functionReference":j="";break;default:console.log("Unknown field type: "+g.type)}void 0===j||"string"==typeof j&&0===j.length||(i+=j,i+='<div class="fc-success-box"><span></span></div>',i+='<div class="fc-error-box"><span></span></div>',i+="</div>",i+='<div class="fc-error-text"></div>',fc.config.helpAsModal||(x=!0),x&&getConfig(g,"help").replace(/(<([^>]+)>)/gi,"").length>0&&(i+='<div class="fc-help">'+getConfig(g,"help")+"</div>"),getConfig(g,"repeatable",!1)===!0&&(i+="</div>",fc.constants.repeatableInDOM.indexOf(parseInt(u))>=0&&(i+='<div class="fc-repeatable-rows">'),fc.constants.repeatableInDOM.indexOf(parseInt(u))>-1&&(parseInt(u)===fc.constants.repeatablePredetermined?i+=outputRepeatablePreDetermined(getId(g),getConfig(g,fc.constants.repeatableLinkedTo,1),b):(t=void 0!==fc.fields[getId(g)]&&$.isArray(fc.fields[getId(g)])?fc.fields[getId(g)].length:getConfig(g,fc.constants.repeatableLinkedTo,1),i+=outputRepeatablePreDetermined(getId(g),t,b))),fc.constants.repeatableInDOM.indexOf(parseInt(u))>=0&&(i+="</div>")),getConfig(g,"repeatable",!1)&&(0===u.length||fc.constants.repeatableWithButton.indexOf(u)>=0)&&(i+='<div class="fc-link"><a href="#" class="fc-click fc-add" data-id="'+k+'">',i+=getConfig(g,"addButtonText","").length>0?getConfig(g,"addButtonText"):fc.lang.addFieldTextValue,i+="</a></div>",1===parseInt(u)&&(i+='<div class="fc-link"><a href="#" class="fc-click fc-remove" data-id="'+k+'">',i+=getConfig(g,"removeButtonText","").length>0?getConfig(g,"removeButtonText"):fc.lang.removeFieldTextValue,i+="</a></div>")),i+='<div class="fc-empty"></div>',i+="</div></div></div>",w+=i)}return w},renderRepeatableIterator=function(a,b,c){void 0===b&&(b="");var d,e,f,g,h,i,j,k,l=(getConfig(a,"required",!1),b+getId(a)),m="",n=getConfig(a,"sourceField","");if(void 0===fc.fields[n])return m;if(d=fc.fields[n],!$.isArray(d)||0===d.length)return"";for(g=getFieldTags(),j=getFieldTagValues(),m+='<div class="fc-iterator">',e=0;e<d.length;e+=1){f=fc.fields[n][e];for(h in f)f.hasOwnProperty(h)&&void 0!==g[h]&&(f[g[h]]=f[h]);i=$.extend({},j,f),k='<div class="fc-iterator-row">',k+=renderFields(a.config.targetGrouplet.field,c,[l,e],!0,getId(a)),k+="</div>",k=replaceTokensInDom($(k),i),m+=k.prop("outerHTML")}return m+="</div>"},renderApiLookupField=function(a,b){void 0===b&&(b="");var c="boolean"==typeof a.config.required?a.config.required:!1,d=b+a._id.$id,e='<input class="fc-fieldinput" type="text" formcorp-data-id="'+d+'" data-required="'+c+'" placeholder="'+getConfig(a,"placeholder")+'">';return e},renderNumericSliderField=function(a,b){void 0===b&&(b="");var c="boolean"==typeof a.config.required?a.config.required:!1,d=parseInt(getConfig(a,"step",1)),e=parseInt(getConfig(a,"min",1)),f=parseInt(getConfig(a,"max",10)),g='<input class="fc-fieldinput" type="range" min="'+e+'" max="'+f+'" step="'+d+'" formcorp-data-id="'+getId(a)+'" data-required="'+c+'" placeholder="'+getConfig(a,"placeholder")+'">';return g+='<span class="fc-numeric-outcome"></span>'},initGreenIdFieldInDOM=function(a,b){var c="";return"string"!=typeof b&&(b=""),c+='<div class="fc-init-green-id" fc-prefix="'+b+'">Initialising...</div>'},greenIdFieldHeader=function(a){var b="",c="",d="",e=fc.fields[a].values;return"string"==typeof e.title&&e.title.length>0&&(c+=(c.length>0?" ":"")+e.title),"string"==typeof e.firstName&&e.firstName.length>0&&(c+=(c.length>0?" ":"")+e.firstName),"string"==typeof e.middleName&&e.middleName.length>0&&(c+=(c.length>0?" ":"")+e.middleName),"string"==typeof e.surname&&e.surname.length>0&&(c+=(c.length>0?" ":"")+e.surname),"string"==typeof e.address&&e.address.length>0&&(d+=(d.length>0?" ":"")+e.address),"string"==typeof e.suburb&&e.suburb.length>0&&(d+=(d.length>0?", ":"")+e.suburb),"string"==typeof e.postcode&&e.postcode.length>0&&(d+=(d.length>0?", ":"")+e.postcode),"string"==typeof e.state&&e.state.length>0&&(d+=(d.length>0?"<br>":"")+e.state),"string"==typeof e.country&&e.country.length>0&&(d+=(d.length>0?", ":"")+e.country),b="<h5>Complete verification for: </h5><p>"+c+"<br>"+d+"</p>"},renderGreenIdField=function(a,b,c){if("boolean"!=typeof c&&(c=!1),"string"!=typeof b&&(b=""),!c&&("object"!=typeof fc.fields[b+getId(a)]||void 0===fc.fields[b+getId(a)].result||"undefined"===fc.fields[b+getId(a)].result.userId))return initGreenIdFieldInDOM(a,b);var d,e,f,g,h,i,j="",k=[{"class":"fc-drivers-license",title:fc.lang.greenID.options.driversLicense.title,desc:fc.lang.greenID.options.driversLicense.body,icon:fc.lang.greenID.options.driversLicense.icon},{"class":"fc-passport-verification",title:fc.lang.greenID.options.passport.title,desc:fc.lang.greenID.options.passport.body,icon:fc.lang.greenID.options.passport.icon},{"class":"fc-skip-verification",title:fc.lang.greenID.options.skip.title,desc:fc.lang.greenID.options.skip.body,icon:fc.lang.greenID.options.skip.icon}],l="",m=fc.fields[b+getId(a)],n=["nswrego","warego","actrego","vicrego","sarego","qldrego"];if(getConfig(a,"showSummaryInHeader",!1)&&(d=greenIdFieldHeader(b+getId(a)),j+='<div class="fc-green-id-el fc-green-id-header-summary">'+d+"</div>"),j+='<p class="fc-green-id-el fc-green-id-sources-required" data-for="'+(b+getId(a))+'">To complete digital verification for this individual, you must verify <span></span> from the options below.</p>',j+='<div class="fc-green-id-skipped-container fc-green-id-el"><div class="alert alert-success" role="alert">You have skipped verification for this user.</div></div>',j+='<div class="fc-greenid-successfully-verified fc-green-id-el">You have successfully been verified.</div>',j+='<div class="fc-greenid-verification-error fc-green-id-el">',j+='<div class="alert alert-danger" role="alert"><strong>Uh oh!</strong> Unfortunately we weren\'t able to sufficiently verify your credentials to confirm your identity.</div>',j+="<h5>What to do?</h5>",j+="<p>Please verify the correctness of the details below. If you notice an error, please go back in the form to edit these details and try re-commencing verification.</p>",j+="<h5>Please confirm the following details are correct: </h5>",j+='<div class="fc-greenid-value-summary fc-green-id-el"></div>',j+="<h5>They are correct, what do I do now?</h5>",j+="<p>We'll have to attempt to verify you manually. Please attach a copy of your drivers licence and/or passport to your printed application and mail it through to us.</p>",j+="</div>",void 0!==m&&"object"==typeof m.result&&Object.keys(m.result).length>0){for(e=0;e<k.length;e+=1)l+='["'+k[e].title+'","'+k[e].desc+'","'+k[e].icon+'", "","'+k[e]["class"]+'"]\n';if(f={_id:{$id:b+getId(a)+"_rootSelection"},config:a.config},f.config.options=l,f.config.boxesPerRow=k.length,f.config.buttonText="Select",g=renderContentRadioList(f),h=$(g),h.find(".fc-content-content").append('<div class="fc-successfully-verified"> Successfully verified</div>'),h.find(".fc-content-content").append('<div class="fc-locked-out-msg"> You have been locked out from using this data source.</div>'),void 0!==m&&void 0!==m.result&&"object"==typeof m.result.sources&&h.find(".fc-drivers-license").length>0)for(e=0;e<n.length;e+=1)i=n[e],"object"==typeof m.result.sources[i]&&void 0!==m.result.sources[i].passed&&["true",!0].indexOf(m.result.sources[i].passed)>-1?h.find(".fc-drivers-license").addClass("fc-verified"):"object"==typeof m.result.sources[i]&&["LOCKED_OUT","FAILED"].indexOf(m.result.sources[i].state)>-1&&h.find(".fc-drivers-license").addClass("fc-locked-out");void 0!==m&&void 0!==m.result&&"object"==typeof m.result.sources&&h.find(".fc-passport-verification").length>0&&("object"==typeof m.result.sources.passport&&void 0!==m.result.sources.passport.passed&&["true",!0].indexOf(m.result.sources.passport.passed)>-1?h.find(".fc-passport-verification").addClass("fc-verified"):"object"==typeof m.result.sources.passport&&["LOCKED_OUT","FAILED"].indexOf(m.result.sources.passport.state)>-1&&h.find(".fc-passport-verification").addClass("fc-locked-out")),void 0!==m&&void 0!==m.result&&"object"==typeof m.result.sources&&h.find(".fc-visa-verification").length>0&&("object"==typeof m.result.sources.visa&&void 0!==m.result.sources.visa.passed&&["true",!0].indexOf(m.result.sources.visa.passed)>-1?h.find(".fc-visa-verification").addClass("fc-verified"):"object"==typeof m.result.sources.visa&&["LOCKED_OUT","FAILED"].indexOf(m.result.sources.visa.state)>-1&&h.find(".fc-visa-verification").addClass("fc-locked-out")),j+='<div class="fc-greenid-verification-packages fc-green-id-el">',j+=h.prop("outerHTML"),j+='<div class="progress fc-greenid-progress fc-green-id-el"><div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0;">0%</div></div>',j+='<div class="fc-greenid-error-summary fc-green-id-el"></div>',j+="</div>",j+='<div class="fc-greenid-options fc-green-id-el"></div>'}return j},renderPageSections=function(a){var b,c,d,e="";for(b=0;b<a.length;b+=1)c=a[b],d='<div class="fc-section fc-section-'+getId(c)+'" formcorp-data-id="'+getId(c)+'">',d+='<div class="fc-section-header">',"string"==typeof c.label&&c.label.length>0&&(d+='<div class="fc-section-label">',d+="<h4>"+c.label+"</h4>",d+="</div>"),"string"==typeof c.description&&c.description.length>0&&(d+='<div class="fc-section-desc">',d+="<p>"+c.description+"</p>",d+="</div>"),d+="</div>",void 0!==c.field&&c.field.length>0&&(d+=renderFields(c.field,c)),d+='<div class="fc-section-end"></div>',d+="</div>",e+=d;return e},hasNextPage=function(){return nextPage(!1)},renderPage=function(a){var b,c='<div class="fc-page fc-page-'+getId(a.page)+'" data-page-id="'+getId(a.page)+'">',d=fc.lang.submitText,e=["fc-submit"];return c+="<h1>"+a.stage.label+"</h1>",a=a.page,fc.pageId=a._id.$id,"string"==typeof a.label&&a.label.length>0&&(c+="<h2>"+a.label+"</h2>"),"string"==typeof a.description&&a.description.length>0&&(c+="<h3>"+a.description+"</h3>"),a.section.length>0&&(c+=renderPageSections(orderObject(a.section))),b=nextPage(!1,!0),("object"==typeof b||isSubmitPage(a)===!1&&b===!1)&&((isSubmitPage(a)===!1&&b===!1||"object"==typeof b.page&&isSubmitPage(b.page))&&(d=fc.lang.submitFormText,e.push("fc-submit-form")),isSubmitPage(a)||(c+='<div class="fc-pagination">',fc.config.showPrevPageButton===!0&&"object"==typeof fc.prevPages[fc.pageId]&&(c+='<div class="fc-prev-page">',c+='<input type="submit" value="'+fc.lang.prevButtonText+'" class="fc-btn">',c+="</div>"),c+='<div class="'+e.join(" ")+'">',c+='<input type="submit" value="'+d+'" class="fc-btn">',c+="</div>")),c+='<div class="fc-break"></div></div>',c+="</div>"},flushSectionVisibility=function(){$(fc.jQueryContainer).find(".fc-section").each(function(){var dataId=$(this).attr("formcorp-data-id"),section,visible;"string"==typeof dataId&&0!==dataId.length&&"object"==typeof fc.sections[dataId]&&(section=fc.sections[dataId],"string"==typeof section.visibility&&section.visibility.length>0&&(visible=eval(section.visibility),visible?$("div.fc-section[formcorp-data-id="+dataId+"]").removeClass("fc-hide"):$("div.fc-section[formcorp-data-id="+dataId+"]").addClass("fc-hide")))})},flushRepeatableGroupletVisibility=function(dataId,field){var visible,groupletID,index,fieldID,parts,visibility,re;dataId.indexOf(fc.constants.prefixSeparator)>-1&&(parts=dataId.split(fc.constants.prefixSeparator),parts.length>=2&&(groupletID=parts[0],field=fc.fieldSchema[groupletID],void 0!==field&&"grouplet"===field.type&&getConfig(field,"repeatable",!1)&&fc.constants.repeatableInDOM.indexOf(parseInt(getConfig(field,"repeatableStyle",0)))>=0&&(index=parts[1],fieldID=parts[2],void 0!==fc.fieldSchema[fieldID]&&(visibility=getConfig(fc.fieldSchema[fieldID],"visibility",""),visibility.length>0&&(re=new RegExp(groupletID+fc.constants.prefixSeparator,"g"),visibility=visibility.replace(re,"####"),visibility=visibility.replace(/#{4,}/g,[groupletID,index,""].join(fc.constants.prefixSeparator)),visible=eval(visibility),"boolean"==typeof visible&&(visible?$('div[fc-data-group="'+dataId+'"]').removeClass("fc-hide"):$('div[fc-data-group="'+dataId+'"]').addClass("fc-hide")))))))},flushFieldVisibility=function(){$(fc.jQueryContainer).find(".fc-field").each(function(){var dataId=$(this).attr("fc-data-group"),field,visible,logic,logicMatches,processed=[],temporaryId,iter,parts,replace,re;if("string"==typeof dataId&&0!==dataId.length&&"object"==typeof fc.fieldSchema[dataId]){if(field=fc.fieldSchema[dataId],"string"==typeof field.config.visibility&&field.config.visibility.length>0?logic=toBooleanLogic(field.config.visibility):"object"==typeof field.config.visibility&&(logic=field.config.visibility),"string"==typeof dataId&&fc.withinIterator[dataId]===!0&&(logicMatches=logic.match(/"[a-f0-9]{24}"/g),$.isArray(logicMatches)&&logicMatches.length>0))for(processed=[],iter=0;iter<logicMatches.length;iter+=1)temporaryId=logicMatches[iter].replace(/"/g,"",logicMatches[iter]),processed.indexOf(temporaryId)<0&&(void 0===fc.fieldSchema[temporaryId]&&(parts=dataId.split(fc.constants.prefixSeparator),parts.length>=2&&(replace=[parts[0],parts[1],temporaryId].join(fc.constants.prefixSeparator),re=new RegExp(temporaryId,"g"),logic=logic.replace(re,replace))),processed.push(temporaryId));visible=eval(logic),"boolean"==typeof visible&&(visible?$('div[fc-data-group="'+dataId+'"]').removeClass("fc-hide"):$('div[fc-data-group="'+dataId+'"]').addClass("fc-hide")),flushRepeatableGroupletVisibility(dataId,field)}})},flushVisibility=function(){flushSectionVisibility(),flushFieldVisibility()},updateMobileFieldsVisibility=function(){$(fc.jQueryContainer).find(".fc-field.fc-mobile-field").each(function(){fc.mobileView===!0&&$(this).hasClass("fc-hide")?$(this).removeClass("fc-hide"):fc.mobileView!==!1||$(this).hasClass("fc-hide")||$(this).addClass("fc-hide")}),$(fc.jQueryContainer).find(".fc-field.fc-desktop-field").each(function(){fc.mobileView!==!0||$(this).hasClass("fc-hide")?fc.mobileView===!1&&$(this).hasClass("fc-hide")&&$(this).removeClass("fc-hide"):$(this).addClass("fc-hide")}),flushVisibility(),fc.inMobileView=fc.mobileView},render=function(a,b){if(fc.expired!==!0){var c=getPageById(a),d="";void 0===c&&console.log("FC Error: Page not found"),"object"==typeof c.stage&&(b===!0&&void 0!==fc.currentPage&&(fc.prevPages[a]=getPageById(fc.currentPage)),fc.currentPage=a,updateFieldSchema(c.stage),d+=renderPage(c),!fc.config.onePage||isSubmitPage(c.page)?$(fc.jQueryContainer+" .render").html(d):($(fc.jQueryContainer+" .render").append(d),fc.pageOrders.push(a),$(fc.jQueryContainer).find(".fc-pagination").hide(),$(fc.jQueryContainer).find(".fc-pagination:last").show()),setFieldValues(),flushVisibility(),fc.ignoreHashChangeEvent=!0,fc.config.updateHash&&(window.location.hash=a),updateMobileFieldsVisibility(),$(fc.jQueryContainer).trigger(fc.jsEvents.onFinishRender),initGreenIdDOMFields())}},nextPage=function(shouldRender,returnPage,pageId){"boolean"!=typeof shouldRender&&(shouldRender=!0),"boolean"!=typeof returnPage&&(returnPage=!1),"string"!=typeof pageId&&(pageId=fc.currentPage);var currentPage=getPageById(pageId),id,foundStage=!1,x,condition,stage;if(currentPage&&currentPage.page){if("object"==typeof currentPage.page.toCondition&&Object.keys(currentPage.page.toCondition).length>0)for(id in currentPage.page.toCondition)if(currentPage.page.toCondition.hasOwnProperty(id)&&(condition=currentPage.page.toCondition[id],eval(condition)))return shouldRender&&render(id,!0),returnPage?getPageById(id):!0;for(x=0;x<fc.schema.stage.length;x+=1){if(stage=fc.schema.stage[x],foundStage&&"object"==typeof stage.page&&stage.page.length>0)return shouldRender&&render(getId(stage.page[0]),!0),returnPage?getPageById(getId(stage.page[0])):!0;getId(stage)===getId(currentPage.stage)&&(foundStage=!0)}return!1}},checkAutoLoad=function(){return fc.config.autoLoadPages?hasNextPage()&&validForm('[data-page-id="'+fc.currentPage+'"]',!1)?(loadNextPage(!1),!0):!1:void 0},valueChanged=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=fc.fieldSchema[a],A=!1;if("boolean"!=typeof c&&(c=!1),c||void 0!==z){if("string"==typeof b&&(p=getConfig(z,"prePopulate",[]),$.isArray(p)&&p.length>0))for(n=0;n<p.length;n+=1)r=p[n],(void 0===fc.fields[r]||0===fc.fields[r].length)&&(fc.fields[r]=b,fc.saveQueue[r]=b);if(c||void 0===fc.fields[a]||fc.fields[a]!==b){if($(fc.jQueryContainer).trigger(fc.jsEvents.onFieldValueChange,[a,b]),fieldIsRepeatable(a)||fieldParentIsRepeatable(a)||(fc.fields[a]=b,a.indexOf(fc.constants.prefixSeparator)>-1&&saveOriginalGroupletValue(a,b),flushVisibility()),a.indexOf(fc.constants.prefixSeparator)>-1&&(m=a.split(fc.constants.prefixSeparator),void 0!==fc.fieldSchema[m[0]]&&m.length>1))if("repeatableIterator"===fc.fieldSchema[m[0]].type){for(void 0!==fc.fields[m[0]]&&$.isArray(fc.fields[m[0]])||(fc.fields[m[0]]=[]),o=fc.fields[m[0]],n=1;n<m.length;n+=1)n===m.length-1?o[m[n]]=b:(void 0===o[m[n]]&&(o[m[n]]={}),o=o[m[n]]);fc.saveQueue[m[0]]=fc.fields[m[0]]}else if("grouplet"===fc.fieldSchema[m[0]].type&&$.isNumeric(m[1])){if(y=m[0],fc.constants.repeatableInDOM.indexOf(parseInt(getConfig(fc.fieldSchema[y],"repeatableStyle",0)))>=0){if(void 0!==fc.fields[y]&&$.isArray(fc.fields[y])||(fc.fields[y]=[]),x=parseInt(m[1]),"object"!=typeof fc.fields[y][x])for(n=0;x>=n;n+=1)"object"!=typeof fc.fields[y][n]&&fc.fields[y].push({});fc.fields[y][x][m[2]]=b}fc.saveQueue[y]=fc.fields[y]}if(flushActivePageForField(a,!0),a.indexOf(fc.constants.prefixSeparator)>-1&&(f=a.split(fc.constants.prefixSeparator),g=f[0],h=fc.fieldSchema[g],void 0!==h&&getConfig(h,"repeatable",!1)===!0)){if(d=fieldErrors(a),fc.config.realTimeValidation===!0){if(void 0!==d&&d.length>0)return logEvent(fc.eventTypes.onFieldError,{fieldId:a,errors:d}),removeFieldSuccess(a),void showFieldError(a,d);removeFieldError(a),showFieldSuccess(a)}return void(fc.config.saveInRealTime===!0&&(fc.saveQueue[a]=b))}if(fieldIsRepeatable(a)||(fc.fields[a]=b,flushVisibility(),d=fieldErrors(a),fc.config.realTimeValidation===!0&&(void 0!==d&&d.length>0?(logEvent(fc.eventTypes.onFieldError,{fieldId:a,errors:d}),removeFieldSuccess(a),showFieldError(a,d)):(showFieldSuccess(a),removeFieldError(a))),fc.config.saveInRealTime===!0&&(fc.saveQueue[a]=b),j=nextVisibleField(a),e={fieldId:a,success:!d||0===d.length},j&&(e.nextField=j),e.success&&(e.completionTime=(Date.now()-fc.lastCompletedTimestamp)/1e3,fc.lastHesitationTime>0&&(e.completionTime-=fc.lastHesitationTime),fc.lastCompletedField=a,fc.lastCompletedTimestamp=Date.now()),logEvent(fc.eventTypes.onValueChange,e)),i=getFieldPageId(a),l=getPageById(i),k=!l||!l.page||!l.page.preventAutoLoad||"1"!==l.page.preventAutoLoad,fc.config.autoLoadPages&&i===fc.currentPage&&k&&(A=checkAutoLoad()),getConfig(fc.fieldSchema[a],"allowAutoScroll",!0)&&fc.config.autoScrollToNextField&&!A&&j&&j.length>0&&autoScrollToField(a,j),q=getConfig(z,"tag",""),q.length>0&&void 0!==fc.reRenderOnValueChange[q])for(n=0;n<fc.reRenderOnValueChange[q].length;n+=1)r=fc.reRenderOnValueChange[q][n],s=$(fc.jQueryContainer).find('.fc-field[fc-data-group="'+r+'"]'),s.length>0&&(w=s.attr("fc-belongs-to"),v=fc.fieldSchema[r],void 0!==v&&"grouplet"===v.type&&(t=renderFields([v],w),t.length>0&&(u=$(t),s.html($(t).html()),setFieldValues(s))))}}},setValueUpdate=function(a){var b,c=a.val(),d=a.attr("formcorp-data-id"),e=fc.fieldSchema[d];return e&&e.type&&"abnVerification"===e.type?(b=a.parent().find(".fc-button"),0===c.length||-1===fc.validAbns.indexOf(c)?b.hasClass("fc-hide")&&b.removeClass("fc-hide"):(b.addClass("fc-hide"),valueChanged(d,c),removeFieldError(d)),void(fc.fields[d]=c)):void(c!==fc.fields[d]&&valueChanged(d,c))},registerValueChangedListeners=function(){fc.config.autoShiftFocusOnEnter&&$(fc.jQueryContainer).on("keypress","input[type=text].fc-fieldinput",function(a){if(a.which===fc.constants.enterKey){var b,c=$(this).attr("formcorp-data-id"),d=nextVisibleField(c,!1),e=!1,f=$(this).val(),g=$(this).attr("formcorp-data-id");if(!fieldIsValid(g,f))return;d&&d.length>0&&(b=$('.fc-fieldinput[type=text][formcorp-data-id="'+d+'"]'),b.length>0&&(b.focus(),e=!0)),e||$(this).blur(),f!==fc.fields[g]&&valueChanged(g,f),d&&d.length>0&&fc.config.autoScrollToNextField&&autoScrollToField(c,d)}}),$(fc.jQueryContainer).on("change","input[type=text].fc-fieldinput, input[type=radio].fc-fieldinput, input[type=range].fc-fieldinput",function(){setValueUpdate($(this))}),$(fc.jQueryContainer).on("input","input[type=range].fc-fieldinput",function(){setRangeValue($(this))}),$(fc.jQueryContainer).on("change paste blur",".fc-field-text input[type=text].fc-fieldinput",function(){var a=$(this).val(),b=$(this).attr("formcorp-data-id");a!==fc.fields[b]&&valueChanged(b,a)}),$(fc.jQueryContainer).on("click",".fc-field-abnVerification .fc-button",function(){var a,b=$(this).parent().find("input.fc-fieldinput"),c=b.attr("formcorp-data-id"),d=b.parent().find(".fc-loading"),e=this;return removeFieldError(c),d&&d.length>0&&d.removeClass("fc-hide"),validateAbn(c,b.val(),function(f){var g,h,i,j;d&&d.length>0&&d.addClass("fc-hide"),"object"==typeof f&&(f.success&&[!0,"true"].indexOf(f.success)>-1?(a=getConfig(fc.fieldSchema[c],"mapBusinessName",""),a.length>0&&f.entityName&&f.entityName.length>0&&(g=getFieldByTag(a),g&&null!==g&&"object"==typeof g&&(h=getId(g),h.length>0&&(!fc.fields[h]||"string"==typeof fc.fields[h]&&0===fc.fields[h].length)&&(i="object"==typeof f.businessName&&f.businessName.length>0?f.businessName[0]:f.entityName,fc.fields[h]=i,j=$('.fc-field[fc-data-group="'+h+'"]'),setFieldValue(j,h)))),fc.validAbns.push(b.val()),$(e).remove(),valueChanged(c,b.val())):showFieldError(c,[f.message]))}),!1}),$(fc.jQueryContainer).on("click","button.fc-fieldinput.fc-button",function(){var a,b=$(this).text(),c=$(this).attr("formcorp-data-id"),d=$(this).parent().parent(),e=$('.fc-field[fc-data-group="'+c+'"]'),f=$(this).hasClass("checked");return $(this).attr("data-field-value")&&(b=decodeURIComponent($(this).attr("data-field-value"))),fc.fieldSchema[c]&&fc.fieldSchema[c].type?(["contentRadioList","optionTable"].indexOf(fc.fieldSchema[c].type)>-1?(b=decodeURIComponent($(this).attr("data-field-value")),getConfig(fc.fieldSchema[c],"allowMultiple",!1)?(a=fc.fields[c]||[],a.indexOf(b)<0?f||a.push(b):f&&delete a[a.indexOf(b)],b=a):e.find("button.checked").removeClass("checked")):d.hasClass("fc-radio-option-buttons")&&d.find(".checked").removeClass("checked"),$(this).toggleClass("checked"),valueChanged(c,b),!1):void $(fc.jQueryContainer).trigger(fc.jsEvents.onButtonUnknownClick,[$(this)])}),$(fc.jQueryContainer).on("change","select.fc-fieldinput",function(){valueChanged($(this).attr("formcorp-data-id"),$(this).find("option:selected").val())}),$(fc.jQueryContainer).on("change",".fc-field-checkboxList :checkbox",function(){valueChanged($(this).attr("formcorp-data-id"),getFieldValue($(this)))})},validateModal=function(a){var b,c,d,e,f=!0,g={};return"boolean"!=typeof a&&(a=!1),$(".fc-modal [formcorp-data-id]").each(function(){if("true"===$(this).attr("data-required")){if(fieldIsEmpty($(this)))return void(f=!1);b=$(this).attr("formcorp-data-id"),c=getFieldValue($(this)),d=fc.fieldSchema[b],e=getCustomErrors(d,c),e.length>0?(f=!1,g[b]=e,a&&(removeFieldSuccess(b),showFieldError(b,e))):(showFieldSuccess(b),removeFieldError(b))}}),f},showDeleteDialog=function(){return $(".fc-modal .modal-header h2").text(fc.lang.deleteDialogHeader),$(".fc-modal .modal-body").html(fc.lang.deleteSignatoryDialogText),$(".fc-modal .modal-footer .fc-btn-add").text(fc.lang.confirm),$(".fc-modal").addClass("fc-show"),!1},showRepeatableEditDialog=function(){var a=$("<div />").append($('[fc-data-group="'+fc.modalMeta.fieldId+'"] > .fc-fieldcontainer').clone()),b={},c=$(".fc-modal .modal-body");return a.find(".fc-data-repeatable-grouplet").removeClass("fc-data-repeatable-grouplet"),fc.fields[fc.modalMeta.fieldId]&&fc.fields[fc.modalMeta.fieldId][fc.modalMeta.index]&&(b=fc.fields[fc.modalMeta.fieldId][fc.modalMeta.index]),$(".fc-modal .modal-header h2").text(fc.lang.editDialogHeader),c.html(a.html()),c.find("div[fc-data-group]").each(function(){var a=$(this).attr("fc-data-group");void 0!==b[a]&&setDomValue(this,b[a])}),$(".fc-modal .modal-footer .fc-btn-add").text(fc.lang.confirm),$(".fc-modal").addClass("fc-show"),!1},registerRepeatableGroupletListeners=function(){$(fc.jQueryContainer).on("click",".fc-summary-options .fc-delete",function(){return fc.modalState=fc.states.DELETE_REPEATABLE,fc.modalMeta={index:$(this).parent().attr("data-index"),fieldId:$(this).parent().attr("data-field-id")},showDeleteDialog(),!1}),$(fc.jQueryContainer).on("click",".fc-summary-options .fc-edit",function(){return fc.modalState=fc.states.EDIT_REPEATABLE,fc.modalMeta={index:$(this).parent().attr("data-index"),fieldId:$(this).parent().attr("data-field-id")},showRepeatableEditDialog(),!1})},addRepeatableRow=function(){var a=validateModal(),b={},c=$(".fc-modal .modal-body > div");return a?(c.removeClass("fc-error"),$(fc.jQueryContainer).find(".fc-modal [formcorp-data-id]").each(function(){var a=$(this).attr("formcorp-data-id");b[a]=getFieldValue($(this))}),"object"!=typeof fc.fields[fc.activeModalField]&&(fc.fields[fc.activeModalField]=[]),$.isArray(fc.fields[fc.activeModalField])||(fc.fields[fc.activeModalField]=[]),fc.fields[fc.activeModalField].push(b),getConfig(fc.fieldSchema[fc.activeModalField],"renderRepeatableTable",!1)&&$('[fc-data-group="'+fc.activeModalField+'"] .fc-summary').html(renderRepeatableTable(fc.activeModalField,fc.fields[fc.activeModalField])),void hideModal()):(c.addClass("fc-error"),!1)},editRepeatableRow=function(){var a,b=$(".fc-modal").find(".modal-body > .fc-fieldcontainer"),c={};b&&b.length>0&&validateModal(!0)&&($(fc.jQueryContainer).find(".fc-modal [formcorp-data-id]").each(function(){var a=$(this).attr("formcorp-data-id");c[a]=getFieldValue($(this))}),"object"!=typeof fc.fields[fc.activeModalField]&&(fc.fields[fc.activeModalField]=[]),fc.fields[fc.modalMeta.fieldId]&&fc.fields[fc.modalMeta.fieldId][fc.modalMeta.index]&&(fc.fields[fc.modalMeta.fieldId][fc.modalMeta.index]=c,fc.saveQueue[fc.modalMeta.fieldId]=fc.fields[fc.modalMeta.fieldId],a=renderRepeatableTable(fc.modalMeta.fieldId,fc.fields[fc.modalMeta.fieldId]),$('[fc-data-group="'+fc.modalMeta.fieldId+'"] .fc-summary').html(a),hideModal()))},deleteRepeatableRow=function(){fc.fields[fc.modalMeta.fieldId].splice(fc.modalMeta.index,1),fc.saveQueue[fc.modalMeta.fieldId]=fc.fields[fc.modalMeta.fieldId];var a=renderRepeatableTable(fc.modalMeta.fieldId,fc.fields[fc.modalMeta.fieldId]);$('[fc-data-group="'+fc.modalMeta.fieldId+'"] .fc-summary').html(a),hideModal()},loadNextPage=function(a){if(void 0===a&&(a=!0),logEvent(fc.eventTypes.onNextPageClick),!validForm(fc.jQueryContainer,a))return logEvent(fc.eventTypes.onNextPageError),a&&fc.config.scrollOnSubmitError&&scrollToFirstError(),!1;var b,c,d,e,f,g={};$("[formcorp-data-id]").each(function(){d=$(this).attr("formcorp-data-id"),$(this).hasClass("fc-data-repeatable-grouplet")?void 0===g[d]&&(g[d]=fc.fields[d]):(g[d]=getFieldValue($(this)),fc.fields[d]=g[d])}),b={form_id:fc.formId,page_id:fc.pageId,form_values:g},c=nextPage(!1,!0),(c&&"object"==typeof c.page&&isSubmitPage(c.page)||c===!1)&&(b.complete=!0),$(fc.jQueryContainer).trigger(fc.jsEvents.onLoadingPageStart),$(fc.jQueryContainer).find(".fc-loading-screen").addClass("show"),api("page/submit",b,"put",function(a){var b,d;if("boolean"==typeof a.success&&a.success){if(fc.lastActivity=(new Date).getTime(),$(fc.jQueryContainer).find(".fc-loading-screen").removeClass("show"),$(fc.jQueryContainer).trigger(fc.jsEvents.onLoadingPageEnd),void 0!==a.criticalErrors&&"object"==typeof a.criticalErrors&&a.criticalErrors.length>0){var g,h,i,j,k=!1;for(g=0;g<a.criticalErrors.length;g+=1)if(h=$('.fc-field[fc-data-group="'+a.criticalErrors[g]+'"]'),h.length>0&&!h.hasClass("fc-hide")){if(i=h.attr("fc-belongs-to"),j=$(fc.jQueryContainer).find(".fc-section[formcorp-data-id="+i+"]"),j.length>0){if(!j.hasClass("fc-hide"))return;k=!0}if(k===!1)return void console.log("[FC](1) Server side validation errors occurred, client should have caught this")}}if(hasNextPage())return e=fc.currentPage,nextPage(),f=fc.currentPage,$(fc.jQueryContainer).trigger(fc.jsEvents.onNextPage,[e,f]),$(fc.jQueryContainer).trigger(fc.jsEvents.onPageChange,[e,f]),logEvent(fc.eventTypes.onNextPageSuccess,{from:e,to:f,timeSpent:(Date.now()-fc.nextPageLoadedTimestamp)/1e3}),fc.nextPageLoadedTimestamp=Date.now(),"object"==typeof c.page&&isSubmitPage(c.page)&&($(fc.jQueryContainer).trigger(fc.jsEvents.onFormComplete),logEvent(fc.eventTypes.onFormComplete)),void(fc.nextPageButtonClicked&&fc.config.onePage&&fc.config.smoothScroll&&(b=$(".fc-page:last"),b&&b.length>0&&(d=parseInt(b.offset().top,10)+parseInt(fc.config.scrollOffset,10),0===$(document).scrollTop()&&(d+=fc.config.initialScrollOffset),void 0!==fc.config.conditionalHtmlScrollOffset["class"]&&$("html").hasClass(fc.config.conditionalHtmlScrollOffset["class"])&&(d+=fc.config.conditionalHtmlScrollOffset.offset),scrollToOffset(d),fc.nextPageButtonClicked=!1)));$(fc.jQueryContainer+" .render").html(fc.lang.formCompleteHtml),$(fc.jQueryContainer).trigger(fc.jsEvents.onFormComplete),logEvent(fc.eventTypes.onFormComplete)}else logEvent(fc.eventTypes.onNextPageError)})},registerOnePageListeners=function(){$(document).on("scroll",function(){var a,b,c,d;for(a=0;a<fc.pageOrders.length;a+=1)d=$('[data-page-id="'+fc.pageOrders[a]+'"]'),d.length>0&&(b=parseInt($('[data-page-id="'+fc.pageOrders[a]+'"]').offset().top,10),b+=parseInt(fc.config.scrollOffset,10)-fc.config.activePageOffset,$(document).scrollTop()>b&&(void 0===fc.activePage&&(fc.activePage=fc.pageOrders[a]),c=fc.pageOrders[a]));void 0!==c&&fc.activePage!==c&&($(fc.jQueryContainer).trigger(fc.jsEvents.onPageChange,[fc.activePage,c]),fc.activePage=c)})},registerEventListeners=function(){$(fc.jQueryContainer).on("click","div.fc-submit input[type=submit]",function(){return fc.nextPageButtonClicked=!0,loadNextPage(),!1}),fc.config.deleteSessionOnComplete&&$(fc.jQueryContainer).on(fc.jsEvents.onFormComplete,function(){deleteSession(!1)}),$(fc.jQueryContainer).on("click",".fc-prev-page",function(){return fc.config.showPrevPageButton!==!0?!1:($(fc.jQueryContainer).trigger(fc.jsEvents.onPrevPage),window.history.back(),!1)}),$(fc.jQueryContainer).on("click",".fc-desc a",function(){var a=$(this).attr("href");return window.open(a),!1}),registerValueChangedListeners(),$(window).on("hashchange",function(){var a=window.location.hash.substr(1),b=$(fc.jQueryContainer).find('.fc-page[data-page-id="'+a+'"]');0===b.length&&fc.ignoreHashChangeEvent===!1&&fc.oldHash!==a&&"object"==typeof fc.pages[a]&&render(a),fc.config.smoothScroll&&fc.oldHash&&setTimeout(function(a){smoothScrollToPage(a)}.bind(this,a),fc.config.scrollWait),fc.oldHash=a,fc.ignoreHashChangeEvent=!1}),$(fc.jQueryContainer).on("click",".fc-repeatable a.fc-click.fc-add",function(){var a,b,c,d,e,f=$(this).attr("data-id"),g="",h=fc.fieldSchema[f];return void 0!==h&&getConfig(h,"repeatable",!1)&&(a=parseInt(getConfig(h,"repeatableStyle",0)),0===a?(fc.activeModalField=f,fc.modalState=fc.states.ADD_REPEATABLE,g=$("<div />").append($('[fc-data-group="'+f+'"] > .fc-fieldcontainer').clone()).html(),$(".fc-modal .modal-body").html(g),$(".fc-modal").addClass("fc-show")):1===a&&(c=$(fc.jQueryContainer).find('.fc-field[fc-data-group="'+f+'"]'),b=c.attr("fc-belongs-to"),d=$(fc.jQueryContainer).find('.fc-field[fc-data-group="'+f+'"] .fc-repeatable-rows'),d.length>0&&(e=d.find(".fc-repeatable-row").length,e<getConfig(h,"maxRows",1e5)&&(g=outputRepeatablePreDetermined(f,e+1,fc.sections[b]),d.html(g),setFieldValues(d),flushFieldVisibility(),flushActivePageForField(f,!0)),e+1>=getConfig(h,"maxRows",1e5)?c.find(".fc-add").addClass("fc-hide"):c.find(".fc-remove.fc-hide")&&c.find(".fc-remove.fc-hide").removeClass("fc-hide")))),$(fc.jQueryContainer).trigger(fc.jsEvents.onDynamicRowAdded),!1}),$(fc.jQueryContainer).on("click",".fc-repeatable a.fc-click.fc-remove",function(){
var a,b,c,d,e,f,g,h=$(this).attr("data-id"),i="",j=fc.fieldSchema[h];if(void 0!==j&&getConfig(j,"repeatable",!1)&&(a=parseInt(getConfig(j,"repeatableStyle",0)),1===a&&(d=$(fc.jQueryContainer).find('.fc-field[fc-data-group="'+h+'"]'),b=d.attr("fc-belongs-to"),c=$(fc.jQueryContainer).find('.fc-field[fc-data-group="'+h+'"] .fc-repeatable-rows'),c.length>0&&(e=c.find(".fc-repeatable-row").length,e>0&&confirm(getConfig(j,"removeAlertText")))))){i=outputRepeatablePreDetermined(h,e-1,fc.sections[b]),c.html(i),setFieldValues(c),flushFieldVisibility(),flushActivePageForField(h,!0),void 0!==fc.fields[h]&&$.isArray(fc.fields[h])&&(0>=e-1?(fc.fields[h]=[],fc.saveQueue[h]=fc.fields[h]):(fc.fields[h].splice(e-1),fc.saveQueue[h]=fc.fields[h])),g=[h,e-1].join(fc.constants.prefixSeparator);for(f in fc.fields)fc.fields.hasOwnProperty(f)&&0===f.indexOf(g)&&(delete fc.fields[f],fc.saveQueue[f]="");e-1===0?d.find(".fc-remove").addClass("fc-hide"):d.find(".fc-add.fc-hide")&&d.find(".fc-add.fc-hide").removeClass("fc-hide")}return $(fc.jQueryContainer).trigger(fc.jsEvents.onDynamicRowRemoved),!1}),$(fc.jQueryContainer).on("click",".fc-help-link",function(){var a=$(this).attr("data-for");return fc.helpData&&fc.helpData[a]&&(fc.modalState=fc.states.MODAL_TEXT,fc.modalMeta={body:fc.helpData[a]},showModal({addButton:!1,body:fc.helpData[a],title:fc.helpTitle[a]})),!1}),$(fc.jQueryContainer).on("click",".fc-modal .fc-btn-close",function(){return $(".fc-modal.fc-show").removeClass("fc-show"),!1}),$(fc.jQueryContainer).on("click",".fc-modal .fc-btn-add",function(){if(void 0!==fc.modalState&&"string"==typeof fc.modalState)switch(fc.modalState){case fc.states.DELETE_REPEATABLE:deleteRepeatableRow();break;case fc.states.ADD_REPEATABLE:addRepeatableRow();break;case fc.states.EMAIL_VERIFICATION_CODE:verifyEmailAddress();break;case fc.states.SMS_VERIFICATION_CODE:verifyMobileNumber();break;case fc.states.EDIT_REPEATABLE:editRepeatableRow()}return!1}),registerRepeatableGroupletListeners(),registerApiLookupListener(),fc.config.onePage&&registerOnePageListeners(),$(window).resize(function(){fc.mobileView=isMobile(),fc.mobileView!==fc.inMobileView&&updateMobileFieldsVisibility()})},renderAutoCompleteWidget=function(a,b,c){if(!$.isArray(b))return"";var d,e,f,g,h,i,j=$('.fc-field[fc-data-group="'+a+'"]'),k=c.match(/\{([a-zA-Z0-9\-\_]+)\}/g);if(0!==k.length){for(e=0;e<k.length;e+=1)k[e]=k[e].replace(/[\{\}]/g,"");if(0===j.length)return"";for(d='<div class="fc-auto-suggest" data-id="'+a+'">',d+='<div class="fc-suggest-close"><a href="#">x</a></div>',e=0;e<b.length;e+=1){for(h=b[e],g=c.slice(0),f=0;f<k.length;f+=1)i=new RegExp("{"+k[f]+"}","g"),g=g.replace(i,void 0!==h[k[f]]?h[k[f]]:"");d+='<div class="fc-suggest-row" data-suggest="'+encodeURI(JSON.stringify(h))+'" data-id="'+a+'"><a href="#">'+g+"</a></div>"}return d+="</div>"}},removeAutoCompleteWidget=function(a){var b=$('.fc-field[fc-data-group="'+a+'"]');return 0===b.length?!1:void b.find(".fc-auto-suggest").remove()},registerApiLookupListener=function(){fc.registeredApiLookup!==!0&&($(fc.jQueryContainer).on("input paste",".fc-field-apiLookup input[type=text].fc-fieldinput",function(a){var b,c,d,e,f,g,h,i,j=$(this).attr("formcorp-data-id"),k=$('.fc-field[fc-data-group="'+j+'"]'),l=fc.fieldSchema[j],m=$(this).val(),n=getConfig(l,"responseSummary",""),o={},p=this;return e=parseInt(getConfig(l,"gracePeriod",-1)),0>e?void removeAutoCompleteWidget(j):0===n.length?void removeAutoCompleteWidget(j):(i=parseInt(getConfig(l,"minCharsBeforeTrigger",0)),i>0&&(g=m,f=getConfig(l,"stripCharRegex",""),f.length>0&&(h=new RegExp(f,"g"),g=g.replace(h,"")),g.length<i)?void removeAutoCompleteWidget(j):(b=getConfig(l,"apiUrl",""),b.length<=0?void removeAutoCompleteWidget(j):(c=getConfig(l,"requestType","GET"),["GET","POST","PUT"].indexOf(c)<0?void removeAutoCompleteWidget(j):(o.type=c,["POST","PUT"].indexOf(c)>=0&&(d=getConfig(l,"postData",""),d.length>0&&(d=d.replace(/<value>/g,encodeURIComponent(m)),o.data=d)),b.indexOf("<value>")>=0&&(b=b.replace(/<value>/g,encodeURIComponent(m))),o.url=b,o.success=function(a){if(0===a.length)removeAutoCompleteWidget(j);else{var b=renderAutoCompleteWidget(j,a,n),c=k.find(".fc-auto-suggest");c.length>0&&c.remove(),k.find(".fc-fieldgroup").append(b)}},void setTimeout(function(){var a=getFieldValue($(p));a===m&&$.ajax(o)},e)))))}),$(fc.jQueryContainer).on("click",".fc-suggest-close a",function(){var a=$(this).parent().parent().attr("data-id");return removeAutoCompleteWidget(a),!1}),$(fc.jQueryContainer).on("click",".fc-suggest-row",function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r=JSON.parse(decodeURI($(this).attr("data-suggest"))),s=getDataId($(this).attr("data-id")),t=fc.fieldSchema[s],u=getConfig(t,"mapResponse","{}"),v=!1;if("object"!=typeof r)return!1;try{a=JSON.parse(u)}catch(w){return!1}if(b=getFieldTags(!0),s.indexOf(fc.constants.prefixSeparator)>=0&&(l=s.split(fc.constants.prefixSeparator),void 0!==fc.fieldSchema[l[0]]&&void 0!==fc.fieldSchema[l[0]].type&&"grouplet"===fc.fieldSchema[l[0]].type)){m=getFieldsSchema(getConfig(fc.fieldSchema[l[0]],"grouplet",{field:[]}).field),v=getConfig(fc.fieldSchema[l[0]],"repeatable",!1),l.splice(v?2:1);for(n in m)m.hasOwnProperty(n)&&(p=getConfig(m[n],"tag",""),p.length>0&&(o=l.slice(),o.push(n),b[p]=getDataId(o.join(fc.constants.prefixSeparator))))}for(c in a)if(a.hasOwnProperty(c)&&void 0!==b[c]&&(d=b[c],k=$('.fc-field[fc-data-group="'+d+'"]'),k.length>0)){if(e=a[c],f=e.match(/\{([a-zA-Z0-9\-\_]+)\}/g),f.length>0)for(g=0;g<f.length;g+=1)h=f[g].replace(/[\{\}]/g,""),j=new RegExp("{"+h+"}","g"),i=void 0!==r[h]?r[h]:"",e=e.replace(j,i);setValue(d,e)}return q=getConfig(t,"successfulTransaction",""),q.length>0&&$.ajax({type:"GET",url:q}),removeAutoCompleteWidget(s),!1}),fc.registeredApiLookup=!0)},generateRandomString=function(a){var b,c="",d="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(b=0;a>b;b+=1)c+=d.charAt(Math.floor(Math.random()*d.length));return c},loadCssFiles=function(){var a,b="formcorp-css",c="formcorp.css";for(0===$("#"+b).length&&loadCssFile(cdnUrl()+c),$(fc.jQueryContainer).addClass("fc-container"),fc.config.hideModal||addModalWindow(),$(fc.jQueryContainer).prepend('<div class="fc-loading-screen"><div class="fc-loading-halo"></div></div>'),a=0;a<fc.config.signatureLibCss.length;a+=1)loadCssFile(fc.config.signatureLibCss[a]);for(a=0;a<fc.config.signatureLibJs.length;a+=1)loadJsFile(fc.config.signatureLibJs[a]);fc.renderedSignatures={}},addModalWindow=function(){if(!($("#fc-modal").length>0)){var a='<div class="fc-modal" id="fc-modal" aria-hidden="true"><div class="modal-dialog"><div class="modal-header"><h2>'+fc.lang.addModalHeader+'</h2></div><div class="modal-body"></div><div class="modal-footer"><div class="fc-loading fc-hide"></div><div class="fc-error fc-hide"></div><a href="#" class="btn btn-danger fc-btn-close">'+fc.lang.closeModalText+'</a> <a href="#" class="btn btn-success fc-btn-add">'+fc.lang.addModalText+"</a> </div></div></div></div>";$(fc.jQueryContainer).prepend($(a))}},orderSchema=function(a,b){if(void 0===b&&(b="order"),"object"==typeof a){var c;for(c in a)a.hasOwnProperty(c)&&(a[c]&&"object"==typeof a[c]&&void 0!==a[c][0]&&a[c][0]&&void 0!==a[c][0].order?a[c]=orderObject(a[c]):a[c]=orderSchema(a[c],b))}return a},orderObject=function(a){var b,c,d,e=[],f=[];for(b in a)a.hasOwnProperty(b)&&(c=void 0!==a[b].order?a[b].order:0,void 0===e[c]&&(e[c]=[]),e[c].push(a[b]));for(b in e)if(e.hasOwnProperty(b))for(d=0;d<e[b].length;d+=1)f.push(e[b][d]);return f},pruneNonPageFields=function(a,b){var c,d,e,f,g=[],h={};if("object"==typeof a.page&&"object"==typeof a.page.section)for(d=0;d<a.page.section.length;d+=1)if(c=a.page.section[d],"object"==typeof c.field&&c.field.length>0)for(e=0;e<c.field.length;e+=1)f=c.field[e],g.push(f._id.$id),void 0!==b[f._id.$id]?h[f._id.$id]=b[f._id.$id]:h[f._id.$id]="";return h},removeInvisibleSectionFields=function(page,fields){var section,x,y,visible,field;if("object"==typeof page.page&&"object"==typeof page.page.section)for(x=0;x<page.page.section.length;x+=1)if(section=page.page.section[x],"string"==typeof section.visibility&&section.visibility.length>0&&(visible=eval(section.visibility),!visible&&"object"==typeof section.field&&section.field.length>0))for(y=0;y<section.field.length;y+=1)field=section.field[y],delete fields[field._id.$id];return fields},pruneInvisibleFields=function(fields){if("object"==typeof fields){var dataId,field,visible,json;for(dataId in fields)if(fields.hasOwnProperty(dataId)){if(field=fc.fieldSchema[dataId],void 0===field)continue;if(getConfig(field,"mobileOnly",!1)&&!fc.mobileView){delete fields[dataId];continue}if(getConfig(field,"desktopOnly",!1)&&fc.mobileView){delete fields[dataId];continue}if("string"==typeof field.config.visibility&&field.config.visibility.length>0){if(["[","{"].indexOf(field.config.visibility.substring(0,1))>-1)try{json=$.parseJSON(field.config.visibility),field.config.visibility=toBooleanLogic(json)}catch(ignore){}try{visible=eval(field.config.visibility),"boolean"==typeof visible&&(visible||delete fields[dataId])}catch(ignore){}}}}return fields},fieldIsValid=function(dataId,value){var schema,customErrors,id,iterator,grouplet,val,visible,defaultValue,errors;try{if("string"==typeof dataId?schema=fc.fieldSchema[dataId]:"object"==typeof dataId&&(schema=dataId,dataId=getId(schema)),"object"!=typeof schema)return!0}catch(ignore){}if(getConfig(schema,"visibility",!1)!==!1)try{if(visible=eval(schema.config.visibility),"boolean"==typeof visible&&!visible)return!0}catch(ignore){}if(void 0!==schema.config&&void 0!==schema.config.required&&schema.config.required&&""===value)return defaultValue=getConfig(schema,"defaultValue",""),"string"==typeof defaultValue&&defaultValue.length>0?!0:!1;if("grouplet"===schema.type&&!getConfig(schema,"repeatable",!1)){if(grouplet=getConfig(schema,"grouplet",{}),void 0!==grouplet.field&&"object"==typeof grouplet.field&&grouplet.field.length>0)for(iterator=0;iterator<grouplet.field.length;iterator+=1)if(id=dataId+fc.constants.prefixSeparator+grouplet.field[iterator]._id.$id,val=void 0!==fc.fields[id]?fc.fields[id]:"",!fieldIsValid(grouplet.field[iterator],val))return!1;return!0}return errors=getFieldErrors(dataId),$.isArray(errors)&&errors.length>0?!1:(customErrors=getCustomErrors(schema,value),0===customErrors.length)},formFieldsValid=function(a){if("object"!=typeof a)return!0;var b;for(b in a)if(a.hasOwnProperty(b)&&!fieldIsValid(b,a[b]))return!1;return!0},getFirstPageId=function(){var a;if(fc.channel&&"string"==typeof fc.channel&&fc.channel.length>0&&fc.schema.channel&&$.isArray(fc.schema.channel)&&fc.schema.channel.length>0)for(a=0;a<fc.schema.channel.length;a+=1)if(fc.schema.channel[a].name&&fc.schema.channel[a].name===fc.channel)return fc.schema.channel[a]["default"];return fc.schema.stage[0].page[0]._id.$id},getFirstPage=function(){var a,b,c,d,e=getFirstPageId(),f=!1;do{if(a=getPageById(e),void 0===a)break;if("object"!=typeof a.stage)break;if(fc.currentPage=e,fc.config.updateHash&&(window.location.hash=e),updateFieldSchema(a.stage),c=pruneNonPageFields(a,fc.fields),c=removeInvisibleSectionFields(a,c),c=pruneInvisibleFields(c),fc.config.onePage?(render(e),flushVisibility(),f=validForm(fc.jQueryContainer,!1)&&!isSubmitPage(a.page)):(d=formFieldsValid(c),f=d&&!isSubmitPage(a.page)),f){if(b=nextPage(!1,!0),void 0===b||"object"!=typeof b){d=!1;break}if(e=b.page._id.$id,fc.prevPages[e]=a,isSubmitPage(b.page)===!0){d=!1;break}}}while(f);return e},loadSettings=function(a){api("form/settings",{},"post",function(b){"object"==typeof b&&(fc.settings=b),a()})},loadSchema=function(){api("form/schema",{},"post",function(a){if("boolean"==typeof a.error&&a.error)return void console.log("FC Error: "+a.message);var b,c;if(a&&a.stage&&setFieldSchemas(a.stage),"object"==typeof a.data&&Object.keys(a.data).length>0)for(b in a.data)a.data.hasOwnProperty(b)&&(fc.fields[b]=a.data[b],fc.fieldSchema[b]&&fc.fieldSchema[b].type&&"abnVerification"===fc.fieldSchema[b].type&&fc.fields[b].length>0&&fc.validAbns.push(fc.fields[b]),b.indexOf(fc.constants.prefixSeparator)>-1&&saveOriginalGroupletValue(b,a.data[b]));void 0!==a.stage&&(fc.schema=orderSchema(a),"object"==typeof fc.schema.stage&&fc.schema.stage.length>0&&"object"==typeof fc.schema.stage[0].page&&fc.schema.stage[0].page.length>0&&(c=getFirstPage(),fc.config.onePage||render(c))),$(fc.jQueryContainer).trigger(fc.jsEvents.onConnectionMade),onSchemaLoaded()})},processSaveQueue=function(){if(fc.config.saveInRealTime===!0){if(fc.saveQueueRunning===!0)return void console.log("[FC] Save queue is already running (slow server?)");if(0!==Object.keys(fc.saveQueue).length){fc.saveQueueRunning=!0;var a=fc.saveQueue,b={form_id:fc.formId,page_id:fc.pageId,form_values:a};api("page/submit",b,"put",function(b){var c;if("object"==typeof b&&b.success===!0){fc.lastActivity=(new Date).getTime();for(c in a)a.hasOwnProperty(c)&&"string"==typeof fc.saveQueue[c]&&fc.saveQueue[c]===a[c]&&delete fc.saveQueue[c]}fc.saveQueueRunning=!1})}}},{init:function(a,b){this.publicKey=a,this.container=b,this.jQueryContainer="#"+b,this.fields={},this.fieldSchema={},this.sections={},this.pages={},this.saveQueueRunning=!1,this.saveQueue={},this.prevPages={},this.lastActivity=(new Date).getTime(),this.expired=!1,this.pageOrders=[],this.activeScroll="",this.processedActions={},this.analytics=!1,this.lastCompletedField="",this.lastCompletedTimestamp=Date.now(),this.lastHesitationTime=-1,this.nextPageLoadedTimestamp=Date.now(),this.nextPageButtonClicked=!1,this.validAbns=[],this.mobileView=isMobile(),this.withinIterator={},jQuery.support.cors=!0,this.reRenderOnValueChange={},this.fieldGrouplets={},"boolean"!=typeof this.dev&&(this.dev=!1),this.states={DELETE_REPEATABLE:"deleteRepeatable",ADD_REPEATABLE:"addRepeatableRow",EDIT_REPEATABLE:"editRepeatableRow",EMAIL_VERIFICATION_CODE:"emailVerificationCode",SMS_VERIFICATION_CODE:"smsVerificationCode",MODAL_TEXT:"modalText"},this.eventTypes={onFieldInit:"onFieldInit",onFocus:"onFocus",onBlur:"onBlur",onValueChange:"onValueChange",onNextStage:"onNextStage",onFormInit:"onFormInit",onMouseDown:"onMouseDown",onFieldError:"onFieldError",onNextPageClick:"onNextPageClick",onNextPageSuccess:"onNextPageSuccess",onNextPageError:"onNextPageError",onFormComplete:"onFormComplete"},this.jsEvents={onFormInit:"OnFcInit",onFormExpired:"onFormExpired",onValidationError:"onValidationError",onFormComplete:"onFormComplete",onNextPage:"onNextPage",onPageChange:"onPageChange",onPrevPage:"onPrevPage",onConnectionMade:"onFCConnectionMade",onFinishRender:"onFinishFormRender",onFieldError:"onFieldError",onFieldSuccess:"onFieldSuccess",onAnalyticsLoaded:"onAnalyticsLoaded",onFieldValueChange:"onFieldValueChange",onLoadingPageStart:"onLoadingPageStart",onLoadingPageEnd:"onLoadingPageEnd",onGreenIdLoaded:"onGreenIdLoaded",onButtonUnknownClick:"onButtonUnknownClick",onDynamicRowAdded:"onDynamicRowAdded",onDynamicRowRemoved:"onDynamicRowRemoved"},this.processes={emailListeners:"emailListeners",smsListeners:"smsListeners",creditCardListeners:"creditCardListeners",loadSignatureLibs:"loadSignatureLibs"},this.constants={enterKey:13,prefixSeparator:"_",tagSeparator:".",configKeys:{summaryLayout:"summaryLayout"},persistentSessions:"persistentSessions",defaultChannel:"master",greenId:{scriptPath:isMinified()?"lib/green-id.min.js":"lib/green-id.js"},repeatableWithButton:[0,1],repeatablePredetermined:2,repeatableInModal:[0],repeatableInDOM:[1,2],repeatableLinkedTo:"repeatableLinkedTo",functionCallbackType:"functionCallback",formulaPrefix:"FORMULA:",formLoadedClass:"fc-form-loaded"},this.environments={live:"Live",sandbox:"Sandbox"},this.gateways={paycorp:{method:"POST",action:{sandbox:"https://test-merchants.paycorp.com.au/paycentre3/makeEntry",live:"https://merchants.paycorp.com.au/paycentre3/makeEntry"}},securepay:{method:"POST",action:{sandbox:"https://payment.securepay.com.au/test/v2/invoice?bill_name=transact",live:"https://payment.securepay.com.au/live/v2/invoice?bill_name=transact"}}},this.cardTypes={visa:"visa",mastercard:"mastercard",amex:"amex"},void 0===fc.config&&this.setConfig(),void 0===fc.lang&&this.setLanguage(),void 0===fc.channel&&(fc.channel=fc.constants.defaultChannel),$(document).ready(function(){return(fc.config.analytics===!0||"string"==typeof fc.config.analytics&&fc.config.analytics.length>0)&&initAnalytics(),0===$(fc.jQueryContainer).length?!1:""===$(fc.jQueryContainer).attr("data-id")?!1:(fc.formId=$(fc.jQueryContainer).attr("data-id"),loadJsFile(parserUrl(),function(){fc.parser=new Parser,fc.parser.functions.groupletLength=groupletLength,fc.parser.functions.getValue=getValue,fc.parser.functions.fieldIdByTag=fieldIdByTag,fc.parser.functions.getContentRadioListMeta=getContentRadioListMeta}),void loadSettings(function(){fc.initSession(),$(fc.jQueryContainer).hasClass("fc-channel")||$(fc.jQueryContainer).addClass("fc-channel fc-channel-"+fc.channel),$(fc.jQueryContainer).html('<div class="render"></div>'),loadCssFiles(),registerEventListeners(),loadSchema(),fc.formPosition=$(fc.jQueryContainer).position(),logEvent(fc.eventTypes.onFormInit),$(fc.jQueryContainer).trigger(fc.jsEvents.onFormInit),$(fc.jQueryContainer).addClass(fc.constants.formLoadedClass),fc.config.saveInRealTime===!0&&setInterval(function(){processSaveQueue()},fc.config.saveInRealTimeInterval),fc.config.timeUserOut&&setInterval(function(){fc.expired!==!0&&timeout()},5e3)}))})},getCdnUrl:function(){return cdnUrl},api:api,getConfig:getConfig,getId:getId,renderGreenIdField:renderGreenIdField,initGreenIdFieldInDOM:initGreenIdFieldInDOM,getUrlParameter:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))},setBranch:function(a){this.branch=a},setAsDevelopmentMode:function(a){"boolean"!=typeof a&&(a=!0),this.dev=a},setApiUrl:function(a){return"string"!=typeof a?!1:(this.apiUrl=a,!0)},setCdnUrl:function(a){return"string"!=typeof a?!1:(this.cdnUrl=a,!0)},setChannel:function(a){this.channel=a},setSessionId:function(a){this.sessionId=a},setValue:setValue,getValue:function(a){return getValue(a)},setConfig:function(a){var b,c=8e3,d=6e3;if(this.config={analytics:!0,realTimeValidation:!0,inlineValidation:!0,sessionKeyLength:40,sessionIdName:"fcSessionId",eventQueueInterval:c,saveInRealTime:!0,saveInRealTimeInterval:d,showPrevPageButton:!0,timeUserOut:!1,timeOutWarning:870,timeOutAfter:900,cvvImage:null,onePage:!1,smoothScroll:!1,scrollDuration:1e3,scrollOnSubmitError:!1,scrollWait:500,initialScrollOffset:0,scrollOffset:0,conditionalHtmlScrollOffset:{},autoLoadPages:!1,autoScrollToNextField:!1,activePageOffset:250,creditCardNumberLimits:[16,16],maxCreditCardCodeLength:4,descriptionBeforeLabel:!0,creditCardErrorUrlParam:"creditCardError",forceSignatureLib:!1,signatureLibCss:[cdnUrl()+"dist/signaturepad/assets/jquery.signaturepad.css"],signatureLibJs:[cdnUrl()+"dist/signaturepad/jquery.signaturepad.min.js",cdnUrl()+"dist/signaturepad/assets/flashcanvas.js",cdnUrl()+"dist/signaturepad/assets/json2.min.js"],signatureClass:"sigPad",updateHash:!0,deleteSessionOnComplete:!0,autoShiftFocusOnEnter:!1,minSizeForMobile:479,asterisksOnLabels:!0,colonAfterLabel:!0,helpAsModal:!1,staticHelpModalLink:!1,hideModal:!1,helpDefaultWhenNoTitleText:!0},this.config.eventQueueInterval<c&&(this.config.eventQueueInterval=c),this.config.saveInRealTimeInterval<d&&(this.config.saveInRealTimeInterval=d),"object"==typeof a&&Object.keys(a).length>0)for(b in a)a.hasOwnProperty(b)&&(fc.config[b]=a[b])},fieldErrors:fieldErrors,setLanguage:function(a){var b;if(this.lang={prevButtonText:"Previous",submitText:"Next",submitFormText:"Submit application",formCompleteHtml:'<h2 class="fc-header">Your application is complete</h2><p>Congratulations, your application has successfully been completed. Please expect a response shortly.</p>',addFieldTextValue:"Add value",removeFieldTextValue:"Remove value",closeModalText:"Close",addModalText:"Add",addModalHeader:"Add value",emptyFieldError:"This field cannot be empty",defaultCustomValidationError:"This field failed custom validation",sessionExpiredHtml:'<h2 class="fc-header">Your session has expired</h2><p>Unfortunately, due to a period of extended inactivity, your session has expired. To fill out a new form submission, please refresh your page.</p>',creditCardNameText:"Name (as it appears on your card)",creditCardNumberText:"Card number (no dashes or spaces)",creditCardExpiryDateText:"Expiration date",creditCardSecurityCodeText:"Security code (3 on back, Amex: 4 on front)",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],creditCardMissingName:"You must enter a valid name as it appears on your credit card",creditCardMissingNumber:"You must enter a valid credit card number",creditCardMissingExpiryDate:"You must enter a valid expiry date",creditCardExpired:"Your card has expired",creditCardMissingSecurityCode:"You must enter a valid security code",creditCardNumberIncorrectFormat:"The format of your credit card number is incorrect, please verify your details",edit:"Edit","delete":"Delete",error:"Error",verificationErrorPrefix:"ERROR: ",verificationEmptyCode:"You must enter a verification code.",defaultModalTitle:"Information",deleteDialogHeader:"Are you sure?",editDialogHeader:"Edit",deleteSignatoryDialogText:"Are you sure you want to delete the selected signatory?",editSignatoryDialogText:"Edit signatory",confirm:"Confirm",invalidCardFormat:"The credit card you entered could not be recognised",sendEmail:"Send email",fieldValidated:"<p>Successfully verified</p>",fieldMustBeVerified:"You must first complete verification",sendSms:"Send SMS",payNow:"Pay now",creditCardSuccess:"<p>Your payment has successfully been processed.</p>",paymentRequired:"Payment is required before proceeding.",paymentGst:"GST:",paymentSubTotal:"Sub-total:",paymentTotal:"Total:",currencySymbol:"$",total:"Total",description:"Description",paymentDescription:"Application completion",validate:"Validate",validAbnRequired:"You must enter and validate a valid ABN.",helpModalLink:"what is this?",helpTitle:"What is this?",requiredAsterisk:"*",labelColon:":",greenID:{options:{driversLicense:{title:"Drivers Licence",body:"Use your state issued drivers licence to help prove your identity.",icon:""},passport:{title:"Passport",body:"Help confirm your identity using the details on your Australian issued passport.",icon:""},skip:{title:"Skip Verification",body:"You will be required to manually attach verification documents upon form submission.",icon:""}}},verify:"Verify"},"object"==typeof a&&Object.keys(a).length>0)for(b in a)a.hasOwnProperty(b)&&(fc.lang[b]=a[b])},getSetting:function(a,b){return fc.settings&&void 0!==fc.settings[a]?fc.settings[a]:b},initSession:function(){return void 0!==this.sessionId&&this.getSetting(this.constants.persistentSessions,!1)?void $.cookie(this.config.sessionIdName,this.sessionId):void(void 0===this.sessionId&&void 0===$.cookie(this.config.sessionIdName)?(this.sessionId=generateRandomString(this.config.sessionKeyLength),$.cookie(this.config.sessionIdName,this.sessionId)):this.sessionId=$.cookie(this.config.sessionIdName))},pageIsValid:function(a){var b=$('.fc-page[data-page-id="'+a+'"]');return b&&b.length>0?validForm(b,!1):void 0},getPageById:getPageById,comparisonEqual:function(a,b){return void 0===a?!1:a===b},comparisonNot_equal:function(a,b){return a!==b},comparisonIn:function(a,b,c){if(void 0===a)return!1;var d,e,f;if("string"==typeof c&&c.length>0&&(c=getDataId(c),!fieldIsVisible(c)))return!1;try{f=$.parseJSON(a),a=f}catch(g){}if("string"==typeof a){if("object"==typeof b)for(d=0;d<b.length;d+=1)if(e=b[d],a===e)return!0}else if(a&&b&&"object"==typeof a&&"object"==typeof b){for(d=0;d<b.length;d+=1)try{if(a&&-1===a.indexOf(b[d]))return!1}catch(g){}return!0}return!1},comparisonNot_in:function(a,b,c){return!fc.comparisonIn(a,b,c)},comparisonIs_not_null:function(a){return void 0===a?!1:"string"==typeof a?a.length>0:void 0},comparisonIs_null:function(a){return void 0===a?!0:"string"==typeof a?0===a.length:!1},comparisonIs_not_empty:function(a){return void 0===a?!1:"string"==typeof a?a.length>0:"object"==typeof a?$.isArray(a)?a.length>0:Object.keys(a).length>0:void 0},comparisonIs_empty:function(a){return void 0===a?!1:"string"==typeof a?0===a.length:"object"==typeof a?$.isArray(a)?0===a.length:0===Object.keys(a).length:void 0},comparisonContains:function(a,b){return void 0===a?!1:a.indexOf(b)>-1},comparisonNot_contains:function(a,b){return void 0===a?!1:-1===a.indexOf(b)},toCamelCase:function(a){return a.replace(/^([A-Z])|\s(\w)/g,function(a,b,c){return c?c.toUpperCase():b.toLowerCase()})},validatorRange:function(a,b){if(!$.isNumeric(b))return!1;var c=parseFloat(a[0]),d=parseFloat(a[1]),e=parseFloat(b);return e>=c&&d>=e},validatorMin:function(a,b){return b=b.replace(/\,/g,""),$.isNumeric(b)?parseFloat(b)>=parseFloat(a[0]):!1},validatorMax:function(a,b){return b=b.replace(/\,/g,""),$.isNumeric(b)?parseFloat(b)<=parseFloat(a[0]):!1},validatorRegularExpression:function(a,b){var c=new RegExp(a[0]);return c.test(b)}}}(jQuery),validAbn=function(a){if(0===a.replace(/[^0-9]/g,"").length)return!0;var b,c=[10,1,3,5,7,9,11,13,15,17,19],d=0,e=a.replace(/[\s]+/g,""),f=e.split("");if(/[^0-9]/.test(e))return!1;if(11!==e.length)return!1;for(f[0]=parseInt(f[0])-1,b=0;11>b;b+=1)d+=parseInt(f[b])*c[b];return d%89===0},validAcn=function(a){if(0===a.replace(/[^0-9]/g,"").length)return!0;var b,c,d,e=[8,7,6,5,4,3,2,1],f=0,g=a.replace(/[\s]+/g,"",a),h=g.split("");if(/[^0-9]/.test(g))return!1;if(9!==g.length)return!1;for(b=0;8>b;b+=1)f+=parseInt(h[b])*e[b];return c=f%10,d=(10-c)%10,d===parseInt(h[8])},validAcnOrAbn=function(a){return validAbn(a)||validAcn(a)},validTFN=function(a){if(0===a.replace(/[^0-9]/g,"").length)return!0;if(!/^\d{9}$/g.test(a))return!1;var b,c=[1,4,3,7,5,8,6,9,10],d=0,e=["333333333","444444441","444444442","555555555","666666666","777777777","888888888","987654321","000000000","111111111"];if(e.indexOf(a)>=0)return!0;for(b=0;9>b;b+=1)d+=a[b]*c[b];return d%11===0};